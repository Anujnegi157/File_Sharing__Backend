<!DOCTYPE html>
<!-- saved from url=(0058)https://www.joshwcomeau.com/react/usememo-and-usecallback/ -->
<html lang="en" data-color-mode="light" style="--color-text: hsl(222deg, 22%, 5%); --color-background: hsl(0deg, 0%, 100%); --color-blurred-background: hsla(0deg, 0%, 100%, 0.85); --color-primary: hsl(245deg, 100%, 60%); --color-secondary: hsl(333deg, 100%, 45%); --color-tertiary: hsl(255deg, 85%, 30%); --color-decorative: hsl(200deg, 75%, 65%); --color-muted: hsl(210deg, 55%, 92%); --color-muted-background: hsla(210deg, 55%, 92%, 0.85); --color-info: hsl(245deg, 100%, 60%); --color-success: hsl(160deg, 100%, 40%); --color-success-background: hsla(160deg, 100%, 40%, 0.1); --color-error: hsl(340deg, 95%, 50%); --color-error-background: hsla(340deg, 95%, 43%, 0.1); --color-alert: hsl(37deg, 100%, 50%); --color-alert-background: hsla(52deg, 100%, 50%, 0.25); --color-venn-0: hsl(190deg, 100%, 65%); --color-venn-1: hsl(340deg, 100%, 65%); --color-gray-100: hsl(225deg, 25%, 95%); --color-gray-200: hsl(225deg, 16%, 90%); --color-gray-300: hsl(225deg, 8%, 80%); --color-gray-400: hsl(225deg, 8%, 70%); --color-gray-500: hsl(225deg, 7%, 60%); --color-gray-600: hsl(225deg, 15%, 50%); --color-gray-700: hsl(225deg, 12%, 40%); --color-gray-900: hsl(225deg, 25%, 20%); --color-gray-1000: hsl(225deg, 15%, 15%); --color-subtle-background: hsl(225deg, 25%, 95%); --color-subtle-floating: hsl(0deg, 0%, 100%); --color-homepage-light: hsl(204deg, 67%, 85%); --color-homepage-dark: hsl(202deg, 71%, 90%); --color-homepage-bg: hsl(204deg, 67%, 85%); --syntax-bg: hsl(225deg, 25%, 97%); --syntax-highlight: hsl(225deg, 25%, 93%); --syntax-txt: #2A2A2A; --syntax-comment: #467790; --syntax-prop: #da0079; --syntax-bool: #bf00b8; --syntax-val: #78909C; --syntax-str: #651fff; --syntax-name: #AA00FF; --syntax-del: rgb(255, 85, 85); --syntax-regex: #3600d6; --syntax-fn: #3D5AFE; --prefers-dark: false;" class="js-focus-visible"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style>.ͼ1.cm-editor.cm-focused {outline: 1px dotted #212121;}
.ͼ1.cm-editor {position: relative !important; box-sizing: border-box; display: flex !important; flex-direction: column;}
.ͼ1 .cm-scroller {display: flex !important; align-items: flex-start !important; font-family: monospace; line-height: 1.4; height: 100%; overflow-x: auto; position: relative; z-index: 0;}
.ͼ1 .cm-content[contenteditable=true] {-webkit-user-modify: read-write-plaintext-only;}
.ͼ1 .cm-content {margin: 0; flex-grow: 2; min-height: 100%; display: block; white-space: pre; word-wrap: normal; box-sizing: border-box; padding: 4px 0; outline: none;}
.ͼ1 .cm-lineWrapping {white-space: pre-wrap; white-space: break-spaces; word-break: break-word; overflow-wrap: anywhere;}
.ͼ2 .cm-content {caret-color: black;}
.ͼ3 .cm-content {caret-color: white;}
.ͼ1 .cm-line {display: block; padding: 0 2px 0 4px;}
.ͼ1 .cm-selectionLayer {z-index: -1; contain: size style;}
.ͼ1 .cm-selectionBackground {position: absolute;}
.ͼ2 .cm-selectionBackground {background: #d9d9d9;}
.ͼ3 .cm-selectionBackground {background: #222;}
.ͼ2.cm-focused .cm-selectionBackground {background: #d7d4f0;}
.ͼ3.cm-focused .cm-selectionBackground {background: #233;}
.ͼ1 .cm-cursorLayer {z-index: 100; contain: size style; pointer-events: none;}
.ͼ1.cm-focused .cm-cursorLayer {animation: steps(1) cm-blink 1.2s infinite;}
@keyframes cm-blink {50% {visibility: hidden;}}
@keyframes cm-blink2 {50% {visibility: hidden;}}
.ͼ1 .cm-cursor, .ͼ1 .cm-dropCursor {position: absolute; border-left: 1.2px solid black; margin-left: -0.6px; pointer-events: none;}
.ͼ1 .cm-cursor {display: none;}
.ͼ3 .cm-cursor {border-left-color: #444;}
.ͼ1.cm-focused .cm-cursor {display: block;}
.ͼ2 .cm-activeLine {background-color: #f3f9ff;}
.ͼ3 .cm-activeLine {background-color: #223039;}
.ͼ2 .cm-specialChar {color: red;}
.ͼ3 .cm-specialChar {color: #f78;}
.ͼ1 .cm-tab {display: inline-block; overflow: hidden; vertical-align: bottom;}
.ͼ1 .cm-widgetBuffer {vertical-align: text-top; height: 1em; display: inline;}
.ͼ1 .cm-placeholder {color: #888; display: inline-block; vertical-align: top;}
.ͼ1 .cm-button {vertical-align: middle; color: inherit; font-size: 70%; padding: .2em 1em; border-radius: 1px;}
.ͼ2 .cm-button:active {background-image: linear-gradient(#b4b4b4, #d0d3d6);}
.ͼ2 .cm-button {background-image: linear-gradient(#eff1f5, #d9d9df); border: 1px solid #888;}
.ͼ3 .cm-button:active {background-image: linear-gradient(#111, #333);}
.ͼ3 .cm-button {background-image: linear-gradient(#393939, #111); border: 1px solid #888;}
.ͼ1 .cm-textfield {vertical-align: middle; color: inherit; font-size: 70%; border: 1px solid silver; padding: .2em .5em;}
.ͼ2 .cm-textfield {background-color: white;}
.ͼ3 .cm-textfield {border: 1px solid #555; background-color: inherit;}
.ͼ1.cm-focused .cm-matchingBracket {background-color: #328c8252;}
.ͼ1.cm-focused .cm-nonmatchingBracket {background-color: #bb555544;}
.ͼta {text-decoration: underline;}
.ͼtb {font-style: italic;}
.ͼtc {font-weight: bold;}
.ͼtd {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼtd .cm-matchingBracket, .ͼtd .cm-nonmatchingBracket, .ͼtd.cm-focused .cm-matchingBracket, .ͼtd.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼtd.cm-editor.cm-focused {outline: none;}
.ͼtd .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼtd .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼtd .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼtd .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼtd .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼtd .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼtd .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼtd .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼtd .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼsu {text-decoration: underline;}
.ͼsv {font-style: italic;}
.ͼsw {font-weight: bold;}
.ͼsx {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼsx .cm-matchingBracket, .ͼsx .cm-nonmatchingBracket, .ͼsx.cm-focused .cm-matchingBracket, .ͼsx.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼsx.cm-editor.cm-focused {outline: none;}
.ͼsx .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼsx .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼsx .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼsx .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼsx .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼsx .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼsx .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼsx .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼsx .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼse {text-decoration: underline;}
.ͼsf {font-style: italic;}
.ͼsg {font-weight: bold;}
.ͼsh {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼsh .cm-matchingBracket, .ͼsh .cm-nonmatchingBracket, .ͼsh.cm-focused .cm-matchingBracket, .ͼsh.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼsh.cm-editor.cm-focused {outline: none;}
.ͼsh .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼsh .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼsh .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼsh .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼsh .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼsh .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼsh .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼsh .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼsh .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼry {text-decoration: underline;}
.ͼrz {font-style: italic;}
.ͼs0 {font-weight: bold;}
.ͼs1 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼs1 .cm-matchingBracket, .ͼs1 .cm-nonmatchingBracket, .ͼs1.cm-focused .cm-matchingBracket, .ͼs1.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼs1.cm-editor.cm-focused {outline: none;}
.ͼs1 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼs1 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼs1 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼs1 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼs1 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼs1 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼs1 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼs1 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼs1 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼr6 {text-decoration: underline;}
.ͼr7 {font-style: italic;}
.ͼr8 {font-weight: bold;}
.ͼr9 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼr9 .cm-matchingBracket, .ͼr9 .cm-nonmatchingBracket, .ͼr9.cm-focused .cm-matchingBracket, .ͼr9.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼr9.cm-editor.cm-focused {outline: none;}
.ͼr9 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼr9 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼr9 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼr9 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼr9 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼr9 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼr9 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼr9 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼr9 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼqq {text-decoration: underline;}
.ͼqr {font-style: italic;}
.ͼqs {font-weight: bold;}
.ͼqt {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼqt .cm-matchingBracket, .ͼqt .cm-nonmatchingBracket, .ͼqt.cm-focused .cm-matchingBracket, .ͼqt.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼqt.cm-editor.cm-focused {outline: none;}
.ͼqt .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼqt .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼqt .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼqt .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼqt .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼqt .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼqt .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼqt .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼqt .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼqa {text-decoration: underline;}
.ͼqb {font-style: italic;}
.ͼqc {font-weight: bold;}
.ͼqd {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼqd .cm-matchingBracket, .ͼqd .cm-nonmatchingBracket, .ͼqd.cm-focused .cm-matchingBracket, .ͼqd.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼqd.cm-editor.cm-focused {outline: none;}
.ͼqd .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼqd .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼqd .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼqd .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼqd .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼqd .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼqd .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼqd .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼqd .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼpu {text-decoration: underline;}
.ͼpv {font-style: italic;}
.ͼpw {font-weight: bold;}
.ͼpx {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼpx .cm-matchingBracket, .ͼpx .cm-nonmatchingBracket, .ͼpx.cm-focused .cm-matchingBracket, .ͼpx.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼpx.cm-editor.cm-focused {outline: none;}
.ͼpx .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼpx .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼpx .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼpx .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼpx .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼpx .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼpx .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼpx .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼpx .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼok {text-decoration: underline;}
.ͼol {font-style: italic;}
.ͼom {font-weight: bold;}
.ͼon {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼon .cm-matchingBracket, .ͼon .cm-nonmatchingBracket, .ͼon.cm-focused .cm-matchingBracket, .ͼon.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼon.cm-editor.cm-focused {outline: none;}
.ͼon .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼon .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼon .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼon .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼon .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼon .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼon .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼon .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼon .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼn1 {text-decoration: underline;}
.ͼn2 {font-style: italic;}
.ͼn3 {font-weight: bold;}
.ͼn4 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼn4 .cm-matchingBracket, .ͼn4 .cm-nonmatchingBracket, .ͼn4.cm-focused .cm-matchingBracket, .ͼn4.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼn4.cm-editor.cm-focused {outline: none;}
.ͼn4 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼn4 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼn4 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼn4 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼn4 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼn4 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼn4 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼn4 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼn4 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼml {text-decoration: underline;}
.ͼmm {font-style: italic;}
.ͼmn {font-weight: bold;}
.ͼmo {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼmo .cm-matchingBracket, .ͼmo .cm-nonmatchingBracket, .ͼmo.cm-focused .cm-matchingBracket, .ͼmo.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼmo.cm-editor.cm-focused {outline: none;}
.ͼmo .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼmo .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼmo .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼmo .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼmo .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼmo .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼmo .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼmo .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼmo .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼlq {text-decoration: underline;}
.ͼlr {font-style: italic;}
.ͼls {font-weight: bold;}
.ͼlt {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼlt .cm-matchingBracket, .ͼlt .cm-nonmatchingBracket, .ͼlt.cm-focused .cm-matchingBracket, .ͼlt.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼlt.cm-editor.cm-focused {outline: none;}
.ͼlt .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼlt .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼlt .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼlt .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼlt .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼlt .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼlt .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼlt .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼlt .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼla {text-decoration: underline;}
.ͼlb {font-style: italic;}
.ͼlc {font-weight: bold;}
.ͼld {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼld .cm-matchingBracket, .ͼld .cm-nonmatchingBracket, .ͼld.cm-focused .cm-matchingBracket, .ͼld.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼld.cm-editor.cm-focused {outline: none;}
.ͼld .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼld .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼld .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼld .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼld .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼld .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼld .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼld .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼld .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼkl {text-decoration: underline;}
.ͼkm {font-style: italic;}
.ͼkn {font-weight: bold;}
.ͼko {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼko .cm-matchingBracket, .ͼko .cm-nonmatchingBracket, .ͼko.cm-focused .cm-matchingBracket, .ͼko.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼko.cm-editor.cm-focused {outline: none;}
.ͼko .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼko .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼko .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼko .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼko .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼko .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼko .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼko .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼko .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼiz {text-decoration: underline;}
.ͼj0 {font-style: italic;}
.ͼj1 {font-weight: bold;}
.ͼj2 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼj2 .cm-matchingBracket, .ͼj2 .cm-nonmatchingBracket, .ͼj2.cm-focused .cm-matchingBracket, .ͼj2.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼj2.cm-editor.cm-focused {outline: none;}
.ͼj2 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼj2 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼj2 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼj2 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼj2 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼj2 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼj2 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼj2 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼj2 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼij {text-decoration: underline;}
.ͼik {font-style: italic;}
.ͼil {font-weight: bold;}
.ͼim {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼim .cm-matchingBracket, .ͼim .cm-nonmatchingBracket, .ͼim.cm-focused .cm-matchingBracket, .ͼim.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼim.cm-editor.cm-focused {outline: none;}
.ͼim .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼim .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼim .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼim .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼim .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼim .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼim .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼim .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼim .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼi3 {text-decoration: underline;}
.ͼi4 {font-style: italic;}
.ͼi5 {font-weight: bold;}
.ͼi6 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼi6 .cm-matchingBracket, .ͼi6 .cm-nonmatchingBracket, .ͼi6.cm-focused .cm-matchingBracket, .ͼi6.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼi6.cm-editor.cm-focused {outline: none;}
.ͼi6 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼi6 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼi6 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼi6 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼi6 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼi6 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼi6 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼi6 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼi6 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼg2 {text-decoration: underline;}
.ͼg3 {font-style: italic;}
.ͼg4 {font-weight: bold;}
.ͼg5 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼg5 .cm-matchingBracket, .ͼg5 .cm-nonmatchingBracket, .ͼg5.cm-focused .cm-matchingBracket, .ͼg5.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼg5.cm-editor.cm-focused {outline: none;}
.ͼg5 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼg5 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼg5 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼg5 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼg5 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼg5 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼg5 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼg5 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼg5 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼfm {text-decoration: underline;}
.ͼfn {font-style: italic;}
.ͼfo {font-weight: bold;}
.ͼfp {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼfp .cm-matchingBracket, .ͼfp .cm-nonmatchingBracket, .ͼfp.cm-focused .cm-matchingBracket, .ͼfp.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼfp.cm-editor.cm-focused {outline: none;}
.ͼfp .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼfp .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼfp .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼfp .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼfp .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼfp .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼfp .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼfp .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼfp .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼf6 {text-decoration: underline;}
.ͼf7 {font-style: italic;}
.ͼf8 {font-weight: bold;}
.ͼf9 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼf9 .cm-matchingBracket, .ͼf9 .cm-nonmatchingBracket, .ͼf9.cm-focused .cm-matchingBracket, .ͼf9.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼf9.cm-editor.cm-focused {outline: none;}
.ͼf9 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼf9 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼf9 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼf9 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼf9 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼf9 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼf9 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼf9 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼf9 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼeq {text-decoration: underline;}
.ͼer {font-style: italic;}
.ͼes {font-weight: bold;}
.ͼet {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼet .cm-matchingBracket, .ͼet .cm-nonmatchingBracket, .ͼet.cm-focused .cm-matchingBracket, .ͼet.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼet.cm-editor.cm-focused {outline: none;}
.ͼet .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼet .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼet .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼet .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼet .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼet .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼet .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼet .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼet .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼe7 {text-decoration: underline;}
.ͼe8 {font-style: italic;}
.ͼe9 {font-weight: bold;}
.ͼea {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼea .cm-matchingBracket, .ͼea .cm-nonmatchingBracket, .ͼea.cm-focused .cm-matchingBracket, .ͼea.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼea.cm-editor.cm-focused {outline: none;}
.ͼea .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼea .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼea .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼea .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼea .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼea .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼea .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼea .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼea .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼdf {text-decoration: underline;}
.ͼdg {font-style: italic;}
.ͼdh {font-weight: bold;}
.ͼdi {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼdi .cm-matchingBracket, .ͼdi .cm-nonmatchingBracket, .ͼdi.cm-focused .cm-matchingBracket, .ͼdi.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼdi.cm-editor.cm-focused {outline: none;}
.ͼdi .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼdi .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼdi .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼdi .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼdi .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼdi .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼdi .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼdi .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼdi .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼ9n {text-decoration: underline;}
.ͼ9o {font-style: italic;}
.ͼ9p {font-weight: bold;}
.ͼ9q {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼ9q .cm-matchingBracket, .ͼ9q .cm-nonmatchingBracket, .ͼ9q.cm-focused .cm-matchingBracket, .ͼ9q.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼ9q.cm-editor.cm-focused {outline: none;}
.ͼ9q .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼ9q .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼ9q .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼ9q .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼ9q .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼ9q .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼ9q .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼ9q .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼ9q .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼ6y {text-decoration: underline;}
.ͼ6z {font-style: italic;}
.ͼ70 {font-weight: bold;}
.ͼ71 {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼ71 .cm-matchingBracket, .ͼ71 .cm-nonmatchingBracket, .ͼ71.cm-focused .cm-matchingBracket, .ͼ71.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼ71.cm-editor.cm-focused {outline: none;}
.ͼ71 .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼ71 .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼ71 .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼ71 .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼ71 .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼ71 .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼ71 .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼ71 .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼ71 .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼ69 {text-decoration: underline;}
.ͼ6a {font-style: italic;}
.ͼ6b {font-weight: bold;}
.ͼ6c {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼ6c .cm-matchingBracket, .ͼ6c .cm-nonmatchingBracket, .ͼ6c.cm-focused .cm-matchingBracket, .ͼ6c.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼ6c.cm-editor.cm-focused {outline: none;}
.ͼ6c .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼ6c .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼ6c .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼ6c .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼ6c .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼ6c .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼ6c .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼ6c .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼ6c .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼ5w {text-decoration: underline;}
.ͼ5x {font-style: italic;}
.ͼ5y {font-weight: bold;}
.ͼ5z {background-color: var(--sp-colors-surface1); color: var(--sp-syntax-color-plain); height: 100%;}
.ͼ5z .cm-matchingBracket, .ͼ5z .cm-nonmatchingBracket, .ͼ5z.cm-focused .cm-matchingBracket, .ͼ5z.cm-focused .cm-nonmatchingBracket {color: inherit; background-color: rgba(128,128,128,.25); background-blend-mode: difference;}
.ͼ5z.cm-editor.cm-focused {outline: none;}
.ͼ5z .cm-activeLine {background-color: var(--sp-colors-surface3); border-radius: var(--sp-border-radius);}
.ͼ5z .cm-errorLine {background-color: var(--sp-colors-errorSurface); border-radius: var(--sp-border-radius);}
.ͼ5z .cm-content {caret-color: var(--sp-colors-accent); padding: 0 var(--sp-space-4);}
.ͼ5z .cm-scroller {font-family: var(--sp-font-mono); line-height: var(--sp-font-lineHeight);}
.ͼ5z .cm-gutters {background-color: var(--sp-colors-surface1); color: var(--sp-colors-disabled); border: none; padding-left: var(--sp-space-1);}
.ͼ5z .cm-gutter.cm-lineNumbers {font-size: .6em;}
.ͼ5z .cm-lineNumbers .cm-gutterElement {line-height: var(--sp-font-lineHeight); min-width: var(--sp-space-5);}
.ͼ5z .cm-content .cm-line {padding-left: var(--sp-space-1);}
.ͼ5z .cm-content.cm-readonly .cm-line {padding-left: 0;}
.ͼ4 {text-decoration: underline;}
.ͼ5 {text-decoration: underline; font-weight: bold;}
.ͼ6 {font-style: italic;}
.ͼ7 {font-weight: bold;}
.ͼ8 {text-decoration: line-through;}
.ͼ9 {color: #708;}
.ͼa {color: #219;}
.ͼb {color: #164;}
.ͼc {color: #a11;}
.ͼd {color: #e40;}
.ͼe {color: #00f;}
.ͼf {color: #30a;}
.ͼg {color: #085;}
.ͼh {color: #167;}
.ͼi {color: #256;}
.ͼj {color: #00c;}
.ͼk {color: #940;}
.ͼl {color: #7a757a;}
.ͼm {color: #f00;}
</style><title>Understanding useMemo and useCallback</title><meta name="description" content="What&#39;s the deal with these two hooks?! Lots of devs find them confusing, for a whole host of reasons. In this tutorial, we&#39;ll dig deep and understand what they do, why they&#39;re useful, and how to get the most out of them."><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta property="og:title" content="Understanding useMemo and useCallback"><meta property="og:description" content="What&#39;s the deal with these two hooks?! Lots of devs find them confusing, for a whole host of reasons. In this tutorial, we&#39;ll dig deep and understand what they do, why they&#39;re useful, and how to get the most out of them."><meta property="og:type" content="website"><meta property="og:image" content="https://www.joshwcomeau.com/images/og-usememo-and-usecallback.png"><meta property="og:image:alt" content="Banner for site, showing page title in a playful way"><meta property="og:image:width" content="1280"><meta property="og:image:height" content="675"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@joshwcomeau"><meta name="twitter:title" content="Understanding useMemo and useCallback"><meta name="twitter:description" content="What&#39;s the deal with these two hooks?! Lots of devs find them confusing, for a whole host of reasons. In this tutorial, we&#39;ll dig deep and understand what they do, why they&#39;re useful, and how to get the most out of them."><meta name="twitter:image" content="https://www.joshwcomeau.com/images/og-usememo-and-usecallback.png"><meta name="theme-color" content="hsl(204deg, 67%, 85%)"><link rel="icon" type="image/png" href="https://www.joshwcomeau.com/assets/favicon.png?v=4"><link rel="canonical" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/"><meta name="next-head-count" content="20"><style>
      html {
        --color-text: hsl(222deg, 22%, 5%);
        --color-background: hsl(0deg, 0%, 100%);
        --color-blurred-background: hsla(0deg, 0%, 100%, 0.85);
        --color-primary: hsl(245deg, 100%, 60%);
        --color-secondary: hsl(333deg, 100%, 45%);
        --color-tertiary: hsl(255deg, 85%, 30%);
        --color-decorative: hsl(200deg, 75%, 65%);
        --color-muted: hsl(210deg, 55%, 92%);
        --color-info: hsl(245deg, 100%, 60%);
        --color-success: hsl(160deg, 100%, 40%);
        --color-success-background: hsla(160deg, 100%, 40%, 0.1);
        --color-error: hsl(340deg, 95%, 50%);
        --color-error-background: hsla(340deg, 95%, 43%, 0.1);
        --color-alert: hsl(37deg, 100%, 50%);
        --color-alert-background: hsla(52deg, 100%, 50%, 0.25);
        --color-subtle-background: hsl(225deg, 25%, 95%);
        --color-subtle-floating: hsl(0deg, 0%, 100%);
        --color-homepage-light: hsl(204deg, 67%, 85%);
        --color-homepage-dark: hsl(202deg, 71%, 90%);
        --color-homepage-bg: hsl(204deg, 67%, 85%);
        --color-gray-100: hsl(225deg, 25%, 95%);
        --color-gray-200: hsl(225deg, 16%, 90%);
        --color-gray-300: hsl(225deg, 8%, 80%);
        --color-gray-400: hsl(225deg, 8%, 70%);
        --color-gray-500: hsl(225deg, 7%, 60%);
        --color-gray-600: hsl(225deg, 15%, 50%);
        --color-gray-700: hsl(225deg, 12%, 40%);
        --color-gray-900: hsl(225deg, 25%, 20%);
        --color-gray-1000: hsl(225deg, 15%, 15%);
      }
    </style><style>
@font-face {
  font-family: 'Wotfard-fallback';
  src: local(Verdana);
  size-adjust: 90%;
  ascent-override: 93%;
  descent-override: 18%;
  line-gap-override: normal;
}

@font-face {
  font-family: 'Wotfard';
  src: url('/fonts/wotfard/wotfard-semibold-webfont.woff2')
      format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: fallback;
}

@font-face {
  font-family: 'Wotfard';
  src: url('/fonts/wotfard/wotfard-medium-webfont.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: fallback;
}

@font-face {
  font-family: 'Wotfard';
  src: url('/fonts/wotfard/wotfard-regular-webfont.woff2')
      format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: fallback;
}

@font-face {
  font-family: 'League Mono';
  src: url('/fonts/league-mono/LeagueMono-Regular.woff2')
    format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'League Mono';
  src: url('/fonts/league-mono/LeagueMono-SemiBold.woff2')
    format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'League Mono';
  src: url('/fonts/league-mono/LeagueMono-Bold.woff2') format('woff2');
  font-weight: 600;
  font-style: normal;
  font-display: fallback;
}
</style><link rel="preload" href="./Understanding useMemo and useCallback_files/b464091f97cce002.css" as="style"><link rel="stylesheet" href="./Understanding useMemo and useCallback_files/b464091f97cce002.css" data-n-g=""><link rel="preload" href="./Understanding useMemo and useCallback_files/cb9d5baaf1862e08.css" as="style"><link rel="stylesheet" href="./Understanding useMemo and useCallback_files/cb9d5baaf1862e08.css" data-n-p=""><noscript data-n-css=""></noscript><script defer="" nomodule="" src="./Understanding useMemo and useCallback_files/polyfills-c67a75d1b6f99dc8.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/f0e45107-150ce001be48a7d6.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/3841-1ff94451ec11b87d.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/8764-0c68f410b667140b.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/1588-ea91a29b42ef4796.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/8364.3d784519a367be1c.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/4ad82c5e.04063d31fdddbe48.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/9078.831b9002fd6a5b2d.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/7222.319eeeb220eb4e8e.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/1013.34e0e61544f08e72.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/5380.adaccccc1c0986fa.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/6503.0a13d508bd504579.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/5527.7abab686f5678b85.js.download"></script><script defer="" src="./Understanding useMemo and useCallback_files/6150.6cac3d177349752f.js.download"></script><script src="./Understanding useMemo and useCallback_files/webpack-a7fb1997cc796252.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/framework-635f4251d9a94b4c.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/main-c13f14acd696cab9.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/_app-70b2d5f142048426.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/210-abe024854903a2b3.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/5906-77d933438c126c1c.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/9335-a0333dbad7187d95.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/7083-0a928a8c61884244.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/1924-8ff574cf3b7fea68.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/3004-de03068af9ab125c.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/3228-eb9bc553678dc968.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/2750-ffc9221e21525bfa.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/788-e014b432eb4c98d0.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/8276-7f0abd07feba9af5.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/1305-eb47bf51ec8d4c8b.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/159-763978bf07a2ad7e.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/1499-6008275e096c3d1c.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/4147-35eb0b3eeecc2108.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/3161-27a83bee8dc6dfef.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/[contentSlug]-014184a0e60de9c2.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/_buildManifest.js.download" defer=""></script><script src="./Understanding useMemo and useCallback_files/_ssgManifest.js.download" defer=""></script><style data-styled="active" data-styled-version="6.0.7"></style><style></style><script src="./Understanding useMemo and useCallback_files/404" defer="" data-sdkn="@vercel/analytics" data-sdkv="1.0.0"></script><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/489-2d3c904f874dc073.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/index-16fd1f29108d3e1e.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/760-08370d8a9ce4903f.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/latest-84926f2f47d969ac.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/tutorials-ba859b651ceaf956.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/goodies-931aaf9457b2bd2e.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/courses-332ad79953dca43f.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/[categorySlug]-1e69a2ee35dc6db6.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/terms-b937a11369689e2a.js.download"><link as="script" rel="prefetch" href="./Understanding useMemo and useCallback_files/privacy-fe994c97fd616a8f.js.download"></head><body style=""><script id="theme-hydration">!function(){const e=window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("prefers-dark");let s;s="string"==typeof t?"true"===t:e,function(e){let t=document.documentElement;t.setAttribute("data-color-mode",e?"dark":"light"),t.style.setProperty("--color-text",e?"hsl(0deg, 0%, 100%)":"hsl(222deg, 22%, 5%)"),t.style.setProperty("--color-background",e?"hsl(210deg, 30%, 8%)":"hsl(0deg, 0%, 100%)"),t.style.setProperty("--color-blurred-background",e?"hsla(210deg, 30%, 8%, 0.85)":"hsla(0deg, 0%, 100%, 0.85)"),t.style.setProperty("--color-primary",e?"hsl(230deg, 100%, 69%)":"hsl(245deg, 100%, 60%)"),t.style.setProperty("--color-secondary",e?"hsl(333deg, 100%, 52%)":"hsl(333deg, 100%, 45%)"),t.style.setProperty("--color-tertiary",e?"hsl(53deg, 100%, 50%)":"hsl(255deg, 85%, 30%)"),t.style.setProperty("--color-decorative",e?"hsl(200deg, 50%, 60%)":"hsl(200deg, 75%, 65%)"),t.style.setProperty("--color-muted",e?"hsl(210deg, 38%, 15%)":"hsl(210deg, 55%, 92%)"),t.style.setProperty("--color-muted-background",e?"hsla(210deg, 38%, 15%, 0.85)":"hsla(210deg, 55%, 92%, 0.85)"),t.style.setProperty("--color-info",e?"hsl(230deg, 100%, 69%)":"hsl(245deg, 100%, 60%)"),t.style.setProperty("--color-success","hsl(160deg, 100%, 40%)"),t.style.setProperty("--color-success-background","hsla(160deg, 100%, 40%, 0.1)"),t.style.setProperty("--color-error",e?"hsl(340deg, 95%, 60%)":"hsl(340deg, 95%, 50%)"),t.style.setProperty("--color-error-background","hsla(340deg, 95%, 43%, 0.1)"),t.style.setProperty("--color-alert",e?"hsl(30deg, 100%, 50%)":"hsl(37deg, 100%, 50%)"),t.style.setProperty("--color-alert-background",e?"hsl(40deg 13% 13%)":"hsla(52deg, 100%, 50%, 0.25)"),t.style.setProperty("--color-venn-0",e?"hsl(250deg, 100%, 50%)":"hsl(190deg, 100%, 65%)"),t.style.setProperty("--color-venn-1",e?"hsl(175deg, 100%, 50%)":"hsl(340deg, 100%, 65%)"),t.style.setProperty("--color-gray-100",e?"hsl(210deg, 15%, 20%)":"hsl(225deg, 25%, 95%)"),t.style.setProperty("--color-gray-200",e?"hsl(210deg, 15%, 25%)":"hsl(225deg, 16%, 90%)"),t.style.setProperty("--color-gray-300",e?"hsl(210deg, 10%, 40%)":"hsl(225deg, 8%, 80%)"),t.style.setProperty("--color-gray-400",e?"hsl(210deg, 9%, 45%)":"hsl(225deg, 8%, 70%)"),t.style.setProperty("--color-gray-500",e?"hsl(210deg, 8%, 50%)":"hsl(225deg, 7%, 60%)"),t.style.setProperty("--color-gray-600",e?"hsl(210deg, 12%, 55%)":"hsl(225deg, 15%, 50%)"),t.style.setProperty("--color-gray-700",e?"hsl(210deg, 14%, 66%)":"hsl(225deg, 12%, 40%)"),t.style.setProperty("--color-gray-900",e?"hsl(210deg, 25%, 88%)":"hsl(225deg, 25%, 20%)"),t.style.setProperty("--color-gray-1000",e?"hsl(210deg, 25%, 96%)":"hsl(225deg, 15%, 15%)"),t.style.setProperty("--color-subtle-background",e?"hsl(210deg, 30%, 8%)":"hsl(225deg, 25%, 95%)"),t.style.setProperty("--color-subtle-floating",e?"hsl(210deg, 22%, 15%)":"hsl(0deg, 0%, 100%)"),t.style.setProperty("--color-homepage-light",e?"hsla(200deg, 100%, 85%, 0)":"hsl(204deg, 67%, 85%)"),t.style.setProperty("--color-homepage-dark",e?"hsla(200deg, 100%, 85%, 0.1)":"hsl(202deg, 71%, 90%)"),t.style.setProperty("--color-homepage-bg",e?"hsl(210deg, 30%, 8%)":"hsl(204deg, 67%, 85%)"),t.style.setProperty("--syntax-bg",e?"hsl(210deg, 30%, 12%)":"hsl(225deg, 25%, 97%)"),t.style.setProperty("--syntax-highlight",e?"hsl(210deg, 30%, 18%)":"hsl(225deg, 25%, 93%)"),t.style.setProperty("--syntax-txt",e?"#FFF":"#2A2A2A"),t.style.setProperty("--syntax-comment",e?"#6c8998":"#467790"),t.style.setProperty("--syntax-prop",e?"#FF39A8":"#da0079"),t.style.setProperty("--syntax-bool",e?"#FFD600":"#bf00b8"),t.style.setProperty("--syntax-val",e?"#718e9c":"#78909C"),t.style.setProperty("--syntax-str",e?"rgb(155, 109, 255)":"#651fff"),t.style.setProperty("--syntax-name",e?"#C653FF":"#AA00FF"),t.style.setProperty("--syntax-del",e?"#FF5555":"rgb(255, 85, 85)"),t.style.setProperty("--syntax-regex",e?"#ffd700":"#3600d6"),t.style.setProperty("--syntax-fn",e?"rgb(0, 190, 255)":"#3D5AFE"),t.style.setProperty("--prefers-dark",e)}(s)}();</script><div id="mobile-nav-portal"><button aria-label="Open menu" class="sc-ac600c13-0 sc-75515e8b-0 gEahXK ctdliI" style="top: 12px;"><svg xmlns="http://www.w3.org/2000/svg" class="sc-4bf843d9-0 fqMyzF" style="width: 32px; height: 32px; transform: rotate(0deg);"><line x1="4.8" y1="9.6" x2="27.2" y2="9.6" stroke="var(--color-text)" stroke-width="3" stroke-linecap="round"></line><line x1="27.2" y1="22.4" x2="4.8" y2="22.4" stroke="var(--color-text)" stroke-width="3" stroke-linecap="round"></line></svg><div class="sc-c473a104-0 jSpzMq">Toggle mobile menu</div></button><div class="sc-75515e8b-1 iJUthk" style="pointer-events: none;"><button aria-hidden="true" tabindex="-1" class="sc-ac600c13-0 sc-75515e8b-2 gEahXK enNVeA" style="opacity: 0; touch-action: auto;"></button><nav aria-label="mobile navigation" class="sc-75515e8b-3 chNzNk"><div class="sc-75515e8b-6 dRlNcg"><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 clHoQm" href="https://www.joshwcomeau.com/latest/">Latest </a></div><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 clHoQm" href="https://www.joshwcomeau.com/tutorials/">Tutorials </a></div><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 sc-75515e8b-5 clHoQm cHhjhX" href="https://www.joshwcomeau.com/tutorials/react/">React </a></div><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 sc-75515e8b-5 clHoQm cHhjhX" href="https://www.joshwcomeau.com/tutorials/animation/">Animation </a></div><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 sc-75515e8b-5 clHoQm cHhjhX" href="https://www.joshwcomeau.com/tutorials/css/">CSS </a></div><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 clHoQm" href="https://www.joshwcomeau.com/goodies/">Goodies </a></div><div style="transform: translateX(-100%);"><a tabindex="-1" class="sc-b666cce7-0 ihtLEh sc-75515e8b-4 clHoQm" href="https://www.joshwcomeau.com/courses/">Courses </a></div></div><div class="sc-75515e8b-7 hOPCIS" style="opacity: 0; transition: opacity 250ms ease 0ms;"><button aria-label="Activate dark mode" title="Activate dark mode" tabindex="-1" class="sc-ac600c13-0 sc-a794b73f-0 gEahXK jLiZPl"><svg width="18" height="18" viewBox="0 0 18 18" class="sc-a794b73f-1 cTsuKR" style="transform: rotate(90deg);"><mask id="moon-mask-mobile-nav"><rect x="0" y="0" width="18" height="18" fill="#FFF"></rect><circle cx="25" cy="0" r="8" fill="black"></circle></mask><circle cx="9" cy="9" fill="var(--color-text)" mask="url(#moon-mask-mobile-nav)" r="5"></circle><g><circle cx="17" cy="9" r="1.5" fill="var(--color-text)" style="transform-origin: center center; transform: scale(1);"></circle><circle cx="13" cy="15.928203" r="1.5" fill="var(--color-text)" style="transform-origin: center center; transform: scale(1);"></circle><circle cx="5" cy="15.928203" r="1.5" fill="var(--color-text)" style="transform-origin: center center; transform: scale(1);"></circle><circle cx="1" cy="9" r="1.5" fill="var(--color-text)" style="transform-origin: center center; transform: scale(1);"></circle><circle cx="5" cy="2.071797" r="1.5" fill="var(--color-text)" style="transform-origin: center center; transform: scale(1);"></circle><circle cx="13" cy="2.071797" r="1.5" fill="var(--color-text)" style="transform-origin: center center; transform: scale(1);"></circle></g></svg></button><div size="30" class="sc-49562803-0 jjCrhx"></div><button aria-label="Disable sounds" title="Disable sounds" tabindex="-1" class="sc-ac600c13-0 sc-71fcd3d-0 gEahXK jxaUVy"><svg width="22" height="22" viewBox="0 0 18 18" fill="none"><path d="M8.25 3.75L4.5 6.75H1.5V11.25H4.5L8.25 14.25V3.75Z" stroke-linecap="round" stroke-linejoin="round" class="sc-71fcd3d-1 sc-71fcd3d-2 ifSwmJ SCBGw"></path><path d="
            M14.3025 3.69751
            C15.7086 5.10397 16.4984 7.01128 16.4984 9.00001
            C16.4984 10.9887 15.7086 12.8961 14.3025 14.3025
          " stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-71fcd3d-1 ifSwmJ" style="opacity: 1; transition-delay: 150ms;"></path><path d="
            M11.655 6.34501
            C12.358 7.04824 12.753 8.00189 12.753 8.99626
            C12.753 9.99063 12.358 10.9443 11.655 11.6475
          " stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-71fcd3d-1 ifSwmJ" style="opacity: 1; transition-delay: 0ms;"></path></svg></button></div></nav></div></div><div id="nav-tooltip-portal"></div><div id="__next"><div class="sc-89b6d0c1-0 httGPC"><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#jwc-skip-here" class="sc-43cbc003-0 idhydc">Skip to content</a><div class="sc-89b6d0c1-1 gdatbI"><div class="sc-e0ca57dd-0 gUHgKT"><header class="sc-2c134d26-0 kPkbSa"><div class="sc-2c134d26-2 ixQGVA"><a class="sc-b666cce7-0 ihtLEh sc-d715942d-0 bUIVYy sc-2c134d26-3 lbzVOb" href="https://www.joshwcomeau.com/"><span class="sc-d715942d-1 jKGTyj">Josh</span><span class="sc-d715942d-6 hewhBw"><svg width="14" height="12" viewBox="0 0 14 12" fill="none" class="sc-d715942d-4 dpcFpq"><path d="M1.83685 4.19021C2.50472 5.35898 3.23081 6.5572 3.80331 7.77375C4.05248 8.30325 4.35843 9.36185 4.81149 9.75018C5.73454 10.5414 6.29678 10.273 6.76796 9.06143C7.13194 8.12547 7.20283 7.08915 7.54655 6.12672C7.91111 5.10596 9.23909 6.70274 9.78252 7.06503C10.3171 7.42139 13.574 9.528 12.8869 7.60406C12.6687 6.99301 12.6107 6.33922 12.4777 5.70748C12.3451 5.07774 12.1099 4.28137 12.0784 3.65119C12.0399 2.88207 11.719 2.12838 11.719 1.3154" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-d715942d-5 iHfhhp"></path></svg><svg width="9" height="10" viewBox="0 0 9 10" fill="none" class="sc-d715942d-3 imCMJV"><path d="M1 9C2.23995 7.12464 3.87268 5.18927 4.17593 2.59926C4.22017 2.22137 4.11111 0.731563 4.11111 1.04233C4.11111 1.49132 4.41831 2.03152 4.55761 2.40705C4.98522 3.55977 5.31447 4.69324 5.92593 5.70352C6.43274 6.54092 7.08081 7.96204 8 7.96204" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-d715942d-5 iHfhhp"></path></svg><span class="sc-d715942d-7 bXobgp">W</span></span><span class="sc-d715942d-2 cbeiEI">Comeau</span></a><nav class="sc-2d4a6427-0 jpzrse sc-2c134d26-1 bYbfMF" aria-label="desktop navigation"><ul class="sc-2d4a6427-1 cMOwJi"><li class="sc-2d4a6427-2 dSaRLq"><div class="sc-d258fa7c-0 cAmeiq"><a style="font-weight:var(--font-weight-normal)" class="sc-b666cce7-0 ihtLEh sc-d258fa7c-1 gRfoaH" href="https://www.joshwcomeau.com/latest/">Latest</a></div></li><li class="sc-2d4a6427-2 dSaRLq"><div class="sc-d258fa7c-0 cAmeiq"><a id="before-child-nav" style="font-weight:var(--font-weight-normal)" class="sc-b666cce7-0 ihtLEh sc-d258fa7c-1 gRfoaH" href="https://www.joshwcomeau.com/tutorials/">Posts</a><button aria-label="View sub-navigation items" class="sc-ac600c13-0 sc-d258fa7c-2 gEahXK jtUFcM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg><span class="sc-d258fa7c-3 kaHjl"></span></button></div></li><li class="sc-2d4a6427-2 dSaRLq"><div class="sc-d258fa7c-0 cAmeiq"><a style="font-weight:var(--font-weight-normal)" class="sc-b666cce7-0 ihtLEh sc-d258fa7c-1 gRfoaH" href="https://www.joshwcomeau.com/goodies/">Goodies</a></div></li><li class="sc-2d4a6427-2 dSaRLq"><div class="sc-d258fa7c-0 cAmeiq"><a id="after-child-nav" style="font-weight:var(--font-weight-normal)" class="sc-b666cce7-0 ihtLEh sc-d258fa7c-1 gRfoaH" href="https://www.joshwcomeau.com/courses/">Courses</a></div></li></ul></nav></div><div class="sc-2c134d26-4 kbDQGc"><div class="sc-2c134d26-5 kChbVY"><button aria-label="Activate dark mode" title="Activate dark mode" class="sc-ac600c13-0 sc-a794b73f-0 gEahXK jLiZPl"><svg width="18" height="18" viewBox="0 0 18 18" style="transform:rotate(90deg)" class="sc-a794b73f-1 cTsuKR"><mask id="moon-mask-main-nav"><rect x="0" y="0" width="18" height="18" fill="#FFF"></rect><circle cx="25" cy="0" r="8" fill="black"></circle></mask><circle cx="9" cy="9" fill="var(--color-text)" mask="url(#moon-mask-main-nav)" r="5"></circle><g><circle cx="17" cy="9" r="1.5" fill="var(--color-text)" style="transform-origin:center center;transform:scale(1)"></circle><circle cx="13" cy="15.928203" r="1.5" fill="var(--color-text)" style="transform-origin:center center;transform:scale(1)"></circle><circle cx="5" cy="15.928203" r="1.5" fill="var(--color-text)" style="transform-origin:center center;transform:scale(1)"></circle><circle cx="1" cy="9" r="1.5" fill="var(--color-text)" style="transform-origin:center center;transform:scale(1)"></circle><circle cx="5" cy="2.071797" r="1.5" fill="var(--color-text)" style="transform-origin:center center;transform:scale(1)"></circle><circle cx="13" cy="2.071797" r="1.5" fill="var(--color-text)" style="transform-origin:center center;transform:scale(1)"></circle></g></svg></button><div size="18" class="sc-49562803-0 jjEuiZ"></div><button aria-label="Disable sounds" title="Disable sounds" class="sc-ac600c13-0 sc-71fcd3d-0 gEahXK jxaUVy"><svg width="22" height="22" viewBox="0 0 18 18" fill="none"><path d="M8.25 3.75L4.5 6.75H1.5V11.25H4.5L8.25 14.25V3.75Z" stroke-linecap="round" stroke-linejoin="round" class="sc-71fcd3d-1 sc-71fcd3d-2 ifSwmJ jcYpD"></path><path d="
            M14.3025 3.69751
            C15.7086 5.10397 16.4984 7.01128 16.4984 9.00001
            C16.4984 10.9887 15.7086 12.8961 14.3025 14.3025
          " stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 1; transition-delay: 150ms;" class="sc-71fcd3d-1 ifSwmJ"></path><path d="
            M11.655 6.34501
            C12.358 7.04824 12.753 8.00189 12.753 8.99626
            C12.753 9.99063 12.358 10.9443 11.655 11.6475
          " stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="opacity: 1; transition-delay: 0ms;" class="sc-71fcd3d-1 ifSwmJ"></path></svg></button><div class="sc-2c134d26-7 jPbUWB"><div size="18" class="sc-49562803-0 jjEuiZ"></div><a href="https://www.joshwcomeau.com/rss.xml" target="_blank" rel="noopener noreferrer" aria-labelledby="rss-title" class="sc-b7cbcce6-0 glmeeP"><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-b7cbcce6-1 gJbNlQ"><title id="rss-title">RSS Feed</title><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></div></div></div><div class="sc-2c134d26-6 jImgRJ"></div></header></div></div><div class="sc-89b6d0c1-3 ecmbJs"><div class="sc-89b6d0c1-4 bYxaQV"></div><div class="sc-89b6d0c1-5 gCOqJM"></div><div class="sc-da11c150-1 hPpOpY"><div class="sc-e0ca57dd-0 gUHgKT"><div class="sc-7a9d79d2-0 zVdmn"><a class="sc-b666cce7-0 ihtLEh sc-7a9d79d2-2 iWMmVB" href="https://www.joshwcomeau.com/">Home</a><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-7a9d79d2-1 gHFwDd"><polyline points="9 18 15 12 9 6"></polyline></svg><a class="sc-b666cce7-0 ihtLEh sc-7a9d79d2-2 iWMmVB" href="https://www.joshwcomeau.com/tutorials/">Tutorials</a><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-7a9d79d2-1 gHFwDd"><polyline points="9 18 15 12 9 6"></polyline></svg><a class="sc-b666cce7-0 ihtLEh sc-7a9d79d2-2 iWMmVB" href="https://www.joshwcomeau.com/tutorials/react/">React</a></div><h1 class="sc-487e4335-3 hahoEN sc-da11c150-2 iHepQk">Understanding useMemo and useCallback</h1><span class="sc-da11c150-3 MTyse">A roadtrip through two of React's most notorious hooks</span></div></div></div><div class="sc-89b6d0c1-6 bAyZNu"></div><main class="sc-89b6d0c1-7 dEdFyB"><div id="jwc-skip-here" class="sc-43cbc003-1 hzvNtv"></div><div class="sc-e0ca57dd-0 sc-da11c150-4 gUHgKT gPFwMQ"><aside class="sc-da11c150-6 ceaZBR"><nav class="sc-84dc8578-0 fJlZUH"><h2 class="sc-487e4335-0 fFnbgo sc-84dc8578-1 lfHyED">Table of Contents</h2><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#introduction" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">Introduction</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#the-basic-idea-1" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">The basic idea</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#use-case-one-heavy-computations-2" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">Use case 1: Heavy computations</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#an-alternative-approach-3" style="margin-top: 4px; --font-size-px: 14; padding-left: 12px; color: var(--color-primary); opacity: 1;" class="sc-84dc8578-2 gHDwwt">An alternative approach</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#use-case-two-preserved-references-4" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">Use case 2: Preserved references</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#the-usecallback-hook-5" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">The useCallback hook</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#when-to-use-these-hooks-6" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">When to use these hooks</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#inside-generic-custom-hooks-7" style="margin-top: 4px; --font-size-px: 14; padding-left: 12px;" class="sc-84dc8578-2 gHDwwt">Inside generic custom hooks</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#inside-context-providers-8" style="margin-top: 4px; --font-size-px: 14; padding-left: 12px;" class="sc-84dc8578-2 gHDwwt">Inside context providers</a><a href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#the-joy-of-react-9" style="margin-top: 12px; --font-size-px: 15;" class="sc-84dc8578-2 gHDwwt">The Joy of React</a></nav><div class="sc-da11c150-7 iQjCvt"><div class="sc-7f7027cf-0 gzXPAP"><div class="sc-1ace6e33-0 eXpyJ" style="width: 48px; height: 48px;"></div><button class="sc-ac600c13-0 gEahXK" style="transform: scale(1); transition: transform 250ms ease 0s;"><div class="sc-c473a104-0 jSpzMq">"Like" this post</div><svg width="48" height="40.32" viewBox="0 0 50 42" fill="none" style="transform: rotate(0deg);"><defs><lineargradient id="active-gradient-dojf" x1="25" y1="42" x2="26.3796" y2="0.0453673" gradientUnits="userSpaceOnUse"><stop stop-color="hsl(353deg, 100%, 52%)"></stop><stop offset="1" stop-color="hsl(313deg, 100%, 52%)"></stop></lineargradient><lineargradient id="inactive-gradient-dojf" x1="15" y1="41" x2="42" y2="-1.5" gradientUnits="userSpaceOnUse"><stop stop-color="#666" stop-opacity="0.4"></stop><stop offset="1" stop-color="#AAA" stop-opacity="0.4"></stop></lineargradient></defs><mask id="like-button-mask-dojf" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="50" height="42"><path d="M13.2537 0.0255029C23.4033 0.0255029 25.0273 10.5191 25.0273 10.5191C25.0273 10.5191 26.6512 -0.60088 37.6129 0.0255029C44.3441 0.410148 48.7484 6.32169 48.9804 12.1981C49.7924 32.7656 28.7678 41.5 25.0273 41.5C21.2868 41.5 -0.549833 32.3459 1.07416 12.1981C1.54782 6.32169 6.29929 0.0255029 13.2537 0.0255029Z" fill="#000000"></path></mask><mask id="active-gradient-mask-dojf" mask-type="alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="50" height="42"><polygon points="
                0,42
                50,42
                50,42
                0,42
              " fill="#000000"></polygon></mask><g mask="url(#like-button-mask-dojf)"><path d="M13.2537 0.0255029C23.4033 0.0255029 25.0273 10.5191 25.0273 10.5191C25.0273 10.5191 26.6512 -0.60088 37.6129 0.0255029C44.3441 0.410148 48.7484 6.32169 48.9804 12.1981C49.7924 32.7656 28.7678 41.5 25.0273 41.5C21.2868 41.5 -0.549833 32.3459 1.07416 12.1981C1.54782 6.32169 6.29929 0.0255029 13.2537 0.0255029Z" fill="url(#inactive-gradient-dojf)"></path><g mask="url(#active-gradient-mask-dojf)"><path d="M13.2537 0.0255029C23.4033 0.0255029 25.0273 10.5191 25.0273 10.5191C25.0273 10.5191 26.6512 -0.60088 37.6129 0.0255029C44.3441 0.410148 48.7484 6.32169 48.9804 12.1981C49.7924 32.7656 28.7678 41.5 25.0273 41.5C21.2868 41.5 -0.549833 32.3459 1.07416 12.1981C1.54782 6.32169 6.29929 0.0255029 13.2537 0.0255029Z" fill="url(#active-gradient-dojf)"></path></g><g style="opacity: 1; transform: translate(0px, 0px);"><circle cx="15" cy="22" r="2" fill="#000000" fill-opacity="0.4"></circle><circle cx="35" cy="22" r="2" fill="#000000" fill-opacity="0.4"></circle></g><g style="opacity: 0;"><path d="M 13 23 Q 15 19, 17 23 " stroke="#000000" stroke-opacity="0.4" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path><path d="M 33 23 Q 35 19, 37 23 " stroke="#000000" stroke-opacity="0.4" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></g><g><mask id="tongue-mask" mask-type="alpha" maskUnits="userSpaceOnUse" x="20" y="27" width="11" height="6"><path d="M28.3333 27H21.6666C21.6666 27 20.0001 27 20 29C19.9999 31 22.3875 33 25 33C27.6125 33 30 31 30 29C30 27 28.3333 27 28.3333 27Z" fill="#000000" fill-opacity="0.4"></path></mask><g mask="url(#tongue-mask)" style="opacity: 0;"><path d="M28.3333 27H21.6666C21.6666 27 20.0001 27 20 29C19.9999 31 22.3875 33 25 33C27.6125 33 30 31 30 29C30 27 28.3333 27 28.3333 27Z" fill="#000000" fill-opacity="1"></path><circle cx="25" cy="35" r="5" fill="#DB2C49" fill-opacity="0.5"></circle></g><path d="
            M 20 30
            Q 25 33.6 30 30
          " stroke="#000000" stroke-opacity="0.4" stroke-linecap="round" style="opacity: 1;"></path></g><g><path d="M53.5 18.5L47 5C47 5 53.5 31.9722 24.5 36C-4.5 40.0278 1 1.5 1 1.5L-6.5 25L8.00002 44.5L15.5 52L39 49L53.5 18.5Z" fill="black" fill-opacity="0.1"></path><path d="M6.14471 8.44525C6.64924 7.12038 7.41962 5.99208 8.36394 5.15003C9.30652 4.30953 10.3901 3.78182 11.5089 3.58622" stroke="white" stroke-opacity="0.45" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path><path d="M31.7084 5.95975C32.7822 4.70067 34.1021 3.81419 35.484 3.37609" stroke="white" stroke-opacity="0.45" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></g></g></svg></button><div class="sc-63f7e52d-0 kJOUqL"><span class="sc-63f7e52d-1 cKMAhl">47093<div class="sc-63f7e52d-2 ttUKp"><div class="sc-63f7e52d-3 jPRoCq" style="transform: translateY(-12px); opacity: 0;"></div></div></span></div></div></div></aside><article data-layout="tutorial" class="sc-da11c150-5 cMqNNm"><a id="introduction" style="scroll-margin-top:118px"><h2 style="height:1px;opacity:0;overflow:hidden;user-select:none;pointer-events:none">Introduction</h2></a><p class="sc-e646da6e-0 ddhZIx">If you've struggled to make sense of <code class="sc-1a723291-0 hSlZWR">useMemo</code> and <code class="sc-1a723291-0 hSlZWR">useCallback</code>, you're not alone! I've spoken with <em class="sc-51e913c7-0 bqvtGV">so many</em> React devs who have been scratching their heads about these two hooks.</p><p class="sc-e646da6e-0 ddhZIx">My goal in this blog post is to clear up all of this confusion. We'll learn what they do, why they're useful, and how to get the most out of them.</p><p class="sc-e646da6e-0 ddhZIx">Let's go!</p><aside class="sc-7447ca5f-0 sc-7447ca5f-1 fiBCHf epenG"><div class="sc-7447ca5f-5 hqfDOf"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><strong class="sc-7447ca5f-4 dktsaa">Intended audience</strong><div class="sc-7447ca5f-6 htjLEx"><p class="sc-e646da6e-0 ddhZIx">This tutorial is written to help beginner/intermediate React developers get more comfortable with React. If you're taking your very first steps with React, you might wish to bookmark this one and come back to it in a few weeks!</p></div></aside><div id="the-basic-idea" class="sc-89a92fe2-0 ksGsFy"><h2 style="position:relative" class="sc-487e4335-4 SHCsL"><a name="the-basic-idea-1" id="the-basic-idea-1" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#the-basic-idea-1" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>The basic idea</h2></div><p class="sc-e646da6e-0 ddhZIx">Alright, so let's start with <code class="sc-1a723291-0 hSlZWR">useMemo</code>.</p><p class="sc-e646da6e-0 ddhZIx">The fundamental idea with <code class="sc-1a723291-0 hSlZWR">useMemo</code> is that it allows us to <em class="sc-51e913c7-0 bqvtGV">“remember”</em> a computed value between renders.</p><p class="sc-e646da6e-0 ddhZIx">This definition requires some unpacking. In fact, it requires a pretty sophisticated mental model of how React works! So let's address that first.</p><p class="sc-e646da6e-0 ddhZIx">The main thing that React does is keep our UI in sync with our application state. The tool that it uses to do this is called a “re-render”.</p><p class="sc-e646da6e-0 ddhZIx">Each re-render is a snapshot of what the application's UI should look like at a given moment in time, based on the current application state. We can think of it like a stack of photographs, each one capturing how things looked given a specific value for every state variable.</p><!--$--><div class="sc-aae9bd77-0 jDdIYk"><div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">Each “re-render” produces a mental picture of what the DOM should look like, based on the current state. In the little demo above, it's pictured as HTML, but in reality it's a bunch of JS objects. This is sometimes called the <em class="sc-51e913c7-0 bqvtGV">“virtual DOM”</em>, if you've heard that term.</p><p class="sc-e646da6e-0 ddhZIx">We don't directly tell React which DOM nodes need to change. Instead, we tell React what the UI <em>should be</em> based on the current state. By re-rendering, React creates a new snapshot, and it can figure out what needs to change by comparing snapshots, like playing a “find the differences” game.</p><aside class="sc-7447ca5f-0 sc-7447ca5f-1 fiBCHf epenG"><div class="sc-7447ca5f-5 hqfDOf"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><strong class="sc-7447ca5f-4 dktsaa">Wait, what?</strong><div class="sc-7447ca5f-6 htjLEx"><p class="sc-e646da6e-0 ddhZIx">I recently published a blog post that explains what a “re-render” is, and why they occur. If you're feeling a bit lost, it might help to read that blog post first, and then come back to this one!</p><ul style="margin-bottom:0" class="sc-19724b12-1 dvUyoz"><li class="sc-19724b12-3 eSCGZL"><span style="transform:translateY(5px)" class="sc-19724b12-5 ivSWjC"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div class="sc-19724b12-4 hGMcnl"><a class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN" href="https://www.joshwcomeau.com/react/why-react-re-renders/">“Why React Re-Renders”</a></div></li></ul></div></aside><p class="sc-e646da6e-0 ddhZIx">React is heavily optimized out of the box, and so <em class="sc-51e913c7-0 bqvtGV">in general</em>, re-renders aren't a big deal. But, in certain situations, these snapshots <em>do</em> take a while to create. This can lead to performance problems, like the UI not updating quickly enough after the user performs an action.</p><p class="sc-e646da6e-0 ddhZIx">Fundamentally, <code class="sc-1a723291-0 hSlZWR">useMemo</code> and <code class="sc-1a723291-0 hSlZWR">useCallback</code> are tools built to help us optimize re-renders. They do this in two ways:</p><ol class="sc-19724b12-2 kUMkgA"><li class="sc-19724b12-3 eSCGZL"><div class="sc-19724b12-4 hGMcnl">Reducing the amount of work that needs to be done in a given render.</div></li><li class="sc-19724b12-3 eSCGZL"><div class="sc-19724b12-4 hGMcnl">Reducing the number of times that a component needs to re-render.</div></li></ol><p class="sc-e646da6e-0 ddhZIx">Let's talk about these strategies, one at a time.</p><div id="use-case-one-heavy-computations" class="sc-89a92fe2-0 ksGsFy"><h2 style="position:relative" class="sc-487e4335-4 SHCsL"><a name="use-case-one-heavy-computations-2" id="use-case-one-heavy-computations-2" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#use-case-one-heavy-computations-2" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>Use case 1: Heavy computations</h2></div><p class="sc-e646da6e-0 ddhZIx">Let's suppose we're building a tool to help users find all of the prime numbers between 0 and <code class="sc-1a723291-0 hSlZWR">selectedNum</code>, where <code class="sc-1a723291-0 hSlZWR">selectedNum</code> is a user-supplied value. A prime number is a number that can only be divided by 1 and itself, like 17.</p><p class="sc-e646da6e-0 ddhZIx">Here's one possible implementation:</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="prime-number-initial" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-63873f59-0 fOfHwg iXthYV"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW" style="transform: scale(1); opacity: 0.7;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div class="sc-ef2d918d-1 ehlMox" style="top: -6px;"><div class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx" style="opacity: 0;"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" class="sc-477a4b02-1 jsWuH" style="height: 4px; background: transparent;"><div class="sc-477a4b02-2 dWkRDI" style="background: linear-gradient(90deg, rgb(255, 26, 129), rgb(187, 0, 230), rgb(68, 51, 255)); clip-path: polygon(0% 0%, 0% 0%, 0% 100%, 0% 100%);"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform: scaleY(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADokZYAK4keEUi3RoAFAEoWwGSxYB6QywDqMFgAsiUACYsyli_LgxGQuC1eweMeyXlaACM3FggSLzJOCkx9FmISOFYAbW8YX1sAOUCAGi8YMgBlGB8KLMCAXRYAXnYxMkwXGEKoig0ARgAGTq1pWQijE3N4zigCeShoi1GoFiIwBycWNEY6CwDgt08QsgB3GEoWTpZOEntHGDjjFib3TwJrVwiNkMY8gAM0jOzad8Q4hJJE5QKAABVWtHgNRYyQqfQMYCYLA0sFYxEUFEY0IATBJ4kQMaEADz5Up-H549HkNwAahpOj0AwMEAWGggcHBaw0VMxWgZcQMBhmnMhcEwaBclm5BOpjF6ApYAF84sr-gZRGR5IwIhoFUSAHwKgxExGMWiGpmC42TEKzSxkWhQABiTGqUhAG3d-oAmgSsS83IgiYYbSULVarUTwhKyEaI2QAJ5oGBuj2BV7uuNWgBuo3kKeAXzKP1VEYjpAAwpZTgBzAsaGDZyhkHTVfW6LMR64AFSIy1ETfI-Po8kxnj4AhYMAAHmgoERbOEazlO1brvshCCWLRONO5qOTqwup0ANarwWolgbaEAWWilkwtHCHW6AH1up08j9Xg3Bw0oowdYNLmUD5nyfTngYrhFCU6TFoEGgbPKlploqpZlkY4YRsGprmnGRJoFhZbdk4ognGRwDChC8CYLAJA1o4ir9lycA6Ds-yHO0JxnLoRbkoEirIEIwjoWWRJwGgpzxJMcBwJknCQqmKxrAAtFA7KxiA-qUSCIo0dgRDPkIeRCFoirBhJpxEYKwaEXqhhYchqoyNcAASJTJliChKGQKgRI40QjGMExTJ4uxOBcWKcCwNYQIOLkmAGWLssxkJzP6RANHIijKKo7J6Yh_IDICrA7nutR3o4mAEDA0AaJVD5wAAjswhXIXELLIhE1Q9Sw2JFVaGpav5jD5vCSoyHEprIpePKhLUuL4oSWJErUZWUjKmJ0gNgqdYhLAAKRLbKNS9T0HYoSwQ3aiwYCjK440GOhzkDNdI1jTIL0zgwzAsLYMB3RMrDqBIIA5DQcAAELhJwjAJkgd1QK4irg-E_3TjgeCgAkFBUIgND0EwrAcNwvD8II7qiKT7p9HQP2sMA8RUxQbBEJlSq3eTwhUzwKm2AIhgEOpzaSDIdNEyw7qYIYojQdVsk02LhO_VLhhJAmsBigQCsgLTyvAxgnOTqr6iK_0JX4uQnDhPNf1EOMkLkJgQEAKKwI7ZCQwmACStgaCIbNkKZfQW_w7O1AQzMwKzmXSlbNtyhBJBhw0ohnG4GhEuomG9GDEPQyQsPw4giPI-D6ua_LWOEKQuNkNQuEXQYi4SZMCaILdsDTuNYBd3zECiLlJAd8QoG0CQ42jBANYkCpEAULQcAj82bh9KqoazIyzfsnOnDtywQTzgQJ7jTugHhCpQSZWQAgdwAHGg3dTbXKn7NP9odwArN0a9iyQMZN2WJwWwi56L30fuNCg04yAqSnjPZespxq7AgLYRwHcABsohaC_3_oAs-sVZ43zQBggALBAz6ed2QFyLgje6MAUYgAlIfCABBDBoxnJge0jokDY1rs2agRIACEAARAA8hWbs3pQQuysA6KAFoiRcNmJMeiqZKBejiIorgthrJEkhFEeI1ZGDQVTAAVW7E6FSd8NGWj0QUaKhdFLumzBAGAux6buktnXVMyDUGWGqP9FxNVX4oMcHkcI88ICjBUnAAgowUztEwJ0GxkZfJkFgPqYR9tAjNmDGkjJmjDBOGAVhIkV9bAJl0YubMYRbCphTl6YM1TSmGHKZUmQwYlH6koVDGGcNaFI3oeDWWBQq48JrtSPGIBDAACo4gACkiBwEsB4FgFYXA30EBWQohQ6jQTiPaMgaAl7GF2GcnASzLC7GIJCTg8hqoC21nAQWGyBAqSeSpEZZBDAyBmT8kgMy8gzMQIgEIpoYBApBZwMAmJAFX2nDEiAAAvJcHcr6MH-owS-RAn4kFVDMvBsMCEd06DgpReQ2mAKcO_MgHdjwHRwZSreLB1IkBgCpalNYP4sESZ_car8YBBBPPPFSiJyAxNoIHSwqLuK-SnpwVwtgcF0GXMsFhmpRB5Bcf9IgeQ4kkFzHAPIcBsw1kAS3Xe-9D72xPnEMqIS_F0u6Ayz6f8YwUtHDfEgeQoEAS4Ma2CPBAFitpWEEgpF544LQHkSw7QY3YhjQAZhjSQmNn8Y3oMAUQJsjBe5EF2K_RgnBiEHypieV-TAlWupIAAYhTnkGtr5XxsugYA9kNhoh-Q7u2yYFAcEuQJZDBVLDFgwDShXKEfyZBMriJJEBMr2joPIQMENoqFLQH3kIUwmU7oYuMl4U4cAYluBZP2q2h8LDMt8Wgnlzrxrosxe8mwkxjkwBHs-4tD1q2OEAb62B6l4EsoBmQe9la3DYrIJsjuibH5eBsCgqwcAoAaE6P9M1nQjrYk_gdJyMgyCMEQCQWOiAZIwPmCpRMyYdBkHsMyh94Gr6Qdvjy2DcB4P2EsEhlDaGjhHW_jhs9sy1mvMECGzwU6SAAAFV13RqsGl-d0nxQE3dusgu7bCiwGHARgBAO5amQ0IQwYnDC7B3bDWwJmzMYuPU-K-dgBVBBDZgUzYAwDYlMgqXC0R_Yubc8HZ-4q35ctDegn-AWYETo7kRs0owe4vwtW3DuiMoBBG4LavFk0pMye4Je8La6lMqasxp8a2ndM3EYAZoztdnmmbU-ZyzdXrOQkXIEBzTnfPua0J5pgO4yA-fmH55CCIX5Be5d_UleXItXh67FvLCW95JZmKl4-Z7pMKZy_J8VimN0dy3UVzTUEdN6Yq_7Kr5AatFYa-pz5MAawhSxfsRztdnMDc691mLfWhAdf8yukbtVgsdxIWF374qpvRZ3FAOL4r5v72S8t9LioenUP6SXOhDC4CnFsPCh5JBIA1kxqQcZON-H42Ze6cIkASDzxgAAGTZmgcEmU4J-XdItwZFDUa9MLij0uQzGFpc4HWAnJAid8KmWTj0ClLhIEliADHZxJLHxUisIg2A4LuhXAMd0O5wis9l2w9OGNcAa7iO6f6yZ05KFcXAPXzKDCU3qHr90AA9dod8klJJN5aB3pM-YCCdyAV37vOie7BgqH3vNYmrDQGQG3MuXckI98kkAKpNf25AIE4RMALf_St_AW3qpEec-R8XXnaFwYL13hQagkcuAUBu774taAQCKiAA"><input name="query" type="hidden" value="file=%2FApp.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height:39.0625rem" class="sc-63873f59-1 bNfnmT"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:R1k5laim:" aria-label="Code Editor for App.js" class="sp-cm sp-dirty sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:R1k5laim:" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:R1k5laim:" style="display:none">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼ5z"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:R1k5laim:"><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">React</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'react'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">App</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-activeLine cm-line">  <span class="sp-syntax-comment">// We hold the user's selected number in state.</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setSelectedNum</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">100</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-comment">// We calculate all of the prime numbers between 0 and the</span></div><div class="cm-line">  <span class="sp-syntax-comment">// user's chosen number, `selectedNum`:</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">allPrimes</span> = <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">counter</span> = <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span> &lt; <span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span>++<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-definition">isPrime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">counter</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">push</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">counter</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">label</span> <span class="sp-syntax-property">htmlFor</span>=<span class="sp-syntax-string">"num"</span><span class="sp-syntax-punctuation">&gt;</span>Your number:<span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">label</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">input</span></div><div class="cm-line">          <span class="sp-syntax-property">type</span>=<span class="sp-syntax-string">"number"</span></div><div class="cm-line">          <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">            <span class="sp-syntax-comment">// To prevent computers from exploding,</span></div><div class="cm-line">            <span class="sp-syntax-comment">// we'll max out at 100k</span></div><div class="cm-line">            <span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">num</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">min</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">100_000</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-definition">Number</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">            <span class="sp-syntax-definition">setSelectedNum</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">num</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        There are <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">length</span><span class="sp-syntax-punctuation">}</span> prime(s) between 1 and <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span>:<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">' '</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">span</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-string">"prime-list"</span><span class="sp-syntax-punctuation">&gt;</span><span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">join</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-string">', '</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">span</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-comment">// Helper function that calculates whether a given</span></div><div class="cm-line"><span class="sp-syntax-comment">// number is prime or not.</span></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">isPrime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">max</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">ceil</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">sqrt</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> === <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">counter</span> = <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span> &lt;= <span class="sp-syntax-plain">max</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span>++<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> % <span class="sp-syntax-plain">counter</span> === <span class="sp-syntax-static">0</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">false</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">App</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-63873f59-2 gNPXcu"><div class="sc-8dc8a3e4-0 bwSvdO"><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">result</button><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 flehAM">console</button><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform:rotate(0deg);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:350px" class="sc-63873f59-3 kgcdac"><div style="--iframe-background-color:transparent" class="sc-63873f59-4 jLUZNi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 318px;" src="./Understanding useMemo and useCallback_files/saved_resource.html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div><div style="--pointer-events:none;--opacity:0;--transition-delay:100ms;--child-delay:0ms" class="sc-63873f59-5 gIBqhB"></div></div></div></div></div></div></div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">I don't expect you to read every line of code here, so here are the relevant highlights:</p><ul class="sc-19724b12-1 dvUyoz"><li class="sc-19724b12-3 eSCGZL"><span style="transform:translateY(5px)" class="sc-19724b12-5 ivSWjC"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div class="sc-19724b12-4 hGMcnl">We have a single piece of state, a number called <code class="sc-1a723291-0 hSlZWR">selectedNum</code>.</div></li><li class="sc-19724b12-3 eSCGZL"><span style="transform:translateY(5px)" class="sc-19724b12-5 ivSWjC"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div class="sc-19724b12-4 hGMcnl">Using a <code class="sc-1a723291-0 hSlZWR">for</code> loop, we manually calculate all of the prime numbers between 0 and <code class="sc-1a723291-0 hSlZWR">selectedNum</code>.</div></li><li class="sc-19724b12-3 eSCGZL"><span style="transform:translateY(5px)" class="sc-19724b12-5 ivSWjC"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div class="sc-19724b12-4 hGMcnl">We render a controlled number input, so the user can change <code class="sc-1a723291-0 hSlZWR">selectedNum</code>.</div></li><li class="sc-19724b12-3 eSCGZL"><span style="transform:translateY(5px)" class="sc-19724b12-5 ivSWjC"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div class="sc-19724b12-4 hGMcnl">We show the user all of the prime numbers that we calculated.</div></li></ul><p class="sc-e646da6e-0 ddhZIx"><strong>This code requires a significant amount of computation.</strong> If the user picks a large <code class="sc-1a723291-0 hSlZWR">selectedNum</code>, we'll need to go through <em>tens of thousands</em> of numbers, checking if each one is prime. And, while there <em>are</em> more efficient prime-checking algorithms than the one I used above, it's always going to be computationally intensive.</p><p class="sc-e646da6e-0 ddhZIx">We do need to perform this calculation <em class="sc-51e913c7-0 bqvtGV">sometimes</em>, like when the user picks a new <code class="sc-1a723291-0 hSlZWR">selectedNum</code>. But we could potentially run into some performance problems if we wind up doing this work <em class="sc-51e913c7-0 bqvtGV">gratuitously</em>, when it doesn't need to be done.</p><p class="sc-e646da6e-0 ddhZIx">For example, let's suppose our example also features a digital clock:</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="prime-number-with-clock" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-63873f59-0 fOfHwg iXthYV"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button style="transform: scale(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div style="top:-6px" class="sc-ef2d918d-1 ehlMox"><div style="opacity:0" class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" style="height:4px;background:transparent" class="sc-477a4b02-1 jsWuH"><div style="background:linear-gradient(90deg, hsl(333deg, 100%, 55%), hsl(289deg, 100%, 45%), hsl(245deg, 100%, 60%));clip-path:polygon(
      0% 0%,
      0% 0%,
      0% 100%,
      0% 100%
    )" class="sc-477a4b02-2 dWkRDI"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform:scaleY(1);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADok6DZizBNanXv0FCAJqpgBaMCTgB6JYxVlJMmWACuJHhFIt0aABQBKFsBksWxQ6wA2nAwsDwwmgByNrQANCwhZADKoTDhUTEAuiwAvOxiZJg2IUlkOq4AjAAMVe7SJL4-LEZGLAAGZHQwbSwQcCycCWUULABunIwQnABGsCxkABaqfkskAObwLKQEMCxoMIwJaaSasU0tCUTzS6wQFv2cUADunACe_RANcK_2LE93C2uuwINkYonI8y6mCa_jgrE6tF2eWKMAAKl0PPVGg1mq0AMKPEFQHQDKBQLZgIF7SaIlgkGLTA5waE4i6uACq9lWG00inUVK4jCgEAOLBgAA9OPRYJh3DDSHDSVAAAo0zZ5QKZLGKJgsVywVjEOwUQ55ABMEj8RGNooAPEcwhQMrRLUbyAcANQezzeHG-CCU1x9VUYt0m9w-pq-XyPFVq5loYoLVxhg51KMsAC-TWzOKaojIoIargztoAfBnfLa0H5iXA4JEpTAclJCFAiAQANatit-6O-YCmcyuBEweJCBYLRC0WiIesDITuXP9qtGNC9lcsW1DjebrfExnkhZkWhQABiTBbIHptB7AE1rYcb4zGIhbUYD6Fd5vbZ9E2RKxXMhXn2K9nwOVtAP7cYoBsZtgBCR0ImiWhlz3XxSDxbl4NcGBRkoMhPByMsvCglcLlRK40FEfCIWIegbBNfo-AEMVxTQdtNE-NYzj7dCLieGAhDJFgVHFLZGIGVhqiqbs-L3A06RiXIWAAWVUBZMFoT5KhqAB9GoqniFCX1w2jCjKRgNkKGC4IjbV0OxRzo0SFIkOdVwb3TeT-0zNDNyMb9o3fHdAOrIL-1RBYDl2CZdmAWMQ0RZlYHWRZM2pDE4E8RkyEEygWAqAYSF5BDUnSFDM0QMjgCEYR_JXW04DQTgGgIOsGybK9qK6XRhThHsyIHRL4xwIgdKEcclzI99mtaiKtzXIL313bzc2sOwHCcFF0URDxSJxWEglHeJEl2mBsjyDhuEKFFSnKEgYCeFgABFynspommungihCABRMAwDSMhXH24iDv7I7endRgYIASV5PJ_hKognkwRI4ZhmDQaIkjfU3M6MUe563ooDxvN8-IZNqbUMwLIs9VxiGV2RzRUcwdrBUxk1sc-HnHgRinozQzN4k1IX8xgQtGAaUd6nWkhbHsTonGDNVPPcfGrQCUTOHEvJ1MWDmYGgVxDc0uAAEdmA1iWcQDPUGhyZ2WDNSM-3pmX5kYODtTQppTD1RTU1NV3XWtGGtzyMTw5tRgvXd_sHc8lgAFIrTj3IXdqZn-09howEeEIHKzHMrBxfPvd9mQFYleRWE0GBC5sKBWBcCQQFiGg4AAIU-CZXiQQuoBCUWaBKiUcDwUB_AoKhEBoegmFYb61FY1tRBu1t6jkZevD8TeKDYIgiFYDKWI0TeeF0NnaCMdqRXISxZCXhRW0wIxRESDn623mRd7fiAD-cJXiwGZAQX-IAd6vzbhgPk68gFGBcH_EgMgoaz04J8UUeQ2YgkROQTA1k_qwHwWQHurwEauBECfCw3kob8FPipAgh8YDH1PimUgZQsGMG8jIBhhRwSN0YK4W0LhmhljqJ3bufcSADyHkXGAY8QFgJ_tPQgnCCLUA5u2LszMGBwDuI4EgiABjTDgEQWCFBtRkCIGgExAAONA4ptSTDWMeBxTjtQqCsp8ExVRtQtU0FxdYfjtRKHIPoKU0BXgmNoKQIgc0djy2sMoZmXFmrEhiYoWAziA45JvhAUQW1jFWlgrQEg2pHgQDWCQXQdwYC0DgCYnYMNkkkE_OSLW6SOJvBMbMDsnYvETDWJ8XQ0xT42NnCwRxuScThLILoQS1T3EsAAKw1DaX-SSWtAnBLWB42ZvgKDigWVUmpzSCIHG1P8TQiwTEADZRAuhrjIGsWtvEjNqTYuxLB7kABZPE1ykX0GRcjEDD1Hl3RMswIAECMJ8Ru4pMDHlPEgGeGj54gFtAAQhegAeTxKiO8yo_osBRVAXstpyUsGJOsK8lBBo4ipVwTQy1ERlBWBMRIV52SojPLoexjL-y2nZYMWRiIryjBFE8eurZtZzzIFeG5iwciNylTsRZEBbkLHiJ8QxjxdBwAII8ZsFRMBVCFcFToZBYBlheh2GIBF3zWttU0d80VOCsrdeMzQrxlpcVGL0TQV5-E9nfAG3c74fV-pkO6k8FLgW937owQe4KFFjy_lLVRaL1HukxUYAAVE0AAUgkhYQh-h4mKJMlgeIkhJHyIkJox4yBoCaS0J4naxpwAWE8eiXAbAcwEPfes99q0CF0BAuAuhM1kCMDIAt86SAFviAWxAiBGSmDHCwNdiBOBgBNMzcZ4pDUQAAF7cT6UwIRYyiCzNzAW5mHzfEsH8S8kg5L4jRuZtFZZZATEyVTm079WthSPV0L-tx_7CqYFWdqRZMBpidjuPoThhq4mnwWJe4qnQqmcBCJoTZtAeJ7FhdLbdUrG5EHiMakg4w4CnVGGsNJfQelZP6V2IZJ7lVTkKjUID76tlkC_YxGxJB4jHMslwU65VWBa3mSYz40VJhkDaWgeICwKgabNBpgAzBpv5GnVkafuczIg-FGBgHbE8RZjBOA_OmJvTsizr1tIAMT8PiG5vSelHonOZn0CxqgjGKfMcSKx76ZCFpYD3fDsKgS0mUZsRdMgQNNF2dhio9zAVzLQ4XbSUAslCAAOqn0LowTQk0EitWnSESYYA2kyDKLMeKTQeMAf49qcZFWDiToscSNtMBmn9fs8Xd9ixmaSd0GckpsAD1devb18ZZBJkmN004y4wpeQLDgFAVwVRG7MaqOnM0qzU5rSa6-Eg7DEB1gWUQMAuhgL7E8GQUqTRus3uW6twqG2wtarJbt_bh3X3p3WedxrJBotVrhKxeZ_QUskAAALzMiTsZmqP8vRJMSVsrExKvajgIwAgJjQR7aECYThxgnh44q0YGnZByuaENQ0iA4yoDM8EtMeZmAaeAzNIuDMQ5VBUL52AAXQtUdLKgw8jZAc0NJZMddswjwwloe6Zkkxw8oDTG4IMyLyPMfcFa7liJWPCs49K4z_Hz9fBE5JywMnVDKfkGp7TzQ9P3e6ERFxGICHuecN5w98Xgu-zC5BkIMXEu1cROlys9Zb7TcLMV3SZQqv5cRI170xQsZdecYNyjvLxuMdF4K0Vq3TPbcJGJ6ToUzv4ee-t3ThnTOZ0wDWC3CY_uedR9D_2cPovg_R4zwsuP0G_ly6T4a4CsAldp6gDHhZWesna7z_rkgmZE2gpTfIkeiiu5wFapoY9Q7FbVKnqQHNs9NELy1q2T4kBZAUAADInzQKqU-wMjGti1wooFXcQVk1U0IV98QAWouxOANgL8SAr8MUyBqA79rwmwf8WBWxD8SpwDnNqIiBsBgZWxeJGgQAVBPgUDWx4UJ4kVcB8DPoQBG59gJ57ARQ4AUCtZCCr4AIkBUCQAAA9Coexc1c1agvsDeAoG-AQUgngvggQi1TuDMEQm6Q1ZhCANAMgZgzg1sbgv5aQoQ_sVsbQCgfQQwCQs0TAM0fgmQnMAgrgtVF6GAegxuRg-AFg3MTfAApNWRHfNNPfPyLuCgaUHQagZhLgAw9g6bDAEATMIAA"><input name="query" type="hidden" value="file=%2FApp.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height:39.0625rem" class="sc-63873f59-1 bNfnmT"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:R1k75aim:" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:R1k75aim:" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:R1k75aim:" style="display:none">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼ6c"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:R1k75aim:"><div class="cm-activeLine cm-line">import React from 'react';</div><div contenteditable="false" style="height: 420px;"></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">p</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-string">"clock"</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-definition">format</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-string">'hh:mm:ss a'</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">label</span> <span class="sp-syntax-property">htmlFor</span>=<span class="sp-syntax-string">"num"</span><span class="sp-syntax-punctuation">&gt;</span>Your number:<span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">label</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">input</span></div><div class="cm-line">          <span class="sp-syntax-property">type</span>=<span class="sp-syntax-string">"number"</span></div><div class="cm-line">          <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">            <span class="sp-syntax-comment">// To prevent computers from exploding,</span></div><div class="cm-line">            <span class="sp-syntax-comment">// we'll max out at 100k</span></div><div class="cm-line">            <span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">num</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">min</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">100_000</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-definition">Number</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">            </div><div class="cm-line">            <span class="sp-syntax-definition">setSelectedNum</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">num</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        There are <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">length</span><span class="sp-syntax-punctuation">}</span> prime(s) between 1 and <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span>:</div><div class="cm-line">        <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">' '</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">span</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-string">"prime-list"</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">join</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-string">', '</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">span</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">useTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setTime</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">Date</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useEffect</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">intervalId</span> = <span class="sp-syntax-plain">window</span>.<span class="sp-syntax-property">setInterval</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-definition">setTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">Date</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-static">1000</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-plain">window</span>.<span class="sp-syntax-property">clearInterval</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">intervalId</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">isPrime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">max</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">ceil</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">sqrt</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> === <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">counter</span> = <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span> &lt;= <span class="sp-syntax-plain">max</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span>++<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> % <span class="sp-syntax-plain">counter</span> === <span class="sp-syntax-static">0</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">false</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">App</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-63873f59-2 gNPXcu"><div class="sc-8dc8a3e4-0 bwSvdO"><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">result</button><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 flehAM">console</button><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA" style="transform: rotate(0deg); opacity: 0.7;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:350px" class="sc-63873f59-3 kgcdac"><div style="--iframe-background-color:transparent" class="sc-63873f59-4 jLUZNi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 318px;" src="./Understanding useMemo and useCallback_files/saved_resource(1).html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div><div style="--pointer-events: none; --opacity: 0; --transition-delay: 100ms; --child-delay: 0ms;" class="sc-63873f59-5 gIBqhB"></div></div></div></div></div></div></div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">Our application now has two pieces of state, <code class="sc-1a723291-0 hSlZWR">selectedNum</code> and <code class="sc-1a723291-0 hSlZWR">time</code>. Once per second, the <code class="sc-1a723291-0 hSlZWR">time</code> variable is updated to reflect the current time, and that value is used to render a digital clock in the top-right corner.</p><p class="sc-e646da6e-0 ddhZIx"><strong>Here's the issue:</strong> whenever <em>either</em> of these state variables change, we re-run all of those expensive prime-number computations. And because <code class="sc-1a723291-0 hSlZWR">time</code> changes once per second, it means we're <em class="sc-51e913c7-0 bqvtGV">constantly</em> re-generating that list of primes, even when the user's selected number hasn't changed!</p><span type="default" style="filter:drop-shadow(0px 1px 2px hsl(0deg 0% 0% / 0.1))
            drop-shadow(0px 2px 4px hsl(0deg 0% 0% / 0.1))
            drop-shadow(0px 4px 8px hsl(0deg 0% 0% / 0.1))
            drop-shadow(0px 8px 16px hsl(0deg 0% 0% / 0.1))" class="sc-9a7b0d0-0 dhEZub"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27714%27%20height=%27332%27/%3e"></span><img alt="Labeled screenshot of the code above, showing how whenever the time value changes, the prime numbers have to be recalculated" src="./Understanding useMemo and useCallback_files/clock-prime.png" decoding="async" data-nimg="intrinsic" class="sc-9a7b0d0-2 bSTxZG" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" srcset="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fclock-prime.png%3Fv%3D2&amp;w=750&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fclock-prime.png%3Fv%3D2&amp;w=1920&amp;q=75 2x"><noscript><img alt="Labeled screenshot of the code above, showing how whenever the time value changes, the prime numbers have to be recalculated" srcSet="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fclock-prime.png%3Fv%3D2&amp;w=750&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fclock-prime.png%3Fv%3D2&amp;w=1920&amp;q=75 2x" src="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fclock-prime.png%3Fv%3D2&amp;w=1920&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="sc-9a7b0d0-2 bSTxZG" loading="lazy"/></noscript></span></span><p class="sc-e646da6e-0 ddhZIx">In JavaScript, we only have one main thread, and we're keeping it <em>super</em> busy by running this code over and over, every single second. It means that the application might feel sluggish as the user tries to do other things, especially on lower-end devices.</p><p class="sc-e646da6e-0 ddhZIx"><strong>But what if we could “skip” these calculations?</strong> If we already have the list of primes for a given number, why not <em class="sc-51e913c7-0 bqvtGV">re-use</em> that value instead of calculating it from scratch every time?</p><p class="sc-e646da6e-0 ddhZIx">This is precisely what <code class="sc-1a723291-0 hSlZWR">useMemo</code> allows us to do. Here's what it looks like:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 351px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">const allPrimes = React.useMemo(() =&gt; {
  const result = [];

  for (let counter = 2; counter &lt; selectedNum; counter++) {
    if (isPrime(counter)) {
      result.push(counter);
    }
  }

  return result;
}, [selectedNum]);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> allPrimes </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> result </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword" style="color: var(--syntax-str);">let</span><span class="token plain"> counter </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">2</span><span class="token punctuation">;</span><span class="token plain"> counter </span><span class="token operator" style="color: var(--syntax-str);">&lt;</span><span class="token plain"> selectedNum</span><span class="token punctuation">;</span><span class="token plain"> counter</span><span class="token operator" style="color: var(--syntax-str);">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token keyword" style="color: var(--syntax-str);">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token function" style="color: var(--syntax-fn);">isPrime</span><span class="token punctuation">(</span><span class="token plain">counter</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">      result</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">push</span><span class="token punctuation">(</span><span class="token plain">counter</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">selectedNum</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx"><code class="sc-1a723291-0 hSlZWR">useMemo</code> takes two arguments:</p><ol class="sc-19724b12-2 kUMkgA"><li class="sc-19724b12-3 eSCGZL"><div class="sc-19724b12-4 hGMcnl">A chunk of work to be performed, wrapped up in a function</div></li><li class="sc-19724b12-3 eSCGZL"><div class="sc-19724b12-4 hGMcnl">A list of dependencies</div></li></ol><p class="sc-e646da6e-0 ddhZIx">During mount, when this component is rendered for the very first time, React will invoke this function to run all of this logic, calculating all of the primes. <strong>Whatever we return from this function is assigned to the <code class="sc-1a723291-0 hSlZWR">allPrimes</code> variable.</strong></p><p class="sc-e646da6e-0 ddhZIx">For every subsequent render, however, <strong>React has a choice to make.</strong> Should it:</p><ol class="sc-19724b12-2 kUMkgA"><li class="sc-19724b12-3 eSCGZL"><div class="sc-19724b12-4 hGMcnl">Invoke the function again, to re-calculate the value, or</div></li><li class="sc-19724b12-3 eSCGZL"><div class="sc-19724b12-4 hGMcnl">Re-use the data it already has, from the <em>last</em> time it did this work.</div></li></ol><p class="sc-e646da6e-0 ddhZIx">To answer this question, React looks at the supplied list of dependencies. Have any of them changed since the previous render? If so, React will rerun the supplied function, to calculate a new value. Otherwise, it'll skip all that work and reuse the previously-calculated value.</p><p class="sc-e646da6e-0 ddhZIx"><strong><code class="sc-1a723291-0 hSlZWR">useMemo</code> is essentially like a lil’ cache, and the dependencies are the cache invalidation strategy.</strong></p><p class="sc-e646da6e-0 ddhZIx">In this case, we're essentially saying “recalculate the list of primes <em>only when</em> <code class="sc-1a723291-0 hSlZWR">selectedNum</code> changes”. When the component re-renders for <em>other</em> reasons (eg. the <code class="sc-1a723291-0 hSlZWR">time</code> state variable changing), <code class="sc-1a723291-0 hSlZWR">useMemo</code> ignores the function and passes along the cached value.</p><p class="sc-e646da6e-0 ddhZIx">This is commonly known as <em class="sc-51e913c7-0 bqvtGV">memoization</em>, and it's why this hook is called “useMemo”.</p><p class="sc-e646da6e-0 ddhZIx">Here's a live version of this solution:</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="prime-number-with-clock-solved" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-63873f59-0 fOfHwg iXthYV"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button style="transform: scale(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div style="top:-6px" class="sc-ef2d918d-1 ehlMox"><div style="opacity:0" class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" style="height:4px;background:transparent" class="sc-477a4b02-1 jsWuH"><div style="background:linear-gradient(90deg, hsl(333deg, 100%, 55%), hsl(289deg, 100%, 45%), hsl(245deg, 100%, 60%));clip-path:polygon(
      0% 0%,
      0% 0%,
      0% 100%,
      0% 100%
    )" class="sc-477a4b02-2 dWkRDI"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform: scaleY(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADok6DZizBNanXv0FCAJqpgBaMCTgB6JYxVlJMmWACuJHhFIt0aABQBKFsBksWxQ6wA2nAwsDwwmgByNrQANCwhZADKoTDhUTEAuiwAvOxiZJg2IUlkOq4AjAAMVe7SJL7-cKxkdDC5LMUwACptHvW-Pn6kzSycUFAACoxtcB0c3IVdALIwtESuHrkAfF5DjSOsonA2UKx5gZkDviz7ikwsrrCsxHYUjB0ATBLDbzAfAB4Eql0tFaD9XuR_gBqaGebwNG6-CBgR4QODTPqQ97ueF3JHHU6FNDFAAWrmx_zq-JYAF87vTEYMmSxRGQbIwGoSztdafFgiCKBlaJlqYihmyOQ1XHcAdsaQC0H4oJw4HBIpxaDAclJCFAiAQANa6-UspHAUzmVytLXxISk0mIWi0RBqsZCdyMpG-AFGNCm70sAGWgOBoMqgBGoRYpLItCgADEmDqQCQYiaAJpEDksNO0KOMRC-yOhUOBgEQEgksg0pFkACeaG1urzBd1tZuADdxjZtcAQmEhWCvWHfKQAMKkzgkADmfdcME7lDInhyuwRo6RRiMLG6RBYaFES_Iw3oNnecz4AhYMAAHmh9ZpKzPYh2tzuAO4wIQTFgqW8sNmrCqCw1RVMaZphs8uYxB0yyqKSmC0JWlQ1AA-jUVTxGCBYLsehRlIwc6FN2UC9ri1ybrckGBokKSDhEYKuHmYpUbSI6BkYZY3L6IYKv6HbdKS_ztJwoheOMUwzFqcCYLAs5kKStIHtJMCuHAnhRmQX6UKBYwkJoXgDmkQ4xLSiAdsAQjCBx3oAnAaDTsqqrqpqzYgIebS6FA6I1iA3GBsAkmYjJOBEChQh2p6Ha-g504BUGfrcb6oZioy1h2A4ThdL0WpbBuwwBCwgQ2jA8SJLlMDZHkCw8EUJRlBQzEwB-LAACLlBRQxDLVSwhAAomAYAmZsq7rncTSsJW7ykQAkoZeQfpWmhEB-mCJLNUKMKRo07HskEVX0JAte1nWsTcfKgZh513JKnKPGN-2BktBmrZgBCwGJm0zeMrjTf8c2aOdvgjpdlw3Yid0NKV9TpSQtj2K0TjoiFakkO4BWTX-nAAXk8GKe9MDQK4-OIXAACOzDMV14qIiijwNDkTMsJ8eIslDLBkIwva8t1iKmI80GUh8eTfL8W1Bnk_4QtmW2wmzSL08xLAAKTi-8uTM7UT3ehzYDjCElF0kMcO-BzXM8zIcN3vIrCaDA-tEs4GASCAsQ0HAABClZifWSD61AIR8jQBl3jgeCgP4FBUIgND0EwrC9Yo6i3CAoiLLq9RyAnXh-OnFBsEQRCsMpV4aOnPC6CttBGB9EDLpYsjxwouqYEYxwwIUBBqpnMjZy3IBt809awLJ3dwL3Te287Spl6nbcuJPMhY1HnCVv8HQrQQMTLpgxH9bAWrkJ79bza4IhFxYYpY_wxcdAQ-cwIXxcUqQZTr4wYoyLfhSiKHjCuABC4FgXE6huw9t7Egvt_YGxgMHYeo93pqiQJHN-y5qDvX1EaHWDA4AQCRiQRAYwIxwCIGRCg1wyBEDQEQgAHGgW81wZgzljHQhh1wVBEUrEQqo1xHKaCfLOHh1wlDkH0JqaA9YiHrBIEQOKBAYCw2sMoHWT4HIqikYoWAjChhgG0VXCAogsqEOGGRWgJBrjjAgDOEguh8FrDgEQhRW0lEkBLFAVR6IHycE0RGLBhoOFiRnJWXQEZi5UJdCwehOj-Zv10F-axrCWAAFYaiuMrNWHBnABHPjYTE3wFBbxkF0FYmxTjlz_GuEtTQikiEADZRDgitjIJUBVOHBNsVQmhLA6kABZ2FW3AeiSB0DEAByDu7EkfiIAECMMtMOsZ4woMIGgmOIAAQAEI2oAHlxzdAzJMfqMY4xQFNACRZHiVSzhTJQE0QxzlcE0MlLUZQ_BTkYIkFMABVboCZdC0LuSyAELzOC5jcimTs9cPy211IVaOZAUzVMUjke2kKFHxIgDU0k8RKz4IgOMXQcACDjG1BUTAVRAVIgBK0MgsBthtQNDvcgvoaV0vuUYYS2TQwAjCZoesyUnydhYJilMP8TS-kFdyowvL-UyF9Bc7YQyvY-0YH7MZsDg4dy7sg_AUd0GxyMAAKiGAAKTkaSIQcxxzFAiSwccSQkj5ESEMWMZA0COO3B-L1YU4Ckg_MQLUnAbDvQELXNUtcbUCF0OPXQWqjAyENfGkghr4iGsQIgKMpgyosDTYgTgYANYFTCbeQlEAABeuSWBhMYPbRgoSiAxMZIanW7TuEsF4c0kgFz4gyp1sJRJZAiFgRVq43tBUfLHV0P2lhg7QKYGSdceJMAIyGnwfoOJcB1jF1JJW6crQrGqgiOk2gL4DwzPZKIeIkL7ZEHiMSkg3Y4DlU7DOTx6ifFEL8QaAJQx_wYqxUOmoI7O0ZPPD288VCSDxEKYRLg5VBQ61EbOyswkZhkFcWgeIpIKhYc-FhgAzFh3pWHklYbqTrIgS5GB6NWvExgnBukRnToaeJTBNCuIAMQ_3iBxtCaFjpFJ1uiMhqhHAmOEyqChnaZBGpYJ7VUMzObCS1AkBso8c1JrHUMfhgiZxDrqQM2JYj9bISgJooQAB1Yu-sa2RQSNOOAhL_golcTIMofj2gFSRY6K6VRgOImrbW6NZCVTupgE4kLDHDadsUjrGDJSfJlJYLAAt1xAv_HrWQCJRD8MMISGQzFMY4BQFcFUe2r6_Ms2SSrNKbnCyyLIK4RAKpmi6CIGAXQDYmyeDIIZItbGMthKywIIdeXSE-UMqSYrpXyvtrVqkmrrmSCyetc0a8SG5iJpkAAASQ-IhRiG4kmckUQyz1mxKaEbr4OAjACBEI5CVoQJg37GA_OdmtRg3tkBs5oJzyEwlQF-1-CMSHMBvaGp8D0dxLSqHPuDsAkPzp7YSTO-paTdEbrU-F3MyhxgiLiWo7xmiA5QAjNwH9JA4a7aO9wTzGPjMSLM6dqz32LtXYSLd-7jBHvPfIK997mhPsC90FqJ8MQl0g7fmD9rCOocshh41oQ8PEf47ESjpJqSO1GeKQg7HsizB4_p8UwnGiiEk7J0aJb1OGcHYKnt47TPhAs5--zm7d3Ojc_Przsg_PWcfa-z92NMAZynDEhL0Hyu5dIgV3DmXKujdLoHUQ3p6PteEqx0Q_XKgoCq-N1403ihJIW4p7SJVIzVUwMDnA92cBpyaGLSG-G1jw6kGWXqtZBVdSVkgLICgAAZIuaBpjFxMmJ3UZvYGDPdsMlVarxnV48uTzgc4W8kDb6ssg1BO-pjcuP1OteDKOSNLoQ8RBsAmV1K-cUIAVCVj37qOZodbzh0v91EA9smyh3sPXCeSAdaDDTgKHvxAAAD0KhaFyVyVX8WRdQK5jcBBgCwCICqgoC3Y7hYCChCUH4IA0AfdEDelICKU0CYD38dB9BDBgDPhMBPhkD2xEQ-Q39UU2oYBP97Zv94A99gBGRS9p9lUoEK91Uq92J3YKB6BJMYBqAH4uAKAg9FgSkMAQBaQgA"><input name="query" type="hidden" value="file=%2FApp.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height:39.0625rem" class="sc-63873f59-1 bNfnmT"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:R1kblaim:" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:R1kblaim:" style="display:none">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:R1kblaim:" style="display:none">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼ71"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:R1kblaim:"><div class="cm-activeLine cm-line">import React from 'react';</div><div contenteditable="false" style="height: 588px;"></div><div class="cm-line">          <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">            <span class="sp-syntax-comment">// To prevent computers from exploding,</span></div><div class="cm-line">            <span class="sp-syntax-comment">// we'll max out at 100k</span></div><div class="cm-line">            <span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">num</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">min</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">100_000</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-definition">Number</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">            </div><div class="cm-line">            <span class="sp-syntax-definition">setSelectedNum</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">num</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        There are <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">length</span><span class="sp-syntax-punctuation">}</span> prime(s) between 1 and <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span>:</div><div class="cm-line">        <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">' '</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">span</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-string">"prime-list"</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">join</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-string">', '</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">span</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">useTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setTime</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">Date</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useEffect</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">intervalId</span> = <span class="sp-syntax-plain">window</span>.<span class="sp-syntax-property">setInterval</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-definition">setTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">Date</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-static">1000</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-plain">window</span>.<span class="sp-syntax-property">clearInterval</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">intervalId</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">isPrime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">max</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">ceil</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">sqrt</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> === <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">counter</span> = <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span> &lt;= <span class="sp-syntax-plain">max</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span>++<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> % <span class="sp-syntax-plain">counter</span> === <span class="sp-syntax-static">0</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">false</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">App</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-63873f59-2 gNPXcu"><div class="sc-8dc8a3e4-0 bwSvdO"><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">result</button><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 flehAM">console</button><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform:rotate(0deg);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:350px" class="sc-63873f59-3 kgcdac"><div style="--iframe-background-color:transparent" class="sc-63873f59-4 jLUZNi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 318px;" src="./Understanding useMemo and useCallback_files/saved_resource(2).html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div><div style="--pointer-events:none;--opacity:0;--transition-delay:100ms;--child-delay:0ms" class="sc-63873f59-5 gIBqhB"></div></div></div></div></div></div></div></div></div><!--/$--><div id="an-alternative-approach" class="sc-89a92fe2-0 ksGsFy"><h3 style="position:relative" class="sc-487e4335-5 eaBdWy"><a name="an-alternative-approach-3" id="an-alternative-approach-3" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#an-alternative-approach-3" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>An alternative approach</h3></div><p class="sc-e646da6e-0 ddhZIx">So, the <code class="sc-1a723291-0 hSlZWR">useMemo</code> hook can indeed help us avoid unnecessary calculations here… but is it <em>really</em> the best solution here?</p><p class="sc-e646da6e-0 ddhZIx">Often, we can avoid the need for <code class="sc-1a723291-0 hSlZWR">useMemo</code> by restructuring things in our application.</p><p class="sc-e646da6e-0 ddhZIx">Here's one way we could do this:</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="prime-number-alt-strategy" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-63873f59-0 fOfHwg iXthYV"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button style="transform: scale(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div style="top:-6px" class="sc-ef2d918d-1 ehlMox"><div style="opacity:0" class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" style="height:4px;background:transparent" class="sc-477a4b02-1 jsWuH"><div style="background:linear-gradient(90deg, hsl(333deg, 100%, 55%), hsl(289deg, 100%, 45%), hsl(245deg, 100%, 60%));clip-path:polygon(
      0% 0%,
      0% 0%,
      0% 100%,
      0% 100%
    )" class="sc-477a4b02-2 dWkRDI"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform: scaleY(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADokZdBsxYBhKEQIBrFnwHDMAehVr1kufSasACozowlnKAQCuUTmSZb-gofqs27D51cmE1kSMEcSHghSFnQ0AAoAShZgGRYWUTJHRhIWeLT0lgAeAD4CwuLDDRY9MtyK4t9aW3snFzdGGrqKotqCxOkSAF8ZGRgADwVWABMYME5nVjiJEAAaGjgAIQgSTkYATyR5qDgYIfWd2fGcPFBickoyanlzdjFeTxYpEFFuMm_Bi9FMAWARfhQ2EQiKwhh4dCJ3gBaaYCPQEKAQR4hIGsb76USnMiYAhwOAA0xTL4gfRwMj7WBwYmk8kkHGxDBwwR4vRxFkye600GkMicHYwToAXhYKKczXImAA5jAyABRWBysibfYASWm8REULIQgG_NIgv40JYUrBXAhhvi9xFYsYJtCFqJohIs0Y8SKcS6AzWG22uwOR3sp3OIFp9PgTNuhGFj2oxNU1VS9QYcAgZGiJEQLE4ACM4EQoI4KIN0m40AWABxocZVjIQBUACzI9cbzdoewVOwLAAZm2hONNpjsFUPm2BhYj5rRoPsC7RSEQ4KOCDBBiMwkxBBn0hONy5l1pYE2CmAL8iIKIoqQC8Ry7QSM37K2SIiczBaHAn484o7jILhFjAUApAUx5oKeBZFmm6g9n2OyIkW0JuLQXaXvUs7kIiADuMCth2BYAKyDsOMi7jsaAVpBmZjhOJBTiwDbYdWExkIiH4KvmoKAYwzb4RA0xkG2BYAGyiLQwEkGg9HpL2jD9l-NaSQALN2VFBhAWw7HshyIMckbrLR8EQAQeiXBMmAdrQUBIHcSZUIgIBFAAhAAIgA8koAAqACaFgqiwdlQHURRhSwLjMRK3yUN83TFG2XDTEl6RFM0Iqgm2eyEnFIAAKp-QAYoidaJeUxRZZwLC7M0BUAG6YvhUzfEKDzkAVwmiW2EqzM1W4ESJYmrCwOw5hA9iInABD2DAEoAIyYIOlX1BluZkLAJSeWojgar0m3bQUvQpWOSVFGh0z7OlxQTo143TAV7qJb090XXoV03TIp1kPZJQ6XpoaGcZZzrASyrxo5iadU8rl6AAVAUABS65tkIcDKI4tI6EoADKeNvISBQdmQaD_noej4dTOBo_hxDNAsxKoiScBotjGGIqziIQ2QegyAj_MkAjY0I4giBgbOoii-LnBgBQnSHiwaHjDNEAAF6TnBTDeqhRDYbuCMKSwSkqdOVEyGFY1fcbKXEZ2LCLRRACksk20rGIkDAiJ2-2DvLaRzYETARbqDm85znAq7Qm2WuFuQU0YpwpzTLJdAKmNaAWVk0ssM1sxEGNc0kI1ydjXAjUKsb0GwcrCFIarPViQWTuDq7FusnJFbWxWbgkGNFDjCKvzl-BMA8MbuEOzsKXWGQsloGNbaLUvABMS8AMxL-pS-kUvEnG0QjXiteRD4QRjCcLWyu_OoBE67JADE7pjY_AD6b9e0Pxu6WWrh5gWX-7RtwdxkIjFgmxk4WRYGJX8MAWAxgZCwQWMh3YFFHOOOOi0JJaRwnOBcS4CxCAAOrQnmIwaYQhy6cBIHAGa4oIBgFkjIEU8F4FKybuJR2LtmxoQoeKLmZYXDkxgE-IRV9TiyTEsbQeXEeJ8VgPLXhOsBFoTIBhAsG9GwILLCJUKcAoDxEHLMKubcWCr1Is7V0u4yCMEQCQaE8REAuFpIiIgYBER0jQDAZIZBpjGz4brNRGjHbaNLBifxbYDFGJMSwMx5ErHMJIOApQHMdBT0xigkgAABKe85uDsKvPgzgi4oBnhIWQvYlDmxwEYAQAs2RDFCD0BkqmlSKFtLIOQ6Y9DFxoSgD0wiRYp6YHwu4sAq9jRVSlr2Mg-oxlgAmcaGcc5CL20khRFZeFEGiLqvuewWyuI104GeY4UAizcEQqAnJeT5hbknsU0p5TSFdKqSEdItT6ksEafqFpwo2ZjNeR0wF3TETNAnPtYOwzhSjPGZMxI0z9lzKEAspZrp0h5LWX7MimyinbLpLAAsDjGC9igIc28J4TkFjORcjQSTcnFPuUrW5JTCHCBed095CC6kNMYE0v55AAXtOmJ00FogFSBEYFCkZqL4WIpJa4eZcLll4q4likiLB1K4rwfi2MRL9lktVRSmCVKtD2HOZcncgMQwGXDCcMGIAmgtACO0JgNxoaOmTK5NkHA_icmEL8cQgwZDhEiLmGITr_BtCCD6ZISsBSsAANqnFgDwGA0wABy-1R5kDxmPNNmb9oAF0rRvD-JgbGMA8YigoPEVuroCgJsLFAKATrMZSkTUWlZnR4iwFYMQCICtS2rwkEKQd4pigIPzRQQtMkx0PEYAAakXXGqqjC8i6SdQ6Ig46XSrvWoUc1bbMC0TgG2bdu70WFF3OkG9Xx6iZGyLkfIB7ShVQyjM26PRQLgVCn9KAJUmAFRIPtRKAUd2dBA7QMCdjeg_vCu-woRQaIVkQxULxC1vhQZg98NDhRS7lgWsAFN48Z1ZtoHehohRSBKFysxIj8QYDH3IMkCUJRjZUYqJTFgfkiAsDQKIZj_aBC0QVpjbQggJgwSIExDOeGuN6BYIRIQLaTacHGCwHdrBXDcMHOoeThQ-11X2qWgAsq4NsmBFwkDrRRN-FFBxjXIzBxjQnMDDyVESAjjgfFXs44UAzHzlR5tTWR_a8QoN-c40MSjDQ-gHoyn8klX7ihoBS-kPys94F7HYUe6wzRGSwGYmJWEAmbDxDgMkMCZBCKUEdvHfxxHp3pvI0MRAeHgBCGELFnoG4aGghcXADNJTMMgDK80REGJaRrX8-kYAeWbCMmwEQHY-oxrGh60hvQfWSApd6GlqqvQkrWNGGECID5cibvyzACLiR41mlYL2DTUpzNiWJERQxr3LNwAAI7MFu1ego66ItWglFKVe-6KiPpyDAxgPnmx3qKT2ozA6F3DtHajodRQpRPYxzuhdy7IeFGB7kZ286h1g6lIOInUPlRPrNfa5st6Ci7gKND3Itj4fXKk68WY8xFgsEja0QIHQVgXCBraoyEYHVVHUO6_AnqXI0DMIoX1E8JMBveNiFXvAkX-qENMVw3swC0KS7MkIIbzvhtyLLpIxsm25maKWytflyuA4fXTmHL6ejyXRMnIbI2CroiMDNhowAZmKsdzAdbbZxK0EwqSQsG3Dt6AO_UE7oRQ0Xe-acV3zQ7f3doUmqPOa88wBLVKNXRJK3VqNxFmA-EWCeTr4kd36Qq8VtOCqRZpH4h27YxxjqgodgKwI7qUtwkvRn0wISbUC6CN99Y-xpWFRCRl_r435vtbW9M5YOcXT1PmxVXZ3kJfg_0iT5RPhVMXBGBz9H_YeII_xRj-mFFu9-_O1t4yJ7jnNgkk86KB84LBQCsCy5i7Bj6RhhS72pRhwA0LTAqzMxhCtg3CkAerORwwgBKzfA7CQCsgUAAAyUIaAVg0IpGeY3w1K0u2k4uNq0BoMUYm46gnASoaBJAGBsM1AOBIA9UMAVBVI8BXozBiIAmRA2ApG3wqwBQ3wvYOwAh3wVkXoNkuAUhMhIAsw3iyhkQmIZISAg-3wga_w-h3wAAeotHWCtCtGoQeoYUiCiLQAoSAOYZYYONYWsFVHYX8DNGCBAGgGQHoQWGYepFYatB4bYRoUbvOLQk4avJgKvK4bhvUOcOoQNJ5DAFobMDofAAIcALuEMNalASDNLjFusBQPQMAtQDaFEUYdxBgCAEMEAA"><input name="query" type="hidden" value="file=%2FPrimeCalculator.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height: 39.0625rem;" class="sc-63873f59-1 bNfnmT"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-tabs sp-c-dyHYiL" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container sp-c-gGbYbQ" role="tablist"><button aria-selected="false" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="false" role="tab" title="/App.js" type="button">App.js</button><button aria-selected="true" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="true" role="tab" title="/PrimeCalculator.js" type="button">PrimeCalculator.js</button><button aria-selected="false" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="false" role="tab" title="/Clock.js" type="button">Clock.js</button></div></div><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:r5:" aria-label="Code Editor for PrimeCalculator.js" class="sp-cm sp-pristine sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:r5:" style="display: none;">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:r5:" style="display: none;">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼfp"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:r5:"><div class="cm-activeLine cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">React</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'react'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">PrimeCalculator</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setSelectedNum</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">100</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">allPrimes</span> = <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">counter</span> = <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span> &lt; <span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span>++<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-definition">isPrime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">counter</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">push</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">counter</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">label</span> <span class="sp-syntax-property">htmlFor</span>=<span class="sp-syntax-string">"num"</span><span class="sp-syntax-punctuation">&gt;</span>Your number:<span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">label</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">input</span></div><div class="cm-line">          <span class="sp-syntax-property">type</span>=<span class="sp-syntax-string">"number"</span></div><div class="cm-line">          <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">            <span class="sp-syntax-comment">// To prevent computers from exploding,</span></div><div class="cm-line">            <span class="sp-syntax-comment">// we'll max out at 100k</span></div><div class="cm-line">            <span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">num</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">min</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">100_000</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-definition">Number</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">            </div><div class="cm-line">            <span class="sp-syntax-definition">setSelectedNum</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">num</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">form</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        There are <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">length</span><span class="sp-syntax-punctuation">}</span> prime(s) between 1 and <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">selectedNum</span><span class="sp-syntax-punctuation">}</span>:</div><div class="cm-line">        <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">' '</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">span</span> <span class="sp-syntax-property">className</span>=<span class="sp-syntax-string">"prime-list"</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">allPrimes</span>.<span class="sp-syntax-property">join</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-string">', '</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">span</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">p</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">isPrime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">max</span> = <span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">ceil</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">Math</span>.<span class="sp-syntax-property">sqrt</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> === <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">for</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">let</span> <span class="sp-syntax-plain">counter</span> = <span class="sp-syntax-static">2</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span> &lt;= <span class="sp-syntax-plain">max</span><span class="sp-syntax-punctuation">;</span> <span class="sp-syntax-plain">counter</span>++<span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">n</span> % <span class="sp-syntax-plain">counter</span> === <span class="sp-syntax-static">0</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">false</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-static">true</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">PrimeCalculator</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-63873f59-2 gNPXcu"><div class="sc-8dc8a3e4-0 bwSvdO"><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">result</button><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 flehAM">console</button><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform:rotate(0deg);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:350px" class="sc-63873f59-3 kgcdac"><div style="--iframe-background-color:transparent" class="sc-63873f59-4 jLUZNi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 318px;" src="./Understanding useMemo and useCallback_files/saved_resource(3).html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div><div style="--pointer-events:none;--opacity:0;--transition-delay:100ms;--child-delay:0ms" class="sc-63873f59-5 gIBqhB"></div></div></div></div></div></div></div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">I've extracted two new components, <code class="sc-1a723291-0 hSlZWR">Clock</code> and <code class="sc-1a723291-0 hSlZWR">PrimeCalculator</code>. By branching off from <code class="sc-1a723291-0 hSlZWR">App</code>, these two components each manage their own state. A re-render in one component won't affect the other.</p><p class="sc-e646da6e-0 ddhZIx">Here's a graph showing this dynamic. Each box represents a component instance, and <span class="sc-18e8c69c-0 RRYDh">they flash when they re-render</span>. Try clicking the “Increment” button to see it in action:</p><!--$--><!--/$--><div class="sc-373b72e-0 sc-851187cf-0 jKOnjE zbQFs"><div class="sc-851187cf-1 deFgFx"><div id="app" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">App</p><div class="sc-9e007f9c-2 hbbsAJ" style="opacity: 0; transition: opacity 1000ms ease 0s;"></div></div></div><div class="sc-851187cf-1 deFgFx"><div id="clock" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">Clock</p><p class="sc-9e007f9c-5 gGmRNZ">time: 13:47:57</p><div class="sc-9e007f9c-2 hbbsAJ" style="opacity: 1; transition: opacity 0ms ease 0s;"></div></div><svg class="sc-9e007f9c-7 bZwizI"><path d="
          M 258  213
          C 258 165
            350 213
            362.5    165
        " fill="none" style="stroke: rgb(163, 173, 194); transition: stroke 1000ms ease 0s;"></path></svg><div id="primecalculator" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">PrimeCalculator</p><p class="sc-9e007f9c-5 gGmRNZ">selectedNum: 14</p><button class="sc-9e007f9c-6 eXbxLf">Increment</button><div class="sc-9e007f9c-2 hbbsAJ" style="opacity: 0; transition: opacity 1000ms ease 0s;"></div></div><svg class="sc-9e007f9c-7 bZwizI"><path d="
          M 489.5  213
          C 489.5 165
            400 213
            387.5    165
        " fill="none" style="stroke: rgb(163, 173, 194); transition: stroke 1000ms ease 0s;"></path></svg></div></div><p class="sc-e646da6e-0 ddhZIx">We hear a lot about lifting state up, but sometimes, the better approach is to <em class="sc-51e913c7-0 bqvtGV">push state down!</em> Each component should have a single responsibility, and in the example above, <code class="sc-1a723291-0 hSlZWR">App</code> was doing two totally-unrelated things.</p><p class="sc-e646da6e-0 ddhZIx">Now, this won't always be an option. In a large, real-world app, there's lots of state that <em class="sc-51e913c7-0 bqvtGV">needs</em> to be lifted up pretty high, and can't be pushed down.</p><p class="sc-e646da6e-0 ddhZIx"><strong>I have another trick up my sleeves for this situation.</strong></p><p class="sc-e646da6e-0 ddhZIx">Let's look at an example. Suppose we <strong>need</strong> the <code class="sc-1a723291-0 hSlZWR">time</code> variable to be lifted up, above <code class="sc-1a723291-0 hSlZWR">PrimeCalculator</code>:</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="another-trick" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-63873f59-0 fOfHwg iXthYV"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button style="transform:scale(1);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div style="top:-6px" class="sc-ef2d918d-1 ehlMox"><div style="opacity:0" class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" style="height:4px;background:transparent" class="sc-477a4b02-1 jsWuH"><div style="background:linear-gradient(90deg, hsl(333deg, 100%, 55%), hsl(289deg, 100%, 45%), hsl(245deg, 100%, 60%));clip-path:polygon(
      0% 0%,
      0% 0%,
      0% 100%,
      0% 100%
    )" class="sc-477a4b02-2 dWkRDI"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform: scaleY(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADok6DZi2AsA5jDIAJIgFdGcFgF8WfAcIAmnCgFowJOJJky5TVgGEoRAgGsj_QUMwA9G4envay9M4sAAqMdDAunFAEWlAWTD4m_gExcQlJKWmMYTIBASwAKoyctmBMgtqM0bG08YnJqWTpEORELJwsaDowLMQRJJRkiDLEtqxRQzktee2FLAC87GJkmC20RAAUi635HUwAlNIkMmBaJDwQpCzoaPtnijIsI6RwrGRx6ywtHAYOU4q9Lh8WKUWC4BMMtGgWAB3CBkAAWfRYcC0qM4ACNYCw8dxPMp-LdTF93IwADSQ6HE4GUx7o4Z_FosIhgFjmACeUxInxmPyJJLJ2hIplh1IBqjIACExeTJdKmAAxXyglr7dkwC4OQUsURkHSC_aQz4AHlMEAAbliyLzYGtgEpiV5xRTVY19PoAHwWz4sS3BLwsXUu3WGAIBw1B4PzURHZYFTqNGOBy0BG222OffUkfQG4WsOWKj3KqVEakagRa4YbHVxN5rP3vQ0llhohp6DZyzQ6OBNloFz6QiDc_bdwfBlgARgATG9gIHoSgWFAIMo0axeTAoO4kUZ0ntGLISMo4IHjabhGi4FB9gBWAAMphgynnL5fAFIWABOX8zjCT5DH3YEWAnFgpx7Wc5wADmXVcygAERSKAiSgLRhm6cM0WGTgwAoM8iFIa81FvIR70fBcFzfD8WAANl_ACFx_YDITAqAIJXOMoVQmAYDQGBGgJbC-lYWRtzIciTTPO8H32Wj6M_Odvz_eCgJAgwZCLK4SBuO4_keIEQTBJCO2-VgAG1dRpLE1HrABdAEOG4bZTIAZTICwYH2cYjxQ3zXlHFhITcnhMFMgBRMAwBgHh9ledY214-NO26YjbUSABJSkNhRSUiCRTBgTIHLyBE7LH2S1t23jT4yvrfyYEC4KzlC0D7LU79Qtk29atSwNPkK0xiswAhYE4RgKqyxJ9kyqrctMTqdMNfR7Ospy-sNG95N1S49JkGAAA95FYd8wE4FJWGeCQQBpGg4Hlbppt5JAru4mANpoSVTpwPBQBmCgqEQGgIgUCLeF8MKQFEdypBAS4nAUJQCHhig2FI1hDGMPx4Z4SwxtoAJJogCYwhR1hEcCUQyomuAryRxwIepkBAh-J14AZpnkdZp4MAyQQaYCZ5EYhO4rK-chOG6ESATG5IWnITA5Wi2BlYVXk8v2ERsaEAtO34IhWA2dGuEx7H9mB2XxkYAsZGN7ZRD-xh9ktZ4oT9C4Hqel6SDej7EmBH7OdgOAeaQIHSBBshqDxIhTF5eqBk4UwbQvRAWBfNATsuT5aGm5RuiznO890mQAGInZT_Ctx3LOep_Q6q5rtscxTtA04z5RG8Y3P85YWhuksOvpMb9SW5ICb3DDNKBiIOBUQeEgs_xOBqy0ChB86NAs_ggfIViceWAP8vDULxhi9X7PB679Pul72_IVqchrE4YeoH5IfSEXruCBgFPWojBBDzxtHANAqRv5gFgOfT4MDTpEwgKIe4pAs7ECwrQEgg9EhbhIJYVEMBaBwHQRMESU9Uh4n3CncBkDODfwJCEQel9r6WATmQTotB96H0NK_MglgkQwHrpMFgr4XxT26IMVg8974924XA8Mp1-G4OUDfABlVGCDxRKYdEWdGKiFoFPRE88WEj13nogALDw_QvsIDPVeowd6iBPoh0eoMAkEACABG6O-E6mAdy0CgFHQgMcJjUEtAAQhQgAeRcOUAAmlEaKXYyCBNjJaAJGFUgXjWIjSgiM8zBnwmnQpVoWg-RGGiaaZVckgAAKrlDVJYeCBTMzlP6AHFotTbTkyROdRG0tY61O0eiNY74ekAIERAHRaJ7LdGXokSwcACCJBgGsOcmAXytL4paP4ZBYB-hQh4LQmssx7IOZCLMxTTCFMtAnJOpTgwd2mbUp2BSsw5luQEe5vJ0kBEyX6Wx9iA6OKDl9H6dM1CR3wMDMJYMAgACpIQAClF5oiEHoFwQJOEwk8p5TYZVIQ7jIGgEhpQkQUpwGipEowuBaAmgIUmjNSbYoEJYAgjNLCQrIAEGQCLeUkARfZBFiBEBUOATAYVorCLERTgnE6SyIAAC9H5ZwTowd8jA2FEHPnpBFKdTE33ERXEgmT7I_NrkIk-Tcp4WvnpucYo8rUN3nJgJ8g8BEwDxJ4VE1gY5LL2CbNEqq-jkAgLgzgTIJG0GUPZNAni5KSpYD098RB7IrJINlOA9k4C2k_GAuxdCGGz08MwzgCqRlognr-CRJApHmq3p0Eg9kKAnR8vDHN-4ErSJfjHLO3R8KxDIEY-yaI5yjoXKOgAzKOixo6nyjsYinIgtoRIwOKgIqoe8iTw08AIpgpgp7V2xvZSuAB9M94w20pzsdWCwK9-0bw6IAk1JR9WKiXgQPCRDhhh3gCwflMg7WQlkSGuc_cFF8Pfp_b-QgADqJsroaqEDm6ocAlkiQnFPGQPkCTDHnpW6tzdITqs1ey6sqRSUwHQRRzgVGp7ohTq25Rm5VFZ1gERQepGRLao4QILOU7c5YmrNMrsikVLZz_AuJ87EGOMEQCQE2-xECpB-JYLklhHTCTeGQSk89uNavYZwxuQmn2ieovsCTLFXyydfSQRFMJWWCD4XoQDJAAACUGroAJTl5j-0BYMIbIEh0w2k4CMAIFnHQj4hABBcwEJEiHpqmAS0ljVGHh4JygKYT1eI-GYES3FBcBtAzAMLmQXWhWwDFdClBwRwi9HfkHlBv9WdFMgMSM1_1tCoFZ0-lAd0pa7Oef9d5_Dva35XRg1neDaXQuD3C5FwEjAYtxZjnAVLwXkubZC5YFoNoTm5fy1VmrpW6gWEq1yarBsutv3qyfMRt3-GtZYO1wuUAntIIgb1owiQBskmwx5vzPn55-em8IILIWwsRaiyt3Wa3yAbcS1tjVO3ktco_AULVgi8sxwK1d07fEysXaECdm7E3-H3ZdRYprFOlmOlgG187H26c9foX1v7g3DpAv9oHZxwdvqPWTG0VMTAAbBNhaDcG51NjuSFsIAmZBigGVuKgwUwuTiFGSvPTs1lgSwB4DAUwAA5E5nayCeS7Ybk3JyXIbChlFYE3lgo9QdpZWYfQDxHF7CwLaXXGj7FgKwYgtxZUbAXBIL4of5aWgcgbigNvDFR40QAahTxZeMUEFpwCONbCUxEOop3jH973mBBhwDRHn6P9tB6gU4pCI-FF5Lmh2Y8q0ZW29BktJQ6hmS1RMFqSQE5BT4kNFeycqh8msw96gJ3q0kit7DQalptZiMh-0En4jJf8ZqrYRdPr7tRvTe0D0g1BqpAXBVIvGs4A-wYCrvIC2IafEz-fGhOUXoaBRAP-DwIKRIk9A8YWBTpIFE5H46QX9X9oRBEhADwh5y1OQt4JIvwXxPBt8Gog9x9BANgABZCwNEHYbofYHqM9b8F8eyY_SfO_H_TAdtOUTAXfPUVaV_MKSAs_MqS3ePI_E5fyE5ZghqX0dAjMSArMDvJfS0NAOfCoQdAiUQRQEvZobmWAC8dEQwL_MEOAN4KhMgQRSgecUNPTA_a3Y_fQAUFg4AIQYQU_V_S0CBaoEYVTOAY3D-VfEAdQloSwTcH4bZFgz4YABQuICObAIgIglDYQM4aws_LMOwkgTvLMSQzMYQ_MQHQyNXSCHPRQ_yM4HXKWQuE6AEPA9ECaIRR8QogguAAAR2YCyJ2k-Cz0FDWEaJYCXCLyNCb0FDIEYGwkHmsN7QD0wJDw0QBAj2T1lUtA2DyMj0GOIjTwzyDHqJYD_GmPlkaI2BfDmPjD2kFBcRfT4msKOl2naPDC6N2IOJAMiEumuigDmEUJTFOE0R5wcScR2J-lDE8HFxhVCSlypllx4HlxEC2Epn5mJ2hkyHMCsBsA2xBOV1SOMkFDeP2CUF1AMDmK2OgkzEREmkjScJcNqUmhCB8IamABBOHCTSoirVoC4UZj6ANkiODACASMNALDOLOguJgCuhuhhBLXukejsV51BX53BUejgGqFMHlQZQMi3ABlIAly-LjjBnnkRm6EgFkAoAABlSI0AYgTZu0V5EYOcvpdJHiQVniBcfp_5PBOBVBpSSBZTKopdFSQBOkYB9TYYRTJQLTLAv8iBsBu1EYICxwQBC5uhXTEZvE_o_FcB_SG8QB3xhI_o7hyYmYs555AzFdQyQAAA9BCTZTZaMviRGRXImAQDM7M-CXMrZB6QMQsrYJZdGCANAMgZM2GTMixCs_M-MRGcEmAawWwDMhcTABccsysziAM2GcZFCISSgd8RM-AV04APSGxXk4FPnF4n6CgegZ9agc2XyDHdySwOjNAEAfQIAA"><input name="query" type="hidden" value="file=%2FApp.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height: 39.0625rem;" class="sc-63873f59-1 bNfnmT"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-tabs sp-c-dyHYiL" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container sp-c-gGbYbQ" role="tablist"><button aria-selected="true" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="true" role="tab" title="/App.js" type="button">App.js</button><button aria-selected="false" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="false" role="tab" title="/PrimeCalculator.js" type="button">PrimeCalculator.js</button><button aria-selected="false" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="false" role="tab" title="/Clock.js" type="button">Clock.js</button></div></div><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:r8:" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:r8:" style="display: none;">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:r8:" style="display: none;">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼj2"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:r8:"><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">React</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'react'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-plain">getHours</span> <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'date-fns'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">Clock</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'./Clock'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">PrimeCalculator</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'./PrimeCalculator'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-comment">// Transform our PrimeCalculator into a pure component:</span></div><div class="cm-line"><span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">PurePrimeCalculator</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">memo</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">PrimeCalculator</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">App</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">time</span> = <span class="sp-syntax-definition">useTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-comment">// Come up with a suitable background color,</span></div><div class="cm-line">  <span class="sp-syntax-comment">// based on the time of day:</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">backgroundColor</span> = <span class="sp-syntax-definition">getBackgroundColorFromTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">div</span> <span class="sp-syntax-property">style</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-property">backgroundColor</span> <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">Clock</span> <span class="sp-syntax-property">time</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">PurePrimeCalculator</span> <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">div</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">getBackgroundColorFromTime</span> = <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">hours</span> = <span class="sp-syntax-definition">getHours</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">hours</span> &lt; <span class="sp-syntax-static">12</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-comment">// A light yellow for mornings</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-string">'hsl(50deg 100% 90%)'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">else</span> <span class="sp-syntax-keyword">if</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">hours</span> &lt; <span class="sp-syntax-static">18</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-comment">// Dull blue in the afternoon</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-string">'hsl(220deg 60% 92%)'</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-keyword">else</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-comment">// Deeper blue at night</span></div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-string">'hsl(220deg 100% 80%)'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">useTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setTime</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">Date</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useEffect</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">intervalId</span> = <span class="sp-syntax-plain">window</span>.<span class="sp-syntax-property">setInterval</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-definition">setTime</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-keyword">new</span> <span class="sp-syntax-plain">Date</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-static">1000</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">    <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">      <span class="sp-syntax-plain">window</span>.<span class="sp-syntax-property">clearInterval</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">intervalId</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">}</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-activeLine cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-plain">time</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">App</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-63873f59-2 gNPXcu"><div class="sc-8dc8a3e4-0 bwSvdO"><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">result</button><button class="sc-ac600c13-0 gEahXK sc-8dc8a3e4-1 flehAM">console</button><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform: rotate(180deg); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:350px" class="sc-63873f59-3 kgcdac"><div style="--iframe-background-color:transparent" class="sc-63873f59-4 jLUZNi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 318px;" src="./Understanding useMemo and useCallback_files/saved_resource(4).html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div><div style="--pointer-events:none;--opacity:0;--transition-delay:100ms;--child-delay:0ms" class="sc-63873f59-5 gIBqhB"></div></div></div></div></div></div></div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">Here's an updated graph, showing what's happening here:</p><!--$--><!--/$--><div class="sc-373b72e-0 sc-851187cf-0 jKOnjE zbQFs"><div class="sc-851187cf-1 deFgFx"><div id="app" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">App</p><p class="sc-9e007f9c-5 gGmRNZ">time: 13:47:57</p><div class="sc-9e007f9c-2 hbbsAJ" style="opacity: 1; transition: opacity 0ms ease 0s;"></div></div></div><div class="sc-851187cf-1 deFgFx"><div id="clock" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">Clock</p><div class="sc-9e007f9c-2 hbbsAJ" style="opacity: 1; transition: opacity 0ms ease 0s;"></div></div><svg class="sc-9e007f9c-7 bZwizI"><path d="
          M 258  213
          C 258 165
            350 213
            362.5    165
        " fill="none" style="stroke: rgb(103, 228, 166); transition: stroke 0ms ease 0s;"></path></svg><div id="pureprimecalculator" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">PurePrimeCalculator</p><p class="sc-9e007f9c-5 gGmRNZ">selectedNum: 28</p><button class="sc-9e007f9c-6 eXbxLf">Increment</button><div class="sc-9e007f9c-2 hbbsAJ" style="opacity: 0; transition: opacity 1000ms ease 0s;"></div><div class="sc-9e007f9c-8 kFuJyF"><p class="sc-9e007f9c-9 hXwRRc" style="right: 16px;">Pure Component</p></div></div><svg class="sc-9e007f9c-7 bZwizI"><path d="
          M 489.5  213
          C 489.5 165
            400 213
            387.5    165
        " fill="none" style="stroke: rgb(163, 173, 194); transition: stroke 1000ms ease 0s;"></path></svg></div></div><p class="sc-e646da6e-0 ddhZIx">Like a force field, <code class="sc-1a723291-0 hSlZWR">React.memo</code> wraps around our component and protects it from unrelated updates. Our <code class="sc-1a723291-0 hSlZWR">PurePrimeCalculator</code> will only re-render when it receives new data, or when its internal state changes.</p><p class="sc-e646da6e-0 ddhZIx">This is known as a <em class="sc-51e913c7-0 bqvtGV">pure component</em>. Essentially, we're telling React that this component will always produce the same <em>output</em> given the same <em>input</em>, and we can skip the re-renders where nothing's changed.</p><p class="sc-e646da6e-0 ddhZIx">I wrote more about how <code class="sc-1a723291-0 hSlZWR">React.memo</code> works in my recent blog post, <a class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN" href="https://www.joshwcomeau.com/react/why-react-re-renders/">“Why React Re-Renders”</a>.</p><aside class="sc-7447ca5f-0 sc-7447ca5f-2 fiBCHf htqiLd"><div class="sc-7447ca5f-5 hqfDOf"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg></div><strong class="sc-7447ca5f-4 dktsaa">A more conventional approach</strong><div class="sc-7447ca5f-6 htjLEx"><p class="sc-e646da6e-0 ddhZIx">In the example above, I'm applying <code class="sc-1a723291-0 hSlZWR">React.memo</code> to the <em class="sc-51e913c7-0 bqvtGV">imported</em> <code class="sc-1a723291-0 hSlZWR">PrimeCalculator</code> component.</p><p class="sc-e646da6e-0 ddhZIx">In truth, this is a bit unusual. I chose to structure it this way so that everything was visible in the same file, to make it easier to understand.</p><p class="sc-e646da6e-0 ddhZIx">In practice, I often apply <code class="sc-1a723291-0 hSlZWR">React.memo</code> to the component <em class="sc-51e913c7-0 bqvtGV">export</em>, like this:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">jsx</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 206px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">// PrimeCalculator.js
function PrimeCalculator() {
  /* Component stuff here */
}

export default React.memo(PrimeCalculator);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token comment" style="color: var(--syntax-comment);">// PrimeCalculator.js</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">PrimeCalculator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token comment" style="color: var(--syntax-comment);">/* Component stuff here */</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">export</span><span class="token plain"> </span><span class="token keyword" style="color: var(--syntax-str);">default</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function" style="color: var(--syntax-fn);">memo</span><span class="token punctuation">(</span><span class="token plain">PrimeCalculator</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">Our <code class="sc-1a723291-0 hSlZWR">PrimeCalculator</code> component will now always be pure, without us having to tinker with it when we go to consume it.</p><p class="sc-e646da6e-0 ddhZIx">Should we ever need a non-pure version of <code class="sc-1a723291-0 hSlZWR">PrimeCalculator</code>, we can export the underlying component as a named export. I don't think I've ever needed to do this though.</p></div></aside><p class="sc-e646da6e-0 ddhZIx"><strong>There's an interesting perspective-shift here:</strong> Before, we were memoizing the result of a specific computation, calculating the prime numbers. In this case, however, <em class="sc-51e913c7-0 bqvtGV">I've memoized the entire component instead.</em></p><p class="sc-e646da6e-0 ddhZIx">Either way, the expensive calculation stuff will only re-run when the user picks a new <code class="sc-1a723291-0 hSlZWR">selectedNum</code>. But we've optimized the parent component rather than the specific slow lines of code.</p><p class="sc-e646da6e-0 ddhZIx">I'm not saying that one approach is better than the other; each tool has its spot in the toolbox. But in this specific case, I prefer this approach.</p><p class="sc-e646da6e-0 ddhZIx">Now, if you've ever tried to use pure components in a real-world setting, you've likely noticed something peculiar: <strong>Pure components often re-render quite a bit,</strong> even when it seems like nothing's changed! 😬</p><p class="sc-e646da6e-0 ddhZIx">This leads us nicely into the second problem that <code class="sc-1a723291-0 hSlZWR">useMemo</code> solves.</p><aside class="sc-7447ca5f-0 sc-7447ca5f-1 fiBCHf epenG"><div class="sc-7447ca5f-5 hqfDOf"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><strong class="sc-7447ca5f-4 dktsaa">Even more alternatives</strong><div class="sc-7447ca5f-6 htjLEx"><p class="sc-e646da6e-0 ddhZIx">In his blog post <a href="https://overreacted.io/before-you-memo/" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN">“Before you memo()”</a>, Dan Abramov shares another approach based around restructuring the app using <code class="sc-1a723291-0 hSlZWR">children</code>, to avoid needing to do any memoization.</p><p class="sc-e646da6e-0 ddhZIx">Thanks to Yuval Shimoni for pointing this out!</p></div></aside><div id="use-case-two-preserved-references" class="sc-89a92fe2-0 ksGsFy"><h2 style="position:relative" class="sc-487e4335-4 SHCsL"><a name="use-case-two-preserved-references-4" id="use-case-two-preserved-references-4" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#use-case-two-preserved-references-4" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>Use case 2: Preserved references</h2></div><p class="sc-e646da6e-0 ddhZIx">In the example below, I've created a <code class="sc-1a723291-0 hSlZWR">Boxes</code> component. It displays a set of colorful boxes, to be used for some sort of decorative purpose.</p><p class="sc-e646da6e-0 ddhZIx">I also have a bit of unrelated state, the user's name.</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="reference-trouble" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-23dd2945-0 fOfHwg ixXtDl"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button style="transform:scale(1);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div style="top:-6px" class="sc-ef2d918d-1 ehlMox"><div style="opacity:0" class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" style="height:4px;background:transparent" class="sc-477a4b02-1 jsWuH"><div style="background:linear-gradient(90deg, hsl(333deg, 100%, 55%), hsl(289deg, 100%, 45%), hsl(245deg, 100%, 60%));clip-path:polygon(
      0% 0%,
      0% 0%,
      0% 100%,
      0% 100%
    )" class="sc-477a4b02-2 dWkRDI"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform: scaleY(1); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADokZdBsxYAhIgA94LPgOGYA9CvVxJMmWACuJHhFIt0aABQBKFsBksWxEnFYBtEp1oYABoWOBgyADkAmABdFgBedjEyTDMwgGUyTgp7ISFHaRJ3T28WHwAjNQB1CAATMgALELCyAxr6hrjEjm4UtJhM7Jh7AEYCtxYJktY6hKTe1LCASVqnQvcJ3V0WABVGAE8PBs4SAHMIM9CBGBYiMBZG-BuAN04oM3gAQinSUsrDOY-CbuYCaWCqRAsf7tRohcrcADWp34FlqkKEDTgUHsAGYACwAVlqMFOLBGAAZyQBSFgE6mOIQsAC-QWBLjBMAhLBxcMRyKIqPRmOxACYAGzk4mkinUlh4-mMlls0FgcGQka8ghIlEkNHCYX2OlSsmUmkSqkM5msoosGLrSY20RkMyMIr2NkAHgAfGz3B6DBp_vB4sAg3AmSxdD6be4NjHYx6wlZSNHY2mWB6oJxyjAoCwGmRaFAAGJMEMAAwAJMA6kyALT-QLlpmp9NpqKBRC-hO6LM5qCttsei5oMxkbtpuoV6u1hvRZsT2NkfZoGDxKQgCiqccgRfuV7vNfARswJl724kADCxzOR_sMGelDIzniXpc5_cLQ7wwfT8wWUYU5wkwA8PnGeM2yZM8INjKNF0zbNc3zQsSzLYAqxrWp63-OsAHc6kaZtBzbFhiwgRg_jUFh8I6LsYL9XtEIHeCRzHc8p3QmcsLrHCaMI6CSKXFc1w3RgTiAjdz1oC4QxGATBJYWhOFUEMCXkwTvBgNAQ3JTByTk89QKPaECIadSSNIa9xLvX9yBfN9XHo9MWjaUz7AiMxaBzRh70fch_04QDgKMxxwIU5lzLTOCYI9XQkzIawSGI2LW3A6CZE5BRWGJMBODMKBWDsCQQCCGg4CUC5Av2JBcqgMIWRoXVORwPBQE8CgqEQGh6CYVgeh4TR-EEUTkg3Qp5F69kCFEIY2CIIhWAjLRBBEZI61qARdAIKAICfYwSAmxQNz0UQWkwAg4DgMa5B6o6QD0bx9lgOBzsu66DtuwqMEG7Rjt0Ox3pkaYPFILILhgRg5g2ghPL_ICyAAUVgQJyCUfYVlyfgFvyQpgax1hEmmrgKDmhb7HazhwcYcCZHxzBRCanyPTsSMvQKEqyoq_wDhqt56tKx7nte1rCFBp9qEwMM8LEjAIffG0-IadVTXtWoIDgNAs32SFVU5e1Tk4NB1TFNBVEKdKSElqjHPcBoYAgU4C2V8lTftSpGGJRg6zEtW0khPFXYmeEtX5QV8yxXEjRJE1ZTpC1zZMLwYGTIobZYNBOFqNWzkhHERUDm01Y1rWdfBe1ddUdbyOThLSEhYh3loEh7TeB2SDrCAKFoOB66fCGE4OkhR1YNOlMAi4eIWsgBEhEUA7NmQmQ59Wuaq3m6tPUrR3KHaCF0C5iVUTACyLJA2rFzqQA9T4ABEAHlLx2ABNAAFBHkKLaMPRPvMszOdcQCUA3K2b-XBajJUCFkI4gUWgAIAKo7GLHWAAHMAz0kDOAsBPAA54u1cJZQ3CDcgT4AGK3iMSXBBAYB4VMiEC4ncIBvDrHAAgbw1wjD0mg-MHoEpkFgF6G-RAYYozILFXh_CJixTtpnEBlRaj7GSmrZ4LApyiXmjuL0sUlEgN0HIhRMgpEoS9MvcqlUeaIFqvzEAp1gIXRFu1cWXVdAACoJgACkiBwAaEIOALBLxpGnoIS86R0hJBaBMAsZA0A9y2LhOJOBPENFwsQQIeVzqbTsVtAJAg6x2O9k8MgugZDOKKSQZxIRnGIEQDmMATBggsEqYgTgYAKCQzTjhOAEAABeFxTiQndp7SeC8SDQWcfLdwY9zgkEhOSAeP84REHkeM_M9tHZkGdlSAeejlk7RINQu2DsnZkkwASe0eEYDlARJ3OstTyDMNoOohovTIQnASq3TgYRagDzoKcEIaAIA8BdPU3BxIiAhFYSQV4cBmjPFJGnIumtODayhFAIRCJ7RKUrorDZ3yh5jjhGOaeJAQhbgAlwZouYa7LNueslRJA7aME7gPNAIQGganzCKVlPJ8x4lZQSVlYpllEEfIwVURBcLS0Nv0maCI8JMC-YvGQABifGIQlUAH11V7O3Ms9WRAsy12mSouA-qhgDxkC45QHyAUPDtoEUIy5noNNKdstOGcs7PLJCbYZ7gaU3ICNAZFQgqgLVyh7IQzQThwGYRDCAYBzXkGzLAZZ2KY6bKDvKiGuT9VZmiTAeuObDZhAHo0ZZpK6yt1OEa2ALS3aZq9pUMggTc6myuDtWo4dsSSmjrKEUBJ46KvIIwRAJAyaICzN4Osdw6zLlXM4MgHb2n1snk2meZJW0mvbZ2-w3bSSx3pAmy1_jvDaBpb4kpMgAACfrcpUOpaDf10koBBpDWQMNtR9qfkYAQSELpsRCF0Ge3QuFQ2BVqMB0DHsY3SUqFAWo5zyg0swCBsAYART5DZLUxgSkyC5BQ2hnGEw_W4VWUciUsyiMPsFvmrBTAlJQHLg-hFJdNBvCgMHdFg6r03u4DcNOPGn0vsgx--0cBv2_sYP-wDoM4AQbfWBuT766yBF9rQBDSH8PoccJhuj2Q8N3AI2FTQD6SOHNpXSCjNo_XUchKO7DbxGN3OY0inWbGOMJuvQ-29fHKN3NyoJ9Er732ftCOJlgf7cjSfILJkD8mPaKbA_k04-VArqdBshgzWmdP2dw0ITThGrMmdI7S-UlnfVUcdTRuz9HHNkCrsXFzrGoDscRObExq9zGWM3iAAML1cBn1FsQy-h0-rJB-itGa4hCimAsCnZQah4D2FBGGZkzg05OhdG6T0SiPATrgN-ABUtcIy1XIwLhbZQwLZekpBw9h_iZCevAOhTVVD2RYO6JyHolHngRDAfYIYD6ckiumbaHz9vREO2oSSTlPyVZDPdyr4ZFzRTbKFcyWiIDPFSgmzKk0cp5QKvMHgmBAgPPsL19mpUV5mOqhYvm3WM5ak4EBFqpABsOMvmnDcJ4NyQg3HAE4tRGeyrQPwbANcNzWg2CAJSFxeeTBAPvF7LVJcTA3MSVcTVLC7SukgZZ0vJs7j5yAAAeiMZBelOElTZCNXo60BDy43Gbi3ulySq_jLbngzDpoQDQGQXXxuTd4kt273cNolQ2nVw-G-WlKDEm1_AeXwBoJLyp6Y7mtOutQVKl3RFFBqBEyGPku3hs0AgCZEAA"><input name="query" type="hidden" value="file=%2FApp.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height: 39.0625rem;" class="sc-23dd2945-1 hlXevX"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-tabs sp-c-dyHYiL" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container sp-c-gGbYbQ" role="tablist"><button aria-selected="true" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="true" role="tab" title="/App.js" type="button">App.js</button><button aria-selected="false" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="false" role="tab" title="/Boxes.js" type="button">Boxes.js</button></div></div><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:rc:" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:rc:" style="display: none;">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:rc:" style="display: none;">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼn4"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:rc:"><div class="cm-activeLine cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">React</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'react'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">Boxes</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'./Boxes'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">App</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">name</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setName</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-string">''</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">boxWidth</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setBoxWidth</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">1</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">id</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useId</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-comment">// Try changing some of these values!</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-plain">boxes</span> = <span class="sp-syntax-punctuation">[</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-property">flex</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-plain">boxWidth</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-property">background</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">'hsl(345deg 100% 50%)'</span> <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-property">flex</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-static">3</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-property">background</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">'hsl(260deg 100% 40%)'</span> <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">{</span> <span class="sp-syntax-property">flex</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-static">1</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-property">background</span><span class="sp-syntax-punctuation">:</span> <span class="sp-syntax-string">'hsl(50deg 100% 60%)'</span> <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">,</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">]</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  </div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">Boxes</span> <span class="sp-syntax-property">boxes</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">boxes</span><span class="sp-syntax-punctuation">}</span> <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      </div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">section</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">label</span> <span class="sp-syntax-property">htmlFor</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">`</span><span class="sp-syntax-punctuation">${</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-string">-name`</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">          Name:</div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">label</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">input</span></div><div class="cm-line">          <span class="sp-syntax-property">id</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">`</span><span class="sp-syntax-punctuation">${</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-string">-name`</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">type</span>=<span class="sp-syntax-string">"text"</span></div><div class="cm-line">          <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">name</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">            <span class="sp-syntax-definition">setName</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">label</span> <span class="sp-syntax-property">htmlFor</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">`</span><span class="sp-syntax-punctuation">${</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-string">-box-width`</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">          First box width:</div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">label</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">input</span></div><div class="cm-line">          <span class="sp-syntax-property">id</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-string">`</span><span class="sp-syntax-punctuation">${</span><span class="sp-syntax-plain">id</span><span class="sp-syntax-punctuation">}</span><span class="sp-syntax-string">-box-width`</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">type</span>=<span class="sp-syntax-string">"range"</span></div><div class="cm-line">          <span class="sp-syntax-property">min</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-static">1</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">max</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-static">5</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">step</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-static">0.01</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">value</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">boxWidth</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">          <span class="sp-syntax-property">onChange</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">            <span class="sp-syntax-definition">setBoxWidth</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-definition">Number</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">event</span>.<span class="sp-syntax-property">target</span>.<span class="sp-syntax-property">value</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">          <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">section</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">App</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-23dd2945-2 gNwEKD"><div class="sc-23dd2945-6 dnNAc"><div class="sc-8dc8a3e4-0 bwSvdO"><div style="cursor:default" class="sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">preview</div><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform: rotate(0deg); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:360px" class="sc-23dd2945-3 eHxGMO"><div class="sc-23dd2945-4 dhYXHE"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 322px;" src="./Understanding useMemo and useCallback_files/saved_resource(5).html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div></div></div></div><div class="sc-23dd2945-7 ewsAGD"><div class="sc-8dc8a3e4-0 bwSvdO"><div style="cursor:default" class="sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">console</div><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform: rotate(360deg); opacity: 0.7;" class="sc-ac600c13-0 sc-2411c85d-0 sc-402bcfb2-0 gEahXK eskxwW jBmOjb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line></svg><div class="sc-c473a104-0 jSpzMq">Clear Console</div></button></abbr></div></div><div style="padding-top:16px;padding-bottom:16px" class="sc-23dd2945-3 eHxGMO"><div class="sc-23dd2945-4 dhYXHE"><div class="sc-23dd2945-5 fxJDIN"></div></div></div></div></div></div></div></div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx"><code class="sc-1a723291-0 hSlZWR">Boxes</code> is a pure component, thanks to a <code class="sc-1a723291-0 hSlZWR">React.memo()</code> wrapping around the default export in <code class="sc-1a723291-0 hSlZWR">Boxes.js</code>. This means that it should only re-render whenever its props change.</p><p class="sc-e646da6e-0 ddhZIx"><em class="sc-51e913c7-0 bqvtGV">And yet,</em> whenever the user changes their name, <code class="sc-1a723291-0 hSlZWR">Boxes</code> re-renders as well!</p><p class="sc-e646da6e-0 ddhZIx">Here's a graph showing this dynamic. Try typing in the text input, and notice how both components re-render:</p><!--$--><div class="sc-373b72e-0 sc-851187cf-0 jKOnjE zbQFs"><div class="sc-851187cf-1 deFgFx"><div id="app" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">App</p><label for="red-boxes-name">name<!-- -->:</label><input type="text" value="" class=""><div style="opacity: 0; transition: opacity 1000ms ease 0s;" class="sc-9e007f9c-2 hbbsAJ"></div></div></div><div class="sc-851187cf-1 deFgFx"><div id="redboxes" class="sc-9e007f9c-0 gLaYoj"><p class="sc-9e007f9c-3 iBlhCZ">RedBoxes</p><p class="sc-9e007f9c-1 kaCWrA">Props:<!-- --> { <!-- -->boxes<!-- --> }</p><div style="opacity: 0; transition: opacity 1000ms ease 0s;" class="sc-9e007f9c-2 hbbsAJ"></div><div class="sc-9e007f9c-8 kFuJyF"><p class="sc-9e007f9c-9 hXwRRc">Pure Component</p></div></div><svg class="sc-9e007f9c-7 bZwizI"><path d="
          M 375 219.1875
          L 375   171.1875
        " fill="none" style="stroke: rgb(163, 173, 194); transition: stroke 1000ms ease 0s;"></path></svg></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">What the heck?! Why isn't our <code class="sc-1a723291-0 hSlZWR">React.memo()</code> force field protecting us here??</p><p class="sc-e646da6e-0 ddhZIx">The <code class="sc-1a723291-0 hSlZWR">Boxes</code> component only has 1 prop, <code class="sc-1a723291-0 hSlZWR">boxes</code>, and it appears as though we're giving it the exact same data on every render. It's always the same thing: a red box, a wide purple box, a yellow box. We <em>do</em> have a <code class="sc-1a723291-0 hSlZWR">boxWidth</code> state variable that affects the <code class="sc-1a723291-0 hSlZWR">boxes</code> array, but we aren't changing it!</p><p class="sc-e646da6e-0 ddhZIx"><strong>Here's the problem:</strong> every time React re-renders, we're producing a <em class="sc-51e913c7-0 bqvtGV">brand new array</em>. They're equivalent in terms of <em class="sc-51e913c7-0 bqvtGV">value</em>, but not in terms of <em class="sc-51e913c7-0 bqvtGV">reference</em>.</p><p class="sc-e646da6e-0 ddhZIx">I think it'll be helpful if we forget about React for a second, and talk about plain old JavaScript. Let's look at a similar situation:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 264px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">function getNumbers() {
  return [1, 2, 3];
}

const firstResult = getNumbers();
const secondResult = getNumbers();

console.log(firstResult === secondResult);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token number" style="color: var(--syntax-bool);">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> firstResult </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> secondResult </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">getNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">log</span><span class="token punctuation">(</span><span class="token plain">firstResult </span><span class="token operator" style="color: var(--syntax-str);">===</span><span class="token plain"> secondResult</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">What do you think? Is <code class="sc-1a723291-0 hSlZWR">firstResult</code> equal to <code class="sc-1a723291-0 hSlZWR">secondResult</code>?</p><p class="sc-e646da6e-0 ddhZIx">In a sense, they are. Both variables hold an identical structure, <code class="sc-1a723291-0 hSlZWR">[1, 2, 3]</code>. But that's not what the <code class="sc-1a723291-0 hSlZWR">===</code> operator is actually checking.</p><p class="sc-e646da6e-0 ddhZIx">Instead, <code class="sc-1a723291-0 hSlZWR">===</code> is checking whether two expressions <em>are the same thing.</em></p><p class="sc-e646da6e-0 ddhZIx">We've created two different arrays. They may hold the same contents, but they're not the same array, in the same way that <em class="sc-51e913c7-0 bqvtGV">two identical twins are not the same person.</em></p><span type="default" class="sc-9a7b0d0-0 dhEZub"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%27542.6666666666666%27%20height=%27389%27/%3e"></span><img alt="Illustration of two identical-looking people saying “we&#39;re different people!”" src="./Understanding useMemo and useCallback_files/twins.png" decoding="async" data-nimg="intrinsic" class="sc-9a7b0d0-2 bSTxZG" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" srcset="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Ftwins.png&amp;w=640&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Ftwins.png&amp;w=1200&amp;q=75 2x"><noscript><img alt="Illustration of two identical-looking people saying “we&#x27;re different people!”" srcSet="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Ftwins.png&amp;w=640&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Ftwins.png&amp;w=1200&amp;q=75 2x" src="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Ftwins.png&amp;w=1200&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="sc-9a7b0d0-2 bSTxZG" loading="lazy"/></noscript></span></span><p class="sc-e646da6e-0 ddhZIx">Every time we invoke the <code class="sc-1a723291-0 hSlZWR">getNumbers</code> function, we create a brand-new array, a distinct thing held in the computer's memory. If we invoke it multiple times, we'll store multiple copies of this array in-memory.</p><p class="sc-e646da6e-0 ddhZIx">Note that simple data types — things like strings, numbers, and boolean values — can be compared by value. But when it comes to arrays and objects, they're only compared by <em>reference</em>. For more information on this distinction, check out this wonderful blog post by Dave Ceddia: <a href="https://daveceddia.com/javascript-references/" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN">A Visual Guide to References in JavaScript</a>.</p><div size="48" class="sc-49562803-0 jjEvuZ"></div><p class="sc-e646da6e-0 ddhZIx"><strong>Taking this back to React:</strong> Our <code class="sc-1a723291-0 hSlZWR">Boxes</code> React component is also a JavaScript function. When we render it, we invoke that function:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">jsx</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 422.25px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">// Every time we render this component, we call this function...
function App() {
  // ...and wind up creating a brand new array...
  const boxes = [
    { flex: boxWidth, background: 'hsl(345deg 100% 50%)' },
    { flex: 3, background: 'hsl(260deg 100% 40%)' },
    { flex: 1, background: 'hsl(50deg 100% 60%)' },
  ];

  // ...which is then passed as a prop to this component!
  return (
    &lt;Boxes boxes={boxes} /&gt;
  );
}</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token comment" style="color: var(--syntax-comment);">// Every time we render this component, we call this function...</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token comment" style="color: var(--syntax-comment);">// ...and wind up creating a brand new array...</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> boxes </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> flex</span><span class="token punctuation">:</span><span class="token plain"> boxWidth</span><span class="token punctuation">,</span><span class="token plain"> background</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color: var(--syntax-str); font-weight: var(--font-weight-medium);">'hsl(345deg 100% 50%)'</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> flex</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">3</span><span class="token punctuation">,</span><span class="token plain"> background</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color: var(--syntax-str); font-weight: var(--font-weight-medium);">'hsl(260deg 100% 40%)'</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> flex</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">1</span><span class="token punctuation">,</span><span class="token plain"> background</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color: var(--syntax-str); font-weight: var(--font-weight-medium);">'hsl(50deg 100% 60%)'</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token comment" style="color: var(--syntax-comment);">// ...which is then passed as a prop to this component!</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token tag punctuation" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);">&lt;</span><span class="token tag class-name" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);">Boxes</span><span class="token tag" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);"> </span><span class="token tag attr-name" style="color: var(--syntax-name); font-weight: var(--font-weight-medium);">boxes</span><span class="token tag script language-javascript script-punctuation punctuation" style="color: var(--syntax-name); font-weight: var(--font-weight-medium);">=</span><span class="token tag script language-javascript punctuation" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);">{</span><span class="token tag script language-javascript" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);">boxes</span><span class="token tag script language-javascript punctuation" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);">}</span><span class="token tag" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);"> </span><span class="token tag punctuation" style="color: var(--syntax-prop); font-weight: var(--font-weight-medium);">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">When the <code class="sc-1a723291-0 hSlZWR">name</code> state changes, our <code class="sc-1a723291-0 hSlZWR">App</code> component re-renders, which re-runs all of the code. We construct a brand-new <code class="sc-1a723291-0 hSlZWR">boxes</code> array, and pass it onto our <code class="sc-1a723291-0 hSlZWR">Boxes</code> component.</p><p class="sc-e646da6e-0 ddhZIx"><strong>And <code class="sc-1a723291-0 hSlZWR">Boxes</code> re-renders, because we gave it a brand new array!</strong></p><p class="sc-e646da6e-0 ddhZIx">The <em>structure</em> of the <code class="sc-1a723291-0 hSlZWR">boxes</code> array hasn't changed between renders, but that isn't relevant. All React knows is that the <code class="sc-1a723291-0 hSlZWR">boxes</code> prop has received a freshly-created, never-before-seen array.</p><p class="sc-e646da6e-0 ddhZIx">To solve this problem, we can use the <code class="sc-1a723291-0 hSlZWR">useMemo</code> hook:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 235px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">const boxes = React.useMemo(() =&gt; {
  return [
    { flex: boxWidth, background: 'hsl(345deg 100% 50%)' },
    { flex: 3, background: 'hsl(260deg 100% 40%)' },
    { flex: 1, background: 'hsl(50deg 100% 60%)' },
  ];
}, [boxWidth]);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> boxes </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> flex</span><span class="token punctuation">:</span><span class="token plain"> boxWidth</span><span class="token punctuation">,</span><span class="token plain"> background</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color: var(--syntax-str); font-weight: var(--font-weight-medium);">'hsl(345deg 100% 50%)'</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> flex</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">3</span><span class="token punctuation">,</span><span class="token plain"> background</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color: var(--syntax-str); font-weight: var(--font-weight-medium);">'hsl(260deg 100% 40%)'</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">{</span><span class="token plain"> flex</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">1</span><span class="token punctuation">,</span><span class="token plain"> background</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string" style="color: var(--syntax-str); font-weight: var(--font-weight-medium);">'hsl(50deg 100% 60%)'</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">boxWidth</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">Unlike the example we saw earlier, with the prime numbers, we're not worried about a computationally-expensive calculation here. Our only goal is to <em class="sc-51e913c7-0 bqvtGV">preserve a reference</em> to a particular array.</p><p class="sc-e646da6e-0 ddhZIx">We list <code class="sc-1a723291-0 hSlZWR">boxWidth</code> as a dependency, because we <em class="sc-51e913c7-0 bqvtGV">do</em> want the <code class="sc-1a723291-0 hSlZWR">Boxes</code> component to re-render when the user tweaks the width of the red box.</p><p class="sc-e646da6e-0 ddhZIx">I think a quick sketch will help illustrate. Before, we were creating a brand new array, as part of each snapshot:</p><span type="default" class="sc-9a7b0d0-0 dhEZub"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271564.5%27%20height=%27914%27/%3e"></span><img alt="Diagram showing how each snapshot builds a brand new “boxes” array" src="./Understanding useMemo and useCallback_files/snapshots-default.png" decoding="async" data-nimg="intrinsic" class="sc-9a7b0d0-2 bSTxZG" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" srcset="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-default.png&amp;w=1920&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-default.png&amp;w=3840&amp;q=75 2x"><noscript><img alt="Diagram showing how each snapshot builds a brand new “boxes” array" srcSet="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-default.png&amp;w=1920&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-default.png&amp;w=3840&amp;q=75 2x" src="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-default.png&amp;w=3840&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="sc-9a7b0d0-2 bSTxZG" loading="lazy"/></noscript></span></span><p class="sc-e646da6e-0 ddhZIx">With <code class="sc-1a723291-0 hSlZWR">useMemo</code>, however, we're re-using a previously-created <code class="sc-1a723291-0 hSlZWR">boxes</code> array:</p><span type="default" class="sc-9a7b0d0-0 dhEZub"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271564.5%27%20height=%27914%27/%3e"></span><img alt="Diagram showing how each snapshot builds a brand new “boxes” array" src="./Understanding useMemo and useCallback_files/snapshots-with-memo.png" decoding="async" data-nimg="intrinsic" class="sc-9a7b0d0-2 bSTxZG" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" srcset="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-with-memo.png&amp;w=1920&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-with-memo.png&amp;w=3840&amp;q=75 2x"><noscript><img alt="Diagram showing how each snapshot builds a brand new “boxes” array" srcSet="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-with-memo.png&amp;w=1920&amp;q=75 1x, /_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-with-memo.png&amp;w=3840&amp;q=75 2x" src="/_next/image/?url=%2Fimages%2Fusememo-and-usecallback%2Fsnapshots-with-memo.png&amp;w=3840&amp;q=75" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="sc-9a7b0d0-2 bSTxZG" loading="lazy"/></noscript></span></span><p class="sc-e646da6e-0 ddhZIx">By preserving the same reference across multiple renders, we allow pure components to function the way we want them to, ignoring renders that don't affect the UI.</p><div id="the-usecallback-hook" class="sc-89a92fe2-0 ksGsFy"><h2 style="position:relative" class="sc-487e4335-4 SHCsL"><a name="the-usecallback-hook-5" id="the-usecallback-hook-5" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#the-usecallback-hook-5" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>The useCallback hook</h2></div><p class="sc-e646da6e-0 ddhZIx">Alright, so that just about covers <code class="sc-1a723291-0 hSlZWR">useMemo</code>… what about <code class="sc-1a723291-0 hSlZWR">useCallback</code>?</p><p class="sc-e646da6e-0 ddhZIx"><strong>Here's the short version:</strong> It's the exact same thing, but for <em class="sc-51e913c7-0 bqvtGV">functions</em> instead of arrays / objects.</p><p class="sc-e646da6e-0 ddhZIx">Similar to arrays and objects, functions are compared by reference, not by value:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 264px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">const functionOne = function() {
  return 5;
};
const functionTwo = function() {
  return 5;
};

console.log(functionOne === functionTwo); // false</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: var(--syntax-fn);">functionOne</span><span class="token plain"> </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">5</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> </span><span class="token function-variable function" style="color: var(--syntax-fn);">functionTwo</span><span class="token plain"> </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">5</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">log</span><span class="token punctuation">(</span><span class="token plain">functionOne </span><span class="token operator" style="color: var(--syntax-str);">===</span><span class="token plain"> functionTwo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment" style="color: var(--syntax-comment);">// false</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">This means that if we define a function within our components, it'll be re-generated on every single render, producing an identical-but-unique function each time.</p><p class="sc-e646da6e-0 ddhZIx">Let's look at an example:</p><!--$--><div class="sp-wrapper sp-default sp-c-fVPbOs sp-c-fVPbOs-gMQIch-variant-light full-bleed"><div data-id="usecallback-example-before" data-can-be-annotated="false" class="sc-75c84c16-0 ysXLr"><div data-is-fullscreened="false" class="sc-d1660c0a-0 sc-75c84c16-1 fOfHwg lbCGcb"><div class="sp-wrapper sp-2139390244 sp-c-fVPbOs sp-c-fVPbOs-LrWkf-variant-dark"><div class="sc-d1660c0a-0 sc-23dd2945-0 fOfHwg ixXtDl"><header class="sc-4f385a2-0 kSkWNY"><p class="sc-4f385a2-1 idFgQX">Code Playground<!-- --> </p><div class="sc-4f385a2-2 dToHTH"><abbr title="Reset code"><div class="sc-ef2d918d-0 hUHHQb"><button style="transform:scale(1);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 gEahXK eskxwW"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"></polygon><line x1="5" y1="19" x2="5" y2="5"></line></svg><div class="sc-c473a104-0 jSpzMq">Reset code</div></button><div style="top:-6px" class="sc-ef2d918d-1 ehlMox"><div style="opacity:0" class="sc-477a4b02-0 budYeq sc-ef2d918d-2 gFNJfx"><div role="progressbar" aria-valuemin="0" aria-valuemax="90" style="height:4px;background:transparent" class="sc-477a4b02-1 jsWuH"><div style="background:linear-gradient(90deg, hsl(333deg, 100%, 55%), hsl(289deg, 100%, 45%), hsl(245deg, 100%, 60%));clip-path:polygon(
      0% 0%,
      0% 0%,
      0% 100%,
      0% 100%
    )" class="sc-477a4b02-2 dWkRDI"></div></div></div></div></div></abbr><abbr title="Format code using Prettier"><button style="transform:scaleY(1);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-792708a0-0 gEahXK eskxwW flAbCM"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg><div class="sc-c473a104-0 jSpzMq">Format code using Prettier</div></button></abbr><abbr title="Open in CodeSandbox"><button title="Open in CodeSandbox" class="sc-ac600c13-0 sc-2411c85d-0 sc-5a71e377-0 gEahXK eskxwW fGKifS" style="opacity: 0.7;"><form action="https://codesandbox.io/api/v1/sandboxes/define" method="POST" target="_blank"><input name="parameters" type="hidden" value="N4IgZglgNgpgziAXKAggBzQOgFYOSAYwHsA7AFxnKRAgFs0iAnMgAgCUYBDA1sRo2iwDkjLjyEBuADokZdBsxYBZGAHNOAISJE4vfoKGYA9CvVadZSTJlgAriR4RSLdGgAUAShbAZLFsRJdFgBtYnsyABoWOBgyAGEicIBdFgBedjEyTFsYgGUyTgo3AAYPaVkSPzsHMidKgAtOEgATWFNNbV1Pb18_aNiE8Lc3AltGUXIANU4oWxgvVIA-fzGJsmnZmBYAahYARgAmAGYAFjLegF9rSpZRMjHKt16_AB5F577B8kRvMPIrm59FgvABGtjIZFIHyBpDiUAgBAA1qlgN0lj1AUC-jF4olyCM8axdnsPNC-hcAViWO9MUC4QjESxaDAAIRkl5GMEQ0g0qkvdrmIKNFqwelIlHC1owAWdMgXFhGXl9DlK84kAEyGAADwUrGaMDAnFsUFYrgkIAiNDgGggJE4jAAnkhDVAYhdLbb9VqcHhQAEKFREDR6ExWBxuHoBCwpCBRBGY-V5KHvP44xQ2NpWPK-FGRJkALTNARGAjwyiWRMhxQx4yiHGYAhwOAJuRV1g1oy6B2wOANpstkhJxSuFg5wQd1wDmQBIL-zi2mCMNIsIujZnkTCqWIAUVg67IGgdAElmm4RJmhGqZ6x-ERWOkCGmYBm7wTyPOSIu1TJb1kJvrGDcF4R0VMoLStG07UdZ0ZjdS0ux7PtfUIUgAzIagAGJfwxPxmggOA0CgTgHR-MBYC1coqnIwsIFERxSB-YhZloEhKJYGYIFUEh8wgChaDgRjy0XNj1DQH49gANjQCiZABLlIUqHwbjwgiiJIlgQSgIgkXKAFMGZdR8xBWUjPBBScI07hEVUfh7GaH56jgKA3COABWYp9VUfZimKABSFgTj8tU_CYpgfgAd3qXiYDYtBOGaPCSFUcSpK1AKAA5pLY4zGAAn4SFIGLZPA_DIPtJ1EBdOCQDQWxNIRIxPW1TB6jIWgoCQP1UPLagXhZAARAB5OIABUAE0AAVtxYVr2ppF5ZqgFgiKS1IY0oGMlQWrhmiVV5mQKfxGkYHE1pAABVEaADF83SzaPheA7OBYO1mTOgA3CAYHC3UY38bryDO8KIGaMh6lSfVPoIGB82B0H6iiW1eIgGZ8zgAgZhgVI9kwYp7sxF5ajIWBFn67TbH3DkiZJ3oOXqHatuM5oHT24E8PelgQbO39No5dmts5IhmfmoxFsWErrVtcqYNdGB3VjeBYiQzqUPIHqgyMAAqXoACkdHqIQ4BYOIckhQQ4lyXIMhxXpWrINABKMIxwpdnB9fC4hmSNBti0bOAS1NgR8z9_M61iIwZE1iOSE1qJNcQRAQQNJgYDjhPODACglyUvxjK1NGIAAL1tZKNKYACjKIGT1UjizaHtVRbR-YpdJkRaoiZh0LPpzjWvEnzfNbkhO4s-FP3zHvVD7_ZMFctjYZgEFEV4_MwFQtHaEzKKkp-Jpag4zgYmaIe6FUKI0ARe5RCiT79SIKIMZId7D6iOB3q8nOV3wwjiJ-TTtMRGxeu-c4Zg37n5E-JBaqRA0mZUgUQKBagKHGV-MBYA8Asmvb4nMSD00YLxIeaAoj1D2MQg4xCjjEJOMQ1yxCJIWSIO9RcZEiDhVhowTgYkNJxkRLDcuQ8sKZiiBhAA-iIz8SCLL4SIERWoDFOZwBkYUIqNcKhaxYBoQ-CIWBgxgMyaIZBuzwBYFHGQI9P5xQSiXFKWVehYLIKvTgtBoDqSEAAdTvIaXKQhX5NDgGjRcEAwBDxkAUTSWxP6gPqOAwevQcoVyYkRB2MBGIyKSTEIeYMLKIIcRxLiPxYCZ2yuXRclduS0B-EcaS0QZEgxmk5EonkWB-RYAcVyvk1QAjIIwRABUyBuEQERXQ-YiBgHzIYtA8wdHNAsvE0pxlyniWqYo-EMzHLOQ8moZp_l3IdJCSQdRJtdBRnsUbUxJAAAC9jHHQ0wevQ0zioCuI8WQLxzQrA3DgIwAgPwxjOSEEYU5ztPH2maMC15oKAnOOMlAZoC8QT2MwOFUZYADiXg-GvRg9d-lCGRWAVFl42LXPCjAXuZAfgSR8kS9eCEUkvSYPXKA1LyA0VUr_UcMwoAgisvsq59zuARLsfyx5zyQXeLYl8n5LA_lnkBahf2yKIW5XBW8_MzI8IU3hYivFBLSSYkxdis8Oq0XBVHOvElZKfjuRbkKlltL8oMpmMyhxKkf7qRdFynlslrh8pZYaW5n9rkPJcT8dxYr3kSu-b8xg_y5XkAVeGlVkLRCqGNPaLVqEkUopNRix1OLjWEttQ4i1U9yUBSpUWtGhjYAOqxU6ytrq1KkU5dynSxUPSSyghVKqctLQygsD6FW_p1bBl1BkCMo59DCDjOIcoNh7D0UqP2rowAZpNClGKRkFwvCfxnDImAmAtKqDPBwFoi5lBqA6BYQtNxeh3AeCwJ4BN5JQlpP4IZcAAByTisYxgMpwSuFhTLclkCAMksJ4TimAJKUUkHESUj6KzPwShtwAHEUAaMGoNXII02QE05HAkgqp9najHfqQ0xowyZH0noogbhl1kDAh2sq0FKqwV7TVKynAtw-lIEOgG6EgyfxjK9GAMYfgxjgOuuKSJ8xoH4NgGAPAYwRF6H-j84nowgEame70uAVNqZAPqSZZ6HBfWbEgCyfgYwzrIJpmMAA9PY6Vca4wM5iGzBYiy0HsyAJzLnihuYtB8TzEY0aPggGgMgFmJN-ZOK5vGYGbjukM5DfqMATP6jM_ATTwAAQXAlix7t7GKSWj4j_Cg1BHxcAoKHAsnC0AgAuEAA"><input name="query" type="hidden" value="file=%2FApp.js&amp;from-sandpack=true"></form><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg><div class="sc-c473a104-0 jSpzMq">Open in CodeSandbox</div></button></abbr></div></header><div style="height: 39.0625rem;" class="sc-23dd2945-1 hlXevX"><div translate="no" style="--selection-background-color:var(--color-gray-200)" class="sc-ee387f97-0 ezQlOi"><div class="sp-stack sp-c-jKpMgH"><div class="sp-tabs sp-c-dyHYiL" translate="no"><div aria-label="Select active file" class="sp-tabs-scrollable-container sp-c-gGbYbQ" role="tablist"><button aria-selected="true" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="true" role="tab" title="/App.js" type="button">App.js</button><button aria-selected="false" class="sp-tab-button sp-c-jCyRbv sp-c-cFDjHt" data-active="false" role="tab" title="/MegaBoost.js" type="button">MegaBoost.js</button></div></div><div class="sp-code-editor sp-c-bNbSGz"><div aria-describedby="enter-instructions-:rk:" aria-label="Code Editor for App.js" class="sp-cm sp-pristine sp-javascript sp-c-jcgexo sp-c-jkvvao" role="group" tabindex="0" translate="no"><p id="enter-instructions-:rk:" style="display: none;">To enter the code editing mode, press Enter. To exit the edit mode, press Escape</p><p id="exit-instructions-:rk:" style="display: none;">You are editing the code. To exit the edit mode, press Escape</p><div class="cm-editor ͼ1 ͼ2 ͼtd"><div aria-live="polite" style="position: absolute; top: -10000px;"></div><div tabindex="-1" class="cm-scroller"><div spellcheck="false" autocorrect="off" autocapitalize="off" translate="no" contenteditable="true" class="cm-content cm-lineWrapping" style="tab-size: 4;" role="textbox" aria-multiline="true" data-gramm="false" tabindex="-1" aria-describedby="exit-instructions-:rk:"><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">React</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'react'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">import</span> <span class="sp-syntax-plain">MegaBoost</span> <span class="sp-syntax-keyword">from</span> <span class="sp-syntax-string">'./MegaBoost'</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">App</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">  <span class="sp-syntax-keyword">const</span> <span class="sp-syntax-punctuation">[</span><span class="sp-syntax-plain">count</span><span class="sp-syntax-punctuation">,</span> <span class="sp-syntax-plain">setCount</span><span class="sp-syntax-punctuation">]</span> = <span class="sp-syntax-plain">React</span>.<span class="sp-syntax-property">useState</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-static">0</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">function</span> <span class="sp-syntax-definition">handleMegaBoost</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">    <span class="sp-syntax-definition">setCount</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">currentValue</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-plain">currentValue</span> + <span class="sp-syntax-static">1234</span><span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line">  <span class="sp-syntax-keyword">return</span> <span class="sp-syntax-punctuation">(</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">      Count: <span class="sp-syntax-punctuation">{</span><span class="sp-syntax-plain">count</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">button</span></div><div class="cm-line">        <span class="sp-syntax-property">onClick</span>=<span class="sp-syntax-punctuation">{</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-punctuation">)</span> <span class="sp-syntax-punctuation">=&gt;</span> <span class="sp-syntax-punctuation">{</span></div><div class="cm-line">          <span class="sp-syntax-definition">setCount</span><span class="sp-syntax-punctuation">(</span><span class="sp-syntax-plain">count</span> + <span class="sp-syntax-static">1</span><span class="sp-syntax-punctuation">)</span></div><div class="cm-line">        <span class="sp-syntax-punctuation">}</span><span class="sp-syntax-punctuation">}</span></div><div class="cm-line">      <span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">        Click me!</div><div class="cm-line">      <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-tag">button</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-activeLine cm-line">      <span class="sp-syntax-punctuation">&lt;</span><span class="sp-syntax-tag">MegaBoost</span> <span class="sp-syntax-property">handleClick</span>=<span class="cm-matchingBracket"><span class="sp-syntax-punctuation">{</span></span><span class="sp-syntax-plain">handleMegaBoost</span><span class="cm-matchingBracket"><span class="sp-syntax-punctuation">}</span></span> <span class="sp-syntax-punctuation">/&gt;</span></div><div class="cm-line">    <span class="sp-syntax-punctuation">&lt;/</span><span class="sp-syntax-punctuation">&gt;</span></div><div class="cm-line">  <span class="sp-syntax-punctuation">)</span><span class="sp-syntax-punctuation">;</span></div><div class="cm-line"><span class="sp-syntax-punctuation">}</span></div><div class="cm-line"><br></div><div class="cm-line"><span class="sp-syntax-keyword">export</span> <span class="sp-syntax-keyword">default</span> <span class="sp-syntax-plain">App</span><span class="sp-syntax-punctuation">;</span></div></div></div></div></div></div></div></div></div><div class="sc-23dd2945-2 gNwEKD"><div class="sc-23dd2945-6 dnNAc"><div class="sc-8dc8a3e4-0 bwSvdO"><div style="cursor:default" class="sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">preview</div><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform:rotate(0deg);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-32c296f3-0 gEahXK eskxwW ldUTXA"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg><div class="sc-c473a104-0 jSpzMq">Refresh results pane</div></button></abbr></div></div><div style="--height:360px" class="sc-23dd2945-3 eHxGMO"><div class="sc-23dd2945-4 dhYXHE"><div class="sp-stack sp-c-jKpMgH"><div class="sp-preview-container sp-c-bIhyHd"><iframe class="sp-preview-iframe sp-c-fgviib" title="Sandpack Preview" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts" style="height: 160px;" src="./Understanding useMemo and useCallback_files/saved_resource(6).html"></iframe><div class="sp-preview-actions sp-c-eKnQtg"></div></div></div></div></div></div><div class="sc-23dd2945-7 ewsAGD"><div class="sc-8dc8a3e4-0 bwSvdO"><div style="cursor:default" class="sc-8dc8a3e4-1 sc-8dc8a3e4-2 flehAM dAJoUS">console</div><div class="sc-8dc8a3e4-3 bAZknf"><abbr title="Refresh pane"><button style="transform:rotate(0deg);opacity:0.7" class="sc-ac600c13-0 sc-2411c85d-0 sc-402bcfb2-0 gEahXK eskxwW jBmOjb"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="4.93" y1="4.93" x2="19.07" y2="19.07"></line></svg><div class="sc-c473a104-0 jSpzMq">Clear Console</div></button></abbr></div></div><div style="padding-top:16px;padding-bottom:16px" class="sc-23dd2945-3 eHxGMO"><div class="sc-23dd2945-4 dhYXHE"><div class="sc-23dd2945-5 fxJDIN"><ol class="sc-676fbe3e-0 hJkvaU"><li class="sc-489f4d98-0 hhnGgc" style="--color: white;"><div class="sc-489f4d98-2 jbPCcl"><span class="sc-489f4d98-3 cWCPbj">Render MegaBoost</span></div></li><li class="sc-489f4d98-0 hhnGgc" style="--color: white;"><div class="sc-489f4d98-2 jbPCcl"><span class="sc-489f4d98-3 cWCPbj">Render MegaBoost</span></div></li><li class="sc-489f4d98-0 hhnGgc" style="--color: white;"><div class="sc-489f4d98-2 jbPCcl"><span class="sc-489f4d98-3 cWCPbj">Render MegaBoost</span></div></li><li class="sc-489f4d98-0 hhnGgc" style="--color: white;"><div class="sc-489f4d98-2 jbPCcl"><span class="sc-489f4d98-3 cWCPbj">Render MegaBoost</span></div></li><li class="sc-489f4d98-0 hhnGgc" style="--color: white;"><div class="sc-489f4d98-2 jbPCcl"><span class="sc-489f4d98-3 cWCPbj">Render MegaBoost</span></div></li></ol></div></div></div></div></div></div></div></div></div></div><!--/$--><p class="sc-e646da6e-0 ddhZIx">This sandbox depicts a typical counter application, but with a special “Mega Boost” button. This button increases the count by a large amount, in case you're in a hurry and don't want to click the standard button a bunch of times.</p><p class="sc-e646da6e-0 ddhZIx">The <code class="sc-1a723291-0 hSlZWR">MegaBoost</code> component is a pure component, thanks to <code class="sc-1a723291-0 hSlZWR">React.memo</code>. It doesn't depend on <code class="sc-1a723291-0 hSlZWR">count</code>… <strong>But it re-renders whenever <code class="sc-1a723291-0 hSlZWR">count</code> changes!</strong></p><p class="sc-e646da6e-0 ddhZIx">Like we saw with the <code class="sc-1a723291-0 hSlZWR">boxes</code> array, the problem here is that we're generating a brand new function on every render. If we render 3 times, we'll create 3 separate <code class="sc-1a723291-0 hSlZWR">handleMegaBoost</code> functions, breaking through the <code class="sc-1a723291-0 hSlZWR">React.memo</code> force field.</p><p class="sc-e646da6e-0 ddhZIx">Using what we've learned about <code class="sc-1a723291-0 hSlZWR">useMemo</code>, we could solve the problem like this:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 177px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">const handleMegaBoost = React.useMemo(() =&gt; {
  return function() {
    setCount((currentValue) =&gt; currentValue + 1234);
  }
}, []);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> handleMegaBoost </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token function" style="color: var(--syntax-fn);">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">currentValue</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> currentValue </span><span class="token operator" style="color: var(--syntax-str);">+</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">Instead of returning an array, we're returning a <em class="sc-51e913c7-0 bqvtGV">function</em>. This function is then stored in the <code class="sc-1a723291-0 hSlZWR">handleMegaBoost</code> variable.</p><p class="sc-e646da6e-0 ddhZIx">This works… but there's a better way:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 119px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">const handleMegaBoost = React.useCallback(() =&gt; {
  setCount((currentValue) =&gt; currentValue + 1234);
}, []);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> handleMegaBoost </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token function" style="color: var(--syntax-fn);">setCount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">currentValue</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> currentValue </span><span class="token operator" style="color: var(--syntax-str);">+</span><span class="token plain"> </span><span class="token number" style="color: var(--syntax-bool);">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx"><code class="sc-1a723291-0 hSlZWR">useCallback</code> serves the same purpose as <code class="sc-1a723291-0 hSlZWR">useMemo</code>, but it's built specifically for functions. We hand it a function directly, and it memoizes that function, threading it between renders.</p><p class="sc-e646da6e-0 ddhZIx">Put another way, these two expressions have the same effect:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 177px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">// This:
React.useCallback(function helloWorld(){}, []);

// ...Is functionally equivalent to this:
React.useMemo(() =&gt; function helloWorld(){}, []);</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token comment" style="color: var(--syntax-comment);">// This:</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useCallback</span><span class="token punctuation">(</span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token comment" style="color: var(--syntax-comment);">// ...Is functionally equivalent to this:</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx"><strong>useCallback is syntactic sugar.</strong> It exists purely to make our lives a bit nicer when trying to memoize callback functions.</p><div id="when-to-use-these-hooks" class="sc-89a92fe2-0 ksGsFy"><h2 style="position:relative" class="sc-487e4335-4 SHCsL"><a name="when-to-use-these-hooks-6" id="when-to-use-these-hooks-6" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#when-to-use-these-hooks-6" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>When to use these hooks</h2></div><p class="sc-e646da6e-0 ddhZIx">Alright, so we've seen how <code class="sc-1a723291-0 hSlZWR">useMemo</code> and <code class="sc-1a723291-0 hSlZWR">useCallback</code> allow us to thread a reference across multiple renders, to reuse complex calculations or to avoid breaking pure components. The question is: <strong>how often should we use it?</strong></p><p class="sc-e646da6e-0 ddhZIx">In my personal opinion, it would be a waste of time to wrap every single object/array/function in these hooks. The benefits are negligible in most cases; React is highly optimized, and re-renders often aren't as slow or expensive as we often think they are!</p><p class="sc-e646da6e-0 ddhZIx">The best way to use these hooks is in response to a problem. If you notice your app becoming a bit sluggish, you can use the React Profiler to hunt down slow renders. In some cases, you'll be able to improve performance by restructuring your application. In other cases, <code class="sc-1a723291-0 hSlZWR">useMemo</code> and <code class="sc-1a723291-0 hSlZWR">useCallback</code> can help speed things up.</p><p class="sc-e646da6e-0 ddhZIx">(If you're not sure how to use the React profiler, I covered it in my recent blog post, <a class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN" href="https://www.joshwcomeau.com/react/why-react-re-renders/">“Why React Re-Renders”!</a>)</p><p class="sc-e646da6e-0 ddhZIx">That said, there are a couple of scenarios in which I <em>do</em> pre-emptively apply these hooks.</p><aside class="sc-7447ca5f-0 sc-7447ca5f-1 fiBCHf epenG"><div class="sc-7447ca5f-5 hqfDOf"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg></div><strong class="sc-7447ca5f-4 dktsaa">This could change in the future!</strong><div class="sc-7447ca5f-6 htjLEx"><p class="sc-e646da6e-0 ddhZIx">The React team is actively investigating whether it's possible to “auto-memoize” code during the compile step. It's still in the research phase, but early experimentation appears promising.</p><p class="sc-e646da6e-0 ddhZIx">It could be that in the future, all of this stuff is done for us automatically. Until then, though, we still need to optimize things ourselves.</p><p class="sc-e646da6e-0 ddhZIx">For more information, check out this talk by Xuan Huang called <a href="https://www.youtube.com/watch?v=lGEMwh32soc" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN">“React without memo”</a>.</p></div></aside><div id="inside-generic-custom-hooks" class="sc-89a92fe2-0 ksGsFy"><h3 style="position:relative" class="sc-487e4335-5 eaBdWy"><a name="inside-generic-custom-hooks-7" id="inside-generic-custom-hooks-7" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#inside-generic-custom-hooks-7" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>Inside generic custom hooks</h3></div><p class="sc-e646da6e-0 ddhZIx">One of my favourite lil’ custom hooks is <code class="sc-1a723291-0 hSlZWR">useToggle</code>, a friendly helper that works almost exactly like <code class="sc-1a723291-0 hSlZWR">useState</code>, but can only toggle a state variable between <code class="sc-1a723291-0 hSlZWR">true</code> and <code class="sc-1a723291-0 hSlZWR">false</code>:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 293px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">function App() {
  const [isDarkMode, toggleDarkMode] = useToggle(false);

  return (
    &lt;button onClick={toggleDarkMode}&gt;
      Toggle color theme
    &lt;/button&gt;
  );
}</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color: var(--syntax-fn);">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">isDarkMode</span><span class="token punctuation">,</span><span class="token plain"> toggleDarkMode</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">useToggle</span><span class="token punctuation">(</span><span class="token boolean" style="color: var(--syntax-bool);">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token operator" style="color: var(--syntax-str);">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token punctuation">{</span><span class="token plain">toggleDarkMode</span><span class="token punctuation">}</span><span class="token operator" style="color: var(--syntax-str);">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">      </span><span class="token maybe-class-name">Toggle</span><span class="token plain"> color theme</span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token operator" style="color: var(--syntax-str);">&lt;</span><span class="token operator" style="color: var(--syntax-str);">/</span><span class="token plain">button</span><span class="token operator" style="color: var(--syntax-str);">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">Here's how this custom hook is defined:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 293px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">function useToggle(initialValue) {
  const [value, setValue] = React.useState(initialValue);

  const toggle = React.useCallback(() =&gt; {
    setValue(v =&gt; !v);
  }, []);

  return [value, toggle];
}</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function" style="color: var(--syntax-fn);">useToggle</span><span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">value</span><span class="token punctuation">,</span><span class="token plain"> setValue</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useState</span><span class="token punctuation">(</span><span class="token plain">initialValue</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> toggle </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token function" style="color: var(--syntax-fn);">setValue</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color: var(--syntax-str);">!</span><span class="token plain">v</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">value</span><span class="token punctuation">,</span><span class="token plain"> toggle</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx">Notice that the <code class="sc-1a723291-0 hSlZWR">toggle</code> function is memoized with <code class="sc-1a723291-0 hSlZWR">useCallback</code>.</p><p class="sc-e646da6e-0 ddhZIx">When I build custom reusable hooks like this, I like to make them as efficient as possible, because <strong>I don't know where they'll be used in the future.</strong> It might be overkill in 95% of situations, but if I use this hook 30 or 40 times, there's a good chance this will help improve the performance of my application.</p><div id="inside-context-providers" class="sc-89a92fe2-0 ksGsFy"><h3 style="position:relative" class="sc-487e4335-5 eaBdWy"><a name="inside-context-providers-8" id="inside-context-providers-8" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#inside-context-providers-8" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>Inside context providers</h3></div><p class="sc-e646da6e-0 ddhZIx">When we share data across an application with context, it's common to pass a big object as the <code class="sc-1a723291-0 hSlZWR">value</code> attribute.</p><p class="sc-e646da6e-0 ddhZIx">It's generally a good idea to memoize this object:</p><pre><div style="margin-bottom:80px" class="sc-f1688b95-0 jyIlDU"><div class="sc-fcd46ea3-1 igIbWj">js</div><div data-code-snippet="true" translate="no" class="sc-fcd46ea3-0 jLCxK" style="min-height: 422.25px; max-height: 75vh;"><div class="sc-4f14f75f-1 fvpXtB" style="position: relative; text-align: left; box-sizing: border-box; padding: 0px; overflow: hidden; white-space: pre; font-family: var(--font-family-mono); color: var(--syntax-txt); background-color: transparent;"><textarea class="npm__react-simple-code-editor__textarea" disabled="" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" data-gramm="false" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: absolute; top: 0px; left: 0px; height: 100%; width: 100%; resize: none; color: inherit; overflow: hidden; -webkit-font-smoothing: antialiased; -webkit-text-fill-color: transparent; padding: 10px;">const AuthContext = React.createContext({});

function AuthProvider({ user, status, forgotPwLink, children }){
  const memoizedValue = React.useMemo(() =&gt; {
    return {
      user,
      status,
      forgotPwLink,
    };
  }, [user, status, forgotPwLink]);

  return (
    &lt;AuthContext.Provider value={memoizedValue}&gt;
      {children}
    &lt;/AuthContext.Provider&gt;
  );
}</textarea><pre aria-hidden="true" style="margin: 0px; border: 0px; background: none; box-sizing: inherit; display: inherit; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-weight: inherit; letter-spacing: inherit; line-height: inherit; tab-size: inherit; text-indent: inherit; text-rendering: inherit; text-transform: inherit; white-space: pre-wrap; word-break: keep-all; overflow-wrap: break-word; position: relative; pointer-events: none; padding: 10px;"><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> </span><span class="token maybe-class-name">AuthContext</span><span class="token plain"> </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">createContext</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token keyword" style="color: var(--syntax-str);">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color: var(--syntax-fn);">AuthProvider</span><span class="token punctuation">(</span><span class="token parameter punctuation">{</span><span class="token parameter"> user</span><span class="token parameter punctuation">,</span><span class="token parameter"> status</span><span class="token parameter punctuation">,</span><span class="token parameter"> forgotPwLink</span><span class="token parameter punctuation">,</span><span class="token parameter"> children </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">const</span><span class="token plain"> memoizedValue </span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access" style="color: var(--syntax-fn);">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: var(--syntax-str);">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">      user</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">      status</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">      forgotPwLink</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">user</span><span class="token punctuation">,</span><span class="token plain"> status</span><span class="token punctuation">,</span><span class="token plain"> forgotPwLink</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain" style="display: inline-block;"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token keyword" style="color: var(--syntax-str);">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token operator" style="color: var(--syntax-str);">&lt;</span><span class="token maybe-class-name">AuthContext</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">Provider</span><span class="token plain"> value</span><span class="token operator" style="color: var(--syntax-str);">=</span><span class="token punctuation">{</span><span class="token plain">memoizedValue</span><span class="token punctuation">}</span><span class="token operator" style="color: var(--syntax-str);">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain">children</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">    </span><span class="token operator" style="color: var(--syntax-str);">&lt;</span><span class="token operator" style="color: var(--syntax-str);">/</span><span class="token maybe-class-name">AuthContext</span><span class="token punctuation">.</span><span class="token property-access maybe-class-name">Provider</span><span class="token operator" style="color: var(--syntax-str);">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line" style="color: var(--syntax-txt); padding: 0px; font-family: var(--font-family-mono);"><span class="token plain"></span><span class="token punctuation">}</span></div></pre><style type="text/css">
/**
 * Reset the text fill color so that placeholder is visible
 */
.npm__react-simple-code-editor__textarea:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .npm__react-simple-code-editor__textarea {
    color: transparent !important;
  }

  .npm__react-simple-code-editor__textarea::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
</style></div></div></div></pre><p class="sc-e646da6e-0 ddhZIx"><strong>Why is this beneficial?</strong> There might be dozens of pure components that consume this context. Without <code class="sc-1a723291-0 hSlZWR">useMemo</code>, all of these components would be forced to re-render if <code class="sc-1a723291-0 hSlZWR">AuthProvider</code>'s parent happens to re-render.</p><div id="the-joy-of-react" class="sc-89a92fe2-0 ksGsFy"><h2 style="position:relative" class="sc-487e4335-4 SHCsL"><a name="the-joy-of-react-9" id="the-joy-of-react-9" href="https://www.joshwcomeau.com/react/usememo-and-usecallback/#the-joy-of-react-9" class="sc-89a92fe2-1 kjxbNj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-89a92fe2-2 Krykv"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg><div class="sc-c473a104-0 jSpzMq">Link to this heading</div></a>The Joy of React</h2></div><p class="sc-e646da6e-0 ddhZIx">Phew! You made it to the end. I know that this tutorial covers some pretty rocky ground. 😅</p><p class="sc-e646da6e-0 ddhZIx">I know that these two hooks are thorny, that React itself can feel really overwhelming and confusing. It's a difficult tool!</p><p class="sc-e646da6e-0 ddhZIx"><strong>But here's the thing:</strong> If you can get over the initial hump, React is an <em color="var(--color-secondary)" class="sc-51e913c7-0 eHJZli">absolute joy</em> to use.</p><p class="sc-e646da6e-0 ddhZIx">I started using React back in 2015, and it's become my absolute favourite way to build complex user interfaces and web applications. I've tried just about every JS framework under the sun, and I'm just not as productive with them as I am with React.</p><p class="sc-e646da6e-0 ddhZIx">If you've struggled with React, I'm here to help!</p><p class="sc-e646da6e-0 ddhZIx">For the past two years, I've been hard at work on a course called <a href="https://www.joyofreact.com/" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN">The Joy of React</a>. It's a beginner-friendly self-paced interactive online course that teaches you how to build next-level cool stuff with React.</p><p class="sc-e646da6e-0 ddhZIx">If you found this blog post even a little bit helpful, I think you'll get <em class="sc-51e913c7-0 bqvtGV">so much</em> out of my course. Unlike this blog post, the course combines interactive articles like this one with videos, exercises, mini-games, and even some real-world-style projects. It's a hands-on adventure.</p><p class="sc-e646da6e-0 ddhZIx">You can learn more about the course, and discover the joy of building with React:</p><ul class="sc-19724b12-1 dvUyoz"><li class="sc-19724b12-3 eSCGZL"><span style="transform:translateY(5px)" class="sc-19724b12-5 ivSWjC"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><div class="sc-19724b12-4 hGMcnl"><a href="https://www.joyofreact.com/" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-53808c2b-0 gICFTN">The Joy of React</a></div></li></ul><div class="sc-ea9c3707-0 hdFuuc"><div class="sc-ea9c3707-5 gQDJji"><h3 class="sc-ea9c3707-3 knMHKw">Last Updated</h3><p class="sc-ea9c3707-4 ejrdDD">September 19th, 2023</p></div><div class="sc-ea9c3707-7 zsYje"><h3 class="sc-ea9c3707-3 knMHKw">Hits</h3><div size="5" class="sc-49562803-0 fFjtxx"></div><div class="sc-17cb4a0c-0 LBKxj"><button aria-label="Retro-style hit counter, showing that 180200 people have visited this page." class="sc-ac600c13-0 sc-17cb4a0c-1 gEahXK guosbG" style="border: 5px solid var(--color-gray-100);"><div style="position: relative; display: inline-block;"><div style="position: relative; z-index: 2; display: flex; justify-content: space-between; width: 82px; background-color: var(--color-gray-100); padding: 3px; box-sizing: content-box;"><div style="position: relative; width: 12px; height: 22px;"><div style="position: absolute; top: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; bottom: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 10px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div></div><div style="position: relative; width: 12px; height: 22px;"><div style="position: absolute; top: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; bottom: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 10px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div></div><div style="position: relative; width: 12px; height: 22px;"><div style="position: absolute; top: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; bottom: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 10px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div></div><div style="position: relative; width: 12px; height: 22px;"><div style="position: absolute; top: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; bottom: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 10px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div></div><div style="position: relative; width: 12px; height: 22px;"><div style="position: absolute; top: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; bottom: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 10px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div></div><div style="position: relative; width: 12px; height: 22px;"><div style="position: absolute; top: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 12px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; bottom: 0px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 11px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 1px; left: 2px; transform: rotate(90deg); transform-origin: left top;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path></svg></div><div style="position: absolute; top: 10px; left: 1px;"><svg width="10" height="2" style="display: block;"><path fill="transparent" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 1; transition: opacity 250ms ease 0s;"></path><path fill="var(--color-gray-400)" d="
              M 0.5 1
              L 1.5 0
              L 8.5 0
              L 9.5 1
              L 8.5 2
              L 1.5 2
            " style="opacity: 0; transition: opacity 250ms ease 0s;"></path></svg></div></div></div></div></button></div></div></div></article></div></main><div class="sc-89b6d0c1-8 cukvQG"><div class="sc-e0ca57dd-0 sc-89b6d0c1-9 gUHgKT jkPAlY"><div class="sc-89b6d0c1-10 kStwMM"><div variant="default" class="sc-2ed77734-0 jiCduG"><div class="sc-2ed77734-8 fNRqNc"><div><div class="sc-8f6add10-0 jKyzPp" style="animation-duration: 600ms; animation-delay: 200ms;"><picture style="display: contents;"><source srcset="/assets/me-light.webp" type="image/webp"><img src="./Understanding useMemo and useCallback_files/me-light.png" loading="lazy" alt="3D portrait of the blog&#39;s author, Josh Comeau" class="sc-ad84b1ea-0 sc-ad84b1ea-1 eCLCV hMPTFg" style="opacity: 1;"></picture><picture style="display: contents;"><source srcset="/assets/me-dark.webp" type="image/webp"><img src="./Understanding useMemo and useCallback_files/me-dark.png" loading="lazy" alt="" class="sc-ad84b1ea-0 sc-ad84b1ea-2 eCLCV ldWXBi" style="opacity: 0; transition: opacity 350ms ease 350ms;"></picture></div></div></div><div class="sc-2ed77734-6 mFZyd"><h2 id="newsletter-signup-heading" class="sc-487e4335-2 iOfXAn sc-2ed77734-9 cQopaX">A front-end web development newsletter that sparks joy</h2><p class="sc-e646da6e-0 sc-2ed77734-7 ddhZIx fYaCiq">My goal with this blog is to create helpful content for front-end web devs, and my newsletter is no different! I'll let you know when I publish new content, and I'll even share<!-- --> <em class="sc-51e913c7-0 bqvtGV">exclusive newsletter-only content</em> now and then.<br><br>No spam, unsubscribe at any time.</p><form variant="default" class="sc-2ed77734-3 cnAiyw"><div class="sc-2ed77734-4 iYtdWP"><div class="sc-5edd0078-0 gZyMBR"><label for=":R3qn2m:" style="color:var(--color-text);opacity:1" class="sc-5edd0078-1 hvlhGR">First Name</label><br><input autocomplete="given-name" id=":R3qn2m:" class="sc-5edd0078-2 cagoQb" value=""><div class="sc-5edd0078-3 kkfmmI"></div></div></div><div size="32" class="sc-49562803-0 jjBShN"></div><div class="sc-2ed77734-5 evpiJD"><div class="sc-5edd0078-0 gZyMBR"><label for=":R7qn2m:" style="color:var(--color-text);opacity:1" class="sc-5edd0078-1 hvlhGR">Email</label><br><input required="" autocomplete="email" type="email" id=":R7qn2m:" class="sc-5edd0078-2 cagoQb" value=""><div class="sc-5edd0078-3 kkfmmI"></div></div></div><div size="32" class="sc-49562803-0 jjBShN"></div><div class="sc-c473a104-0 jSpzMq"><label for=":R72m:">Do you agree to the terms?</label><p>If you're a human, please ignore this field.</p><input name="accept-terms" type="checkbox" id=":R72m:"></div><div class="sc-c8e6784c-0 fjBGoo"><button type="submit" style="width: 175px; --magic-rainbow-color-newsletter-signup-button-0: hsl(325deg, 100%, 48%); --magic-rainbow-color-newsletter-signup-button-1: hsl(325deg, 100%, 48%); --magic-rainbow-color-newsletter-signup-button-2: hsl(260deg, 100%, 55%); transition: --magic-rainbow-color-newsletter-signup-button-0 1625ms linear 0s, --magic-rainbow-color-newsletter-signup-button-1 1625ms linear 0s, --magic-rainbow-color-newsletter-signup-button-2 1625ms linear 0s; background: radial-gradient(
            circle at top left,
            var(--magic-rainbow-color-newsletter-signup-button-2),
            var(--magic-rainbow-color-newsletter-signup-button-1),
            var(--magic-rainbow-color-newsletter-signup-button-0)
          );" class="sc-ac600c13-0 sc-66964c78-0 gEahXK gQMbbF"><span>Subscribe</span></button></div></form></div></div><svg width="1420" height="478" viewBox="0 0 1420 478" fill="none" preserveAspectRatio="none" class="sc-89b6d0c1-11 cQZiiS"><defs><clippath id="clip0"><rect width="1420" height="478" fill="white"></rect></clippath></defs><g clip-path="url(#clip0)"><path d="M744 464C686 478.5 598 478.5 598 478.5H1394C1323.5 478.5 1241 478.5 1173 450.5C1105 422.5 1145.05 288.617 1066 256.5C986.945 224.383 914.079 230.227 849.5 286C805.5 324 822.393 444.402 744 464Z" fill="var(--color-muted)"></path></g></svg></div></div></div><footer role="contentinfo" style="background:var(--color-muted)" class="sc-c1e277a3-2 hAuOMx"><div class="sc-e0ca57dd-0 sc-c1e277a3-3 gUHgKT ilTQuW"><div class="sc-c1e277a3-4 bwrBOY"><div class="sc-c1e277a3-11 bgAQYR"><a class="sc-b666cce7-0 ihtLEh sc-d715942d-0 bUIVYy" href="https://www.joshwcomeau.com/"><span class="sc-d715942d-1 jKGTyj">Josh</span><span class="sc-d715942d-6 hewhBw"><svg width="14" height="12" viewBox="0 0 14 12" fill="none" class="sc-d715942d-4 dpcFpq"><path d="M1.83685 4.19021C2.50472 5.35898 3.23081 6.5572 3.80331 7.77375C4.05248 8.30325 4.35843 9.36185 4.81149 9.75018C5.73454 10.5414 6.29678 10.273 6.76796 9.06143C7.13194 8.12547 7.20283 7.08915 7.54655 6.12672C7.91111 5.10596 9.23909 6.70274 9.78252 7.06503C10.3171 7.42139 13.574 9.528 12.8869 7.60406C12.6687 6.99301 12.6107 6.33922 12.4777 5.70748C12.3451 5.07774 12.1099 4.28137 12.0784 3.65119C12.0399 2.88207 11.719 2.12838 11.719 1.3154" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-d715942d-5 iHfhhp"></path></svg><svg width="9" height="10" viewBox="0 0 9 10" fill="none" class="sc-d715942d-3 imCMJV"><path d="M1 9C2.23995 7.12464 3.87268 5.18927 4.17593 2.59926C4.22017 2.22137 4.11111 0.731563 4.11111 1.04233C4.11111 1.49132 4.41831 2.03152 4.55761 2.40705C4.98522 3.55977 5.31447 4.69324 5.92593 5.70352C6.43274 6.54092 7.08081 7.96204 8 7.96204" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="sc-d715942d-5 iHfhhp"></path></svg><span class="sc-d715942d-7 bXobgp">W</span></span><span class="sc-d715942d-2 cbeiEI">Comeau</span></a><span class="sc-c1e277a3-0 kIOlWC"><div class="sc-c1e277a3-12 jvNsSR">Thanks for reading!</div></span></div><span class="sc-c1e277a3-0 kIOlWC"><div class="sc-c1e277a3-13 fbQUbH">© 2020-present Joshua Comeau. All Rights Reserved.</div></span></div><div class="sc-c1e277a3-5 TYJDb"><div class="sc-c1e277a3-6 fRiNHC"><p class="sc-c1e277a3-8 ifYlRP">Tutorials</p><div class="sc-c1e277a3-9 sc-c1e277a3-10 jRWAwR cmhtMe"><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/react/">React</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/animation/">Animation</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/css/">CSS</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/career/">Career</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/gatsby/">Gatsby</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/nextjs/">Next.js</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/performance/">Performance</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/tutorials/javascript/">JavaScript</a></div></div><div class="sc-c1e277a3-6 fRiNHC"><p class="sc-c1e277a3-8 ifYlRP">Links</p><div class="sc-c1e277a3-9 jRWAwR"><a href="https://twitter.com/joshwcomeau" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh">Twitter</a><a href="mailto:support@joshwcomeau.com" rel="noopener noreferrer" target="_blank" class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh">Contact</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/terms/">Terms of Use</a><a class="sc-b666cce7-0 ihtLEh sc-c1e277a3-7 btkDVh" href="https://www.joshwcomeau.com/privacy/">Privacy Policy</a></div></div></div><span class="sc-c1e277a3-1 dzIkaW"><div class="sc-c1e277a3-13 sc-c1e277a3-14 fbQUbH iNdIkX">© 2020-present Joshua Comeau. All Rights Reserved.</div></span></div></footer></div><div status="idle" class="sc-d2a23101-0 dPFVZW"><div data-cy="toasty-character"><div class="sc-8f6add10-0 jKyzPp" style="animation-duration: 600ms; animation-delay: 200ms;"><picture style="display: contents;"><source srcset="/assets/me-light.webp" type="image/webp"><img src="./Understanding useMemo and useCallback_files/me-light.png" loading="lazy" alt="3D portrait of the blog&#39;s author, Josh Comeau" class="sc-ad84b1ea-0 sc-ad84b1ea-1 eCLCV hMPTFg" style="opacity: 1;"></picture><picture style="display: contents;"><source srcset="/assets/me-dark.webp" type="image/webp"><img src="./Understanding useMemo and useCallback_files/me-dark.png" loading="lazy" alt="" class="sc-ad84b1ea-0 sc-ad84b1ea-2 eCLCV ldWXBi" style="opacity: 0; transition: opacity 350ms ease 350ms;"></picture></div></div></div><div class="sc-d2a23101-1 WiDld" style="pointer-events: none;"><div class="sc-780b5e6b-0 cPfTyT" style="opacity: 0; transform: scaleX(0.75) translateX(-20px);"><div class="sc-780b5e6b-1 ghLNlJ" style="width: 350px; min-height: 87px;"><div class="sc-780b5e6b-2 gPLCfC" style="top: -10px;"><svg width="65" height="78" viewBox="0 0 95 95" fill="none" preserveAspectRatio="none"><path d="M0 0C0 0 24.8936 38.9937 47 58C57.5966 67.1106 73.8292 77.0249 84.1762 83C90.03 86.3804 94 95 94 95L94.5 36C94.5 36 88.5727 43.1045 81 41.4825C70.8874 39.3165 56.9488 35.8549 47 31.5C26.7586 22.6397 0 0 0 0Z" fill="white"></path></svg></div><div class="sc-780b5e6b-3 kunxU" style="opacity: 0; transform: scaleX(0.9) translateX(-20px);"><p class="sc-e646da6e-0 ddhZIx">Hi friend! Hope I didn't startle you. Can I let you know about my newsletter?</p><div class="sc-60c655fb-0 haPEJO"><button data-cy="speech-bubble-accept" class="sc-ac600c13-0 sc-60c655fb-1 gEahXK gzNgHo" style="color: rgb(230, 0, 103);">Sure!</button><button data-cy="speech-bubble-deny" class="sc-ac600c13-0 sc-60c655fb-1 gEahXK gzNgHo">No thanks</button></div></div></div></div></div></div><script>function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("B:1","S:1")</script><script>$RC("B:2","S:2")</script><script>$RC("B:3","S:3")</script><script>$RC("B:0","S:0")</script><div id="confetti-portal"></div><div id="misc-portal"></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"categorySlug":"react","contentSlug":"usememo-and-usecallback","mdx":{"compiledSource":"var m=Object.defineProperty,u=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var l=(t,n,o)=\u003en in t?m(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,e=(t,n)=\u003e{for(var o in n||(n={}))r.call(n,o)\u0026\u0026l(t,o,n[o]);if(i)for(var o of i(n))s.call(n,o)\u0026\u0026l(t,o,n[o]);return t},p=(t,n)=\u003eu(t,d(n));var c=(t,n)=\u003e{var o={};for(var a in t)r.call(t,a)\u0026\u0026n.indexOf(a)\u003c0\u0026\u0026(o[a]=t[a]);if(t!=null\u0026\u0026i)for(var a of i(t))n.indexOf(a)\u003c0\u0026\u0026s.call(t,a)\u0026\u0026(o[a]=t[a]);return o};const makeShortcode=t=\u003efunction(o){return console.warn(\"Component \"+t+\" was not imported, exported, or provided by MDXProvider as global scope\"),mdx(\"div\",e({},o))},Sidenote=makeShortcode(\"Sidenote\"),DraggableSnapshots=makeShortcode(\"DraggableSnapshots\"),List=makeShortcode(\"List\"),ListItem=makeShortcode(\"ListItem\"),Sandbox=makeShortcode(\"Sandbox\"),ShadowImage=makeShortcode(\"ShadowImage\"),GreenTextFlash=makeShortcode(\"GreenTextFlash\"),PrimeClockGraph=makeShortcode(\"PrimeClockGraph\"),PurePrimeClockGraph=makeShortcode(\"PurePrimeClockGraph\"),DecorativeBoxesNodeGraph=makeShortcode(\"DecorativeBoxesNodeGraph\"),Spacer=makeShortcode(\"Spacer\"),Em=makeShortcode(\"Em\"),layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var a=o,{components:t}=a,n=c(a,[\"components\"]);return mdx(MDXLayout,p(e(e({},layoutProps),n),{components:t,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"If you've struggled to make sense of \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\", you're not alone! I've spoken with \",mdx(\"em\",{parentName:\"p\"},\"so many\"),\" React devs who have been scratching their heads about these two hooks.\"),mdx(\"p\",null,\"My goal in this blog post is to clear up all of this confusion. We'll learn what they do, why they're useful, and how to get the most out of them.\"),mdx(\"p\",null,\"Let's go!\"),mdx(Sidenote,{title:\"Intended audience\",mdxType:\"Sidenote\"},mdx(\"p\",null,\"This tutorial is written to help beginner/intermediate React developers get more comfortable with React. If you're taking your very first steps with React, you might wish to bookmark this one and come back to it in a few weeks!\")),mdx(\"h1\",{id:\"the-basic-idea-1\"},\"The basic idea\"),mdx(\"p\",null,\"Alright, so let's start with \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\".\"),mdx(\"p\",null,\"The fundamental idea with \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" is that it allows us to \",mdx(\"em\",{parentName:\"p\"},\"\\u201Cremember\\u201D\"),\" a computed value between renders.\"),mdx(\"p\",null,\"This definition requires some unpacking. In fact, it requires a pretty sophisticated mental model of how React works! So let's address that first.\"),mdx(\"p\",null,\"The main thing that React does is keep our UI in sync with our application state. The tool that it uses to do this is called a \\u201Cre-render\\u201D.\"),mdx(\"p\",null,\"Each re-render is a snapshot of what the application's UI should look like at a given moment in time, based on the current application state. We can think of it like a stack of photographs, each one capturing how things looked given a specific value for every state variable.\"),mdx(DraggableSnapshots,{mdxType:\"DraggableSnapshots\"}),mdx(\"p\",null,\"Each \\u201Cre-render\\u201D produces a mental picture of what the DOM should look like, based on the current state. In the little demo above, it's pictured as HTML, but in reality it's a bunch of JS objects. This is sometimes called the \",mdx(\"em\",{parentName:\"p\"},\"\\u201Cvirtual DOM\\u201D\"),\", if you've heard that term.\"),mdx(\"p\",null,\"We don't directly tell React which DOM nodes need to change. Instead, we tell React what the UI \",mdx(\"i\",null,\"should be\"),\" based on the current state. By re-rendering, React creates a new snapshot, and it can figure out what needs to change by comparing snapshots, like playing a \\u201Cfind the differences\\u201D game.\"),mdx(Sidenote,{title:\"Wait, what?\",mdxType:\"Sidenote\"},mdx(\"p\",null,\"I recently published a blog post that explains what a \\u201Cre-render\\u201D is, and why they occur. If you're feeling a bit lost, it might help to read that blog post first, and then come back to this one!\"),mdx(List,{style:{marginBottom:0},mdxType:\"List\"},mdx(ListItem,{mdxType:\"ListItem\"},mdx(\"a\",{href:\"/react/why-react-re-renders\"},\"\\u201CWhy React Re-Renders\\u201D\")))),mdx(\"p\",null,\"React is heavily optimized out of the box, and so \",mdx(\"em\",{parentName:\"p\"},\"in general\"),\", re-renders aren't a big deal. But, in certain situations, these snapshots \",mdx(\"i\",null,\"do\"),\" take a while to create. This can lead to performance problems, like the UI not updating quickly enough after the user performs an action.\"),mdx(\"p\",null,\"Fundamentally, \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\" are tools built to help us optimize re-renders. They do this in two ways:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"Reducing the amount of work that needs to be done in a given render.\"),mdx(\"li\",{parentName:\"ol\"},\"Reducing the number of times that a component needs to re-render.\")),mdx(\"p\",null,\"Let's talk about these strategies, one at a time.\"),mdx(\"h1\",{id:\"use-case-one-heavy-computations-2\"},\"Use case 1: Heavy computations\"),mdx(\"p\",null,\"Let's suppose we're building a tool to help users find all of the prime numbers between 0 and \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\", where \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\" is a user-supplied value. A prime number is a number that can only be divided by 1 and itself, like 17.\"),mdx(\"p\",null,\"Here's one possible implementation:\"),mdx(Sandbox,{id:\"prime-number-initial\",minPreviewHeight:350,files:{\"/App.js\":`\nimport React from 'react';\n\nfunction App() {\n  // We hold the user's selected number in state.\n  const [selectedNum, setSelectedNum] = React.useState(100);\n  \n  // We calculate all of the prime numbers between 0 and the\n  // user's chosen number, \\`selectedNum\\`:\n  const allPrimes = [];\n  for (let counter = 2; counter \u003c selectedNum; counter++) {\n    if (isPrime(counter)) {\n      allPrimes.push(counter);\n    }\n  }\n  \n  return (\n    \u003c\u003e\n      \u003cform\u003e\n        \u003clabel htmlFor=\"num\"\u003eYour number:\u003c/label\u003e\n        \u003cinput\n          type=\"number\"\n          value={selectedNum}\n          onChange={(event) =\u003e {\n            // To prevent computers from exploding,\n            // we'll max out at 100k\n            let num = Math.min(100_000, Number(event.target.value));\n            \n            setSelectedNum(num);\n          }}\n        /\u003e\n      \u003c/form\u003e\n      \u003cp\u003e\n        There are {allPrimes.length} prime(s) between 1 and {selectedNum}:\n        {' '}\n        \u003cspan className=\"prime-list\"\u003e\n          {allPrimes.join(', ')}\n        \u003c/span\u003e\n      \u003c/p\u003e\n    \u003c/\u003e\n  );\n}\n\n// Helper function that calculates whether a given\n// number is prime or not.\nfunction isPrime(n){\n  const max = Math.ceil(Math.sqrt(n));\n  \n  if (n === 2) {\n    return true;\n  }\n  \n  for (let counter = 2; counter \u003c= max; counter++) {\n    if (n % counter === 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default App;\n    `,\"/sandbox.config.json\":{hidden:!0,code:`\n{\n  \"infiniteLoopProtection\": false\n}\n      `},\"/styles.css\":{hidden:!0,code:`\nform {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\nlabel {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\ninput {\n  padding: 8px;\n  text-align: center;\n  width: 6rem;\n}\np {\n  margin-top: 64px;\n}\n      `}},mdxType:\"Sandbox\"}),mdx(\"p\",null,\"I don't expect you to read every line of code here, so here are the relevant highlights:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},\"We have a single piece of state, a number called \",mdx(\"inlineCode\",{parentName:\"li\"},\"selectedNum\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"Using a \",mdx(\"inlineCode\",{parentName:\"li\"},\"for\"),\" loop, we manually calculate all of the prime numbers between 0 and \",mdx(\"inlineCode\",{parentName:\"li\"},\"selectedNum\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"We render a controlled number input, so the user can change \",mdx(\"inlineCode\",{parentName:\"li\"},\"selectedNum\"),\".\"),mdx(\"li\",{parentName:\"ul\"},\"We show the user all of the prime numbers that we calculated.\")),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"This code requires a significant amount of computation.\"),\" If the user picks a large \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\", we'll need to go through \",mdx(\"i\",null,\"tens of thousands\"),\" of numbers, checking if each one is prime. And, while there \",mdx(\"i\",null,\"are\"),\" more efficient prime-checking algorithms than the one I used above, it's always going to be computationally intensive.\"),mdx(\"p\",null,\"We do need to perform this calculation \",mdx(\"em\",{parentName:\"p\"},\"sometimes\"),\", like when the user picks a new \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\". But we could potentially run into some performance problems if we wind up doing this work \",mdx(\"em\",{parentName:\"p\"},\"gratuitously\"),\", when it doesn't need to be done.\"),mdx(\"p\",null,\"For example, let's suppose our example also features a digital clock:\"),mdx(Sandbox,{id:\"prime-number-with-clock\",minPreviewHeight:350,dependencies:{\"date-fns\":\"2.28.0\"},files:{\"/App.js\":`\nimport React from 'react';\nimport format from 'date-fns/format';\n\nfunction App() {\n  const [selectedNum, setSelectedNum] = React.useState(100);\n  \n  // \\`time\\` is a state variable that changes once per second,\n  // so that it's always in sync with the current time.\n  const time = useTime();\n  \n  // Calculate all of the prime numbers.\n  // (Unchanged from the earlier example.)\n  const allPrimes = [];\n  for (let counter = 2; counter \u003c selectedNum; counter++) {\n    if (isPrime(counter)) {\n      allPrimes.push(counter);\n    }\n  }\n  \n  return (\n    \u003c\u003e\n      \u003cp className=\"clock\"\u003e\n        {format(time, 'hh:mm:ss a')}\n      \u003c/p\u003e\n      \u003cform\u003e\n        \u003clabel htmlFor=\"num\"\u003eYour number:\u003c/label\u003e\n        \u003cinput\n          type=\"number\"\n          value={selectedNum}\n          onChange={(event) =\u003e {\n            // To prevent computers from exploding,\n            // we'll max out at 100k\n            let num = Math.min(100_000, Number(event.target.value));\n            \n            setSelectedNum(num);\n          }}\n        /\u003e\n      \u003c/form\u003e\n      \u003cp\u003e\n        There are {allPrimes.length} prime(s) between 1 and {selectedNum}:\n        {' '}\n        \u003cspan className=\"prime-list\"\u003e\n          {allPrimes.join(', ')}\n        \u003c/span\u003e\n      \u003c/p\u003e\n    \u003c/\u003e\n  );\n}\n\nfunction useTime() {\n  const [time, setTime] = React.useState(new Date());\n  \n  React.useEffect(() =\u003e {\n    const intervalId = window.setInterval(() =\u003e {\n      setTime(new Date());\n    }, 1000);\n  \n    return () =\u003e {\n      window.clearInterval(intervalId);\n    }\n  }, []);\n  \n  return time;\n}\n\nfunction isPrime(n){\n  const max = Math.ceil(Math.sqrt(n));\n  \n  if (n === 2) {\n    return true;\n  }\n  \n  for (let counter = 2; counter \u003c= max; counter++) {\n    if (n % counter === 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default App;\n    `,\"/sandbox.config.json\":{hidden:!0,code:`\n{\n  \"infiniteLoopProtection\": false\n}\n      `},\"/styles.css\":{hidden:!0,code:`\n.clock {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  margin: 0;\n  padding: 0;\n  font-family: monospace;\n}\nform {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\nlabel {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\ninput {\n  padding: 8px;\n  text-align: center;\n  width: 6rem;\n}\np {\n  margin-top: 64px;\n}\n      `}},mdxType:\"Sandbox\"}),mdx(\"p\",null,\"Our application now has two pieces of state, \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"time\"),\". Once per second, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"time\"),\" variable is updated to reflect the current time, and that value is used to render a digital clock in the top-right corner.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Here's the issue:\"),\" whenever \",mdx(\"i\",null,\"either\"),\" of these state variables change, we re-run all of those expensive prime-number computations. And because \",mdx(\"inlineCode\",{parentName:\"p\"},\"time\"),\" changes once per second, it means we're \",mdx(\"em\",{parentName:\"p\"},\"constantly\"),\" re-generating that list of primes, even when the user's selected number hasn't changed!\"),mdx(ShadowImage,{src:\"/images/usememo-and-usecallback/clock-prime.png?v=2\",alt:\"Labeled screenshot of the code above, showing how whenever the time value changes, the prime numbers have to be recalculated\",width:714,height:332,mdxType:\"ShadowImage\"}),mdx(\"p\",null,\"In JavaScript, we only have one main thread, and we're keeping it \",mdx(\"i\",null,\"super\"),\" busy by running this code over and over, every single second. It means that the application might feel sluggish as the user tries to do other things, especially on lower-end devices.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"But what if we could \\u201Cskip\\u201D these calculations?\"),\" If we already have the list of primes for a given number, why not \",mdx(\"em\",{parentName:\"p\"},\"re-use\"),\" that value instead of calculating it from scratch every time?\"),mdx(\"p\",null,\"This is precisely what \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" allows us to do. Here's what it looks like:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`const allPrimes = React.useMemo(() =\u003e {\n  const result = [];\n\n  for (let counter = 2; counter \u003c selectedNum; counter++) {\n    if (isPrime(counter)) {\n      result.push(counter);\n    }\n  }\n\n  return result;\n}, [selectedNum]);\n`)),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" takes two arguments:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"A chunk of work to be performed, wrapped up in a function\"),mdx(\"li\",{parentName:\"ol\"},\"A list of dependencies\")),mdx(\"p\",null,\"During mount, when this component is rendered for the very first time, React will invoke this function to run all of this logic, calculating all of the primes. \",mdx(\"strong\",{parentName:\"p\"},\"Whatever we return from this function is assigned to the \",mdx(\"inlineCode\",{parentName:\"strong\"},\"allPrimes\"),\" variable.\")),mdx(\"p\",null,\"For every subsequent render, however, \",mdx(\"strong\",{parentName:\"p\"},\"React has a choice to make.\"),\" Should it:\"),mdx(\"ol\",null,mdx(\"li\",{parentName:\"ol\"},\"Invoke the function again, to re-calculate the value, or\"),mdx(\"li\",{parentName:\"ol\"},\"Re-use the data it already has, from the \",mdx(\"i\",null,\"last\"),\" time it did this work.\")),mdx(\"p\",null,\"To answer this question, React looks at the supplied list of dependencies. Have any of them changed since the previous render? If so, React will rerun the supplied function, to calculate a new value. Otherwise, it'll skip all that work and reuse the previously-calculated value.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},mdx(\"inlineCode\",{parentName:\"strong\"},\"useMemo\"),\" is essentially like a lil\\u2019 cache, and the dependencies are the cache invalidation strategy.\")),mdx(\"p\",null,\"In this case, we're essentially saying \\u201Crecalculate the list of primes \",mdx(\"i\",null,\"only when\"),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\" changes\\u201D. When the component re-renders for \",mdx(\"i\",null,\"other\"),\" reasons (eg. the \",mdx(\"inlineCode\",{parentName:\"p\"},\"time\"),\" state variable changing), \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" ignores the function and passes along the cached value.\"),mdx(\"p\",null,\"This is commonly known as \",mdx(\"em\",{parentName:\"p\"},\"memoization\"),\", and it's why this hook is called \\u201CuseMemo\\u201D.\"),mdx(\"p\",null,\"Here's a live version of this solution:\"),mdx(Sandbox,{id:\"prime-number-with-clock-solved\",minPreviewHeight:350,dependencies:{\"date-fns\":\"2.28.0\"},files:{\"/App.js\":`\nimport React from 'react';\nimport format from 'date-fns/format';\n\nfunction App() {\n  const [selectedNum, setSelectedNum] = React.useState(100);\n  const time = useTime();\n  \n  const allPrimes = React.useMemo(() =\u003e {\n    const result = [];\n    \n    for (let counter = 2; counter \u003c selectedNum; counter++) {\n      if (isPrime(counter)) {\n        result.push(counter);\n      }\n    }\n    \n    return result;\n  }, [selectedNum]);\n  \n  return (\n    \u003c\u003e\n      \u003cp className=\"clock\"\u003e\n        {format(time, 'hh:mm:ss a')}\n      \u003c/p\u003e\n      \u003cform\u003e\n        \u003clabel htmlFor=\"num\"\u003eYour number:\u003c/label\u003e\n        \u003cinput\n          type=\"number\"\n          value={selectedNum}\n          onChange={(event) =\u003e {\n            // To prevent computers from exploding,\n            // we'll max out at 100k\n            let num = Math.min(100_000, Number(event.target.value));\n            \n            setSelectedNum(num);\n          }}\n        /\u003e\n      \u003c/form\u003e\n      \u003cp\u003e\n        There are {allPrimes.length} prime(s) between 1 and {selectedNum}:\n        {' '}\n        \u003cspan className=\"prime-list\"\u003e\n          {allPrimes.join(', ')}\n        \u003c/span\u003e\n      \u003c/p\u003e\n    \u003c/\u003e\n  );\n}\n\nfunction useTime() {\n  const [time, setTime] = React.useState(new Date());\n  \n  React.useEffect(() =\u003e {\n    const intervalId = window.setInterval(() =\u003e {\n      setTime(new Date());\n    }, 1000);\n  \n    return () =\u003e {\n      window.clearInterval(intervalId);\n    }\n  }, []);\n  \n  return time;\n}\n\nfunction isPrime(n){\n  const max = Math.ceil(Math.sqrt(n));\n  \n  if (n === 2) {\n    return true;\n  }\n  \n  for (let counter = 2; counter \u003c= max; counter++) {\n    if (n % counter === 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default App;\n    `,\"/sandbox.config.json\":{hidden:!0,code:`\n{\n  \"infiniteLoopProtection\": false\n}\n      `},\"/styles.css\":{hidden:!0,code:`\n.clock {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  margin: 0;\n  padding: 0;\n  font-family: monospace;\n}\nform {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\nlabel {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\ninput {\n  padding: 8px;\n  text-align: center;\n  width: 6rem;\n}\np {\n  margin-top: 64px;\n}\n      `}},mdxType:\"Sandbox\"}),mdx(\"h2\",{id:\"an-alternative-approach-3\"},\"An alternative approach\"),mdx(\"p\",null,\"So, the \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" hook can indeed help us avoid unnecessary calculations here\\u2026 but is it \",mdx(\"i\",null,\"really\"),\" the best solution here?\"),mdx(\"p\",null,\"Often, we can avoid the need for \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" by restructuring things in our application.\"),mdx(\"p\",null,\"Here's one way we could do this:\"),mdx(Sandbox,{id:\"prime-number-alt-strategy\",minPreviewHeight:350,dependencies:{\"date-fns\":\"2.28.0\"},files:{\"/App.js\":`\nimport React from 'react';\n\nimport Clock from './Clock';\nimport PrimeCalculator from './PrimeCalculator';\n\nfunction App() {\n  return (\n    \u003c\u003e\n      \u003cClock /\u003e\n      \u003cPrimeCalculator /\u003e\n    \u003c/\u003e\n  );\n}\n\nexport default App;\n    `,\"/PrimeCalculator.js\":`\nimport React from 'react';\n\nfunction PrimeCalculator() {\n  const [selectedNum, setSelectedNum] = React.useState(100);\n\n  const allPrimes = [];\n  for (let counter = 2; counter \u003c selectedNum; counter++) {\n    if (isPrime(counter)) {\n      allPrimes.push(counter);\n    }\n  }\n  \n  return (\n    \u003c\u003e\n      \u003cform\u003e\n        \u003clabel htmlFor=\"num\"\u003eYour number:\u003c/label\u003e\n        \u003cinput\n          type=\"number\"\n          value={selectedNum}\n          onChange={(event) =\u003e {\n            // To prevent computers from exploding,\n            // we'll max out at 100k\n            let num = Math.min(100_000, Number(event.target.value));\n            \n            setSelectedNum(num);\n          }}\n        /\u003e\n      \u003c/form\u003e\n      \u003cp\u003e\n        There are {allPrimes.length} prime(s) between 1 and {selectedNum}:\n        {' '}\n        \u003cspan className=\"prime-list\"\u003e\n          {allPrimes.join(', ')}\n        \u003c/span\u003e\n      \u003c/p\u003e\n    \u003c/\u003e\n  );\n}\n\nfunction isPrime(n){\n  const max = Math.ceil(Math.sqrt(n));\n  \n  if (n === 2) {\n    return true;\n  }\n  \n  for (let counter = 2; counter \u003c= max; counter++) {\n    if (n % counter === 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default PrimeCalculator;\n    `,\"/Clock.js\":`\nimport React from 'react';\nimport format from 'date-fns/format';\n\nfunction Clock() {\n  const time = useTime();\n  \n  return (\n    \u003cp className=\"clock\"\u003e\n      {format(time, 'hh:mm:ss a')}\n    \u003c/p\u003e\n  );\n}\n\nfunction useTime() {\n  const [time, setTime] = React.useState(new Date());\n  \n  React.useEffect(() =\u003e {\n    const intervalId = window.setInterval(() =\u003e {\n      setTime(new Date());\n    }, 1000);\n  \n    return () =\u003e {\n      window.clearInterval(intervalId);\n    }\n  }, []);\n  \n  return time;\n}\n\nexport default Clock;\n    `,\"/sandbox.config.json\":{hidden:!0,code:`\n{\n  \"infiniteLoopProtection\": false\n}\n      `},\"/styles.css\":{hidden:!0,code:`\n.clock {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  margin: 0;\n  padding: 0;\n  font-family: monospace;\n}\nform {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\nlabel {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\ninput {\n  padding: 8px;\n  text-align: center;\n  width: 6rem;\n}\np {\n  margin-top: 64px;\n}\n      `}},mdxType:\"Sandbox\"}),mdx(\"p\",null,\"I've extracted two new components, \",mdx(\"inlineCode\",{parentName:\"p\"},\"Clock\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"PrimeCalculator\"),\". By branching off from \",mdx(\"inlineCode\",{parentName:\"p\"},\"App\"),\", these two components each manage their own state. A re-render in one component won't affect the other.\"),mdx(\"p\",null,\"Here's a graph showing this dynamic. Each box represents a component instance, and \",mdx(GreenTextFlash,{mdxType:\"GreenTextFlash\"},\"they flash when they re-render\"),\". Try clicking the \\u201CIncrement\\u201D button to see it in action:\"),mdx(PrimeClockGraph,{mdxType:\"PrimeClockGraph\"}),mdx(\"p\",null,\"We hear a lot about lifting state up, but sometimes, the better approach is to \",mdx(\"em\",{parentName:\"p\"},\"push state down!\"),\" Each component should have a single responsibility, and in the example above, \",mdx(\"inlineCode\",{parentName:\"p\"},\"App\"),\" was doing two totally-unrelated things.\"),mdx(\"p\",null,\"Now, this won't always be an option. In a large, real-world app, there's lots of state that \",mdx(\"em\",{parentName:\"p\"},\"needs\"),\" to be lifted up pretty high, and can't be pushed down.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"I have another trick up my sleeves for this situation.\")),mdx(\"p\",null,\"Let's look at an example. Suppose we \",mdx(\"strong\",{parentName:\"p\"},\"need\"),\" the \",mdx(\"inlineCode\",{parentName:\"p\"},\"time\"),\" variable to be lifted up, above \",mdx(\"inlineCode\",{parentName:\"p\"},\"PrimeCalculator\"),\":\"),mdx(Sandbox,{id:\"another-trick\",minPreviewHeight:350,dependencies:{\"date-fns\":\"2.28.0\"},files:{\"/App.js\":`\nimport React from 'react';\nimport { getHours } from 'date-fns';\n\nimport Clock from './Clock';\nimport PrimeCalculator from './PrimeCalculator';\n\n// Transform our PrimeCalculator into a pure component:\nconst PurePrimeCalculator = React.memo(PrimeCalculator);\n\nfunction App() {\n  const time = useTime();\n\n  // Come up with a suitable background color,\n  // based on the time of day:\n  const backgroundColor = getBackgroundColorFromTime(time);\n\n  return (\n    \u003cdiv style={{ backgroundColor }}\u003e\n      \u003cClock time={time} /\u003e\n      \u003cPurePrimeCalculator /\u003e\n    \u003c/div\u003e\n  );\n}\n\nconst getBackgroundColorFromTime = (time) =\u003e {\n  const hours = getHours(time);\n  \n  if (hours \u003c 12) {\n    // A light yellow for mornings\n    return 'hsl(50deg 100% 90%)';\n  } else if (hours \u003c 18) {\n    // Dull blue in the afternoon\n    return 'hsl(220deg 60% 92%)'\n  } else {\n    // Deeper blue at night\n    return 'hsl(220deg 100% 80%)';\n  }\n}\n\nfunction useTime() {\n  const [time, setTime] = React.useState(new Date());\n  \n  React.useEffect(() =\u003e {\n    const intervalId = window.setInterval(() =\u003e {\n      setTime(new Date());\n    }, 1000);\n  \n    return () =\u003e {\n      window.clearInterval(intervalId);\n    }\n  }, []);\n  \n  return time;\n}\n\nexport default App;\n    `,\"/PrimeCalculator.js\":`\nimport React from 'react';\n\nfunction PrimeCalculator() {\n  const [selectedNum, setSelectedNum] = React.useState(100);\n\n  const allPrimes = [];\n  for (let counter = 2; counter \u003c selectedNum; counter++) {\n    if (isPrime(counter)) {\n      allPrimes.push(counter);\n    }\n  }\n  \n  return (\n    \u003c\u003e\n      \u003cform\u003e\n        \u003clabel htmlFor=\"num\"\u003eYour number:\u003c/label\u003e\n        \u003cinput\n          type=\"number\"\n          value={selectedNum}\n          onChange={(event) =\u003e {\n            // To prevent computers from exploding,\n            // we'll max out at 100k\n            let num = Math.min(100_000, Number(event.target.value));\n            \n            setSelectedNum(num);\n          }}\n        /\u003e\n      \u003c/form\u003e\n      \u003cp\u003e\n        There are {allPrimes.length} prime(s) between 1 and {selectedNum}:\n        {' '}\n        \u003cspan className=\"prime-list\"\u003e\n          {allPrimes.join(', ')}\n        \u003c/span\u003e\n      \u003c/p\u003e\n    \u003c/\u003e\n  );\n}\n\nfunction isPrime(n){\n  const max = Math.ceil(Math.sqrt(n));\n  \n  if (n === 2) {\n    return true;\n  }\n  \n  for (let counter = 2; counter \u003c= max; counter++) {\n    if (n % counter === 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default PrimeCalculator;\n    `,\"/Clock.js\":`\nimport React from 'react';\nimport format from 'date-fns/format';\n\nfunction Clock({ time }) {\n  return (\n    \u003cp className=\"clock\"\u003e\n      {format(time, 'hh:mm:ss a')}\n    \u003c/p\u003e\n  );\n}\n\nexport default Clock;\n    `,\"/sandbox.config.json\":{hidden:!0,code:`\n{\n  \"infiniteLoopProtection\": false\n}\n      `},\"/styles.css\":{hidden:!0,code:`\nbody {\n  padding: 0px;\n  margin: 0px;\n}\n#root {\n  height: 100%;\n}\n#root \u003e div {\n  padding: 16px;\n  min-height: 100%;\n}\n.clock {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  margin: 0;\n  padding: 0;\n  font-family: monospace;\n}\nform {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\nlabel {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n}\ninput {\n  padding: 8px;\n  text-align: center;\n  width: 6rem;\n}\np {\n  margin-top: 64px;\n}\n      `}},mdxType:\"Sandbox\"}),mdx(\"p\",null,\"Here's an updated graph, showing what's happening here:\"),mdx(PurePrimeClockGraph,{mdxType:\"PurePrimeClockGraph\"}),mdx(\"p\",null,\"Like a force field, \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo\"),\" wraps around our component and protects it from unrelated updates. Our \",mdx(\"inlineCode\",{parentName:\"p\"},\"PurePrimeCalculator\"),\" will only re-render when it receives new data, or when its internal state changes.\"),mdx(\"p\",null,\"This is known as a \",mdx(\"em\",{parentName:\"p\"},\"pure component\"),\". Essentially, we're telling React that this component will always produce the same \",mdx(\"i\",null,\"output\"),\" given the same \",mdx(\"i\",null,\"input\"),\", and we can skip the re-renders where nothing's changed.\"),mdx(\"p\",null,\"I wrote more about how \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo\"),\" works in my recent blog post, \",mdx(\"a\",e({parentName:\"p\"},{href:\"/react/why-react-re-renders\"}),\"\\u201CWhy React Re-Renders\\u201D\"),\".\"),mdx(Sidenote,{type:\"success\",title:\"A more conventional approach\",mdxType:\"Sidenote\"},mdx(\"p\",null,\"In the example above, I'm applying \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo\"),\" to the \",mdx(\"em\",{parentName:\"p\"},\"imported\"),\" \",mdx(\"inlineCode\",{parentName:\"p\"},\"PrimeCalculator\"),\" component.\"),mdx(\"p\",null,\"In truth, this is a bit unusual. I chose to structure it this way so that everything was visible in the same file, to make it easier to understand.\"),mdx(\"p\",null,\"In practice, I often apply \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo\"),\" to the component \",mdx(\"em\",{parentName:\"p\"},\"export\"),\", like this:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`// PrimeCalculator.js\nfunction PrimeCalculator() {\n  /* Component stuff here */\n}\n\nexport default React.memo(PrimeCalculator);\n`)),mdx(\"p\",null,\"Our \",mdx(\"inlineCode\",{parentName:\"p\"},\"PrimeCalculator\"),\" component will now always be pure, without us having to tinker with it when we go to consume it.\"),mdx(\"p\",null,\"Should we ever need a non-pure version of \",mdx(\"inlineCode\",{parentName:\"p\"},\"PrimeCalculator\"),\", we can export the underlying component as a named export. I don't think I've ever needed to do this though.\")),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"There's an interesting perspective-shift here:\"),\" Before, we were memoizing the result of a specific computation, calculating the prime numbers. In this case, however, \",mdx(\"em\",{parentName:\"p\"},\"I've memoized the entire component instead.\")),mdx(\"p\",null,\"Either way, the expensive calculation stuff will only re-run when the user picks a new \",mdx(\"inlineCode\",{parentName:\"p\"},\"selectedNum\"),\". But we've optimized the parent component rather than the specific slow lines of code.\"),mdx(\"p\",null,\"I'm not saying that one approach is better than the other; each tool has its spot in the toolbox. But in this specific case, I prefer this approach.\"),mdx(\"p\",null,\"Now, if you've ever tried to use pure components in a real-world setting, you've likely noticed something peculiar: \",mdx(\"strong\",{parentName:\"p\"},\"Pure components often re-render quite a bit,\"),\" even when it seems like nothing's changed! \\u{1F62C}\"),mdx(\"p\",null,\"This leads us nicely into the second problem that \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" solves.\"),mdx(Sidenote,{title:\"Even more alternatives\",mdxType:\"Sidenote\"},mdx(\"p\",null,\"In his blog post \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://overreacted.io/before-you-memo/\"}),\"\\u201CBefore you memo()\\u201D\"),\", Dan Abramov shares another approach based around restructuring the app using \",mdx(\"inlineCode\",{parentName:\"p\"},\"children\"),\", to avoid needing to do any memoization.\"),mdx(\"p\",null,\"Thanks to Yuval Shimoni for pointing this out!\")),mdx(\"h1\",{id:\"use-case-two-preserved-references-4\"},\"Use case 2: Preserved references\"),mdx(\"p\",null,\"In the example below, I've created a \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" component. It displays a set of colorful boxes, to be used for some sort of decorative purpose.\"),mdx(\"p\",null,\"I also have a bit of unrelated state, the user's name.\"),mdx(Sandbox,{id:\"reference-trouble\",splitConsole:!0,activePath:\"/App.js\",files:{\"/App.js\":`\nimport React from 'react';\n\nimport Boxes from './Boxes';\n\nfunction App() {\n  const [name, setName] = React.useState('');\n  const [boxWidth, setBoxWidth] = React.useState(1);\n  \n  const id = React.useId();\n  \n  // Try changing some of these values!\n  const boxes = [\n    { flex: boxWidth, background: 'hsl(345deg 100% 50%)' },\n    { flex: 3, background: 'hsl(260deg 100% 40%)' },\n    { flex: 1, background: 'hsl(50deg 100% 60%)' },\n  ];\n  \n  return (\n    \u003c\u003e\n      \u003cBoxes boxes={boxes} /\u003e\n      \n      \u003csection\u003e\n        \u003clabel htmlFor={\\`\\${id}-name\\`}\u003e\n          Name:\n        \u003c/label\u003e\n        \u003cinput\n          id={\\`\\${id}-name\\`}\n          type=\"text\"\n          value={name}\n          onChange={(event) =\u003e {\n            setName(event.target.value);\n          }}\n        /\u003e\n        \u003clabel htmlFor={\\`\\${id}-box-width\\`}\u003e\n          First box width:\n        \u003c/label\u003e\n        \u003cinput\n          id={\\`\\${id}-box-width\\`}\n          type=\"range\"\n          min={1}\n          max={5}\n          step={0.01}\n          value={boxWidth}\n          onChange={(event) =\u003e {\n            setBoxWidth(Number(event.target.value));\n          }}\n        /\u003e\n      \u003c/section\u003e\n    \u003c/\u003e\n  );\n}\n\nexport default App;\n    `,\"/Boxes.js\":{hidden:!1,code:`\nimport React from 'react';\n\nfunction Boxes({ boxes }) {\n  return (\n    \u003cdiv className=\"boxes-wrapper\"\u003e\n      {boxes.map((boxStyles, index) =\u003e (\n        \u003cdiv\n          key={index}\n          className=\"box\"\n          style={boxStyles}\n        /\u003e\n      ))}\n    \u003c/div\u003e\n  );\n}\n\nexport default React.memo(Boxes);\n`},\"/styles.css\":{hidden:!0,code:`\n.boxes-wrapper {\n  width: 100%;\n  display: flex;\n  gap: 16px;\n}\n\n.box {\n  height: 100px;\n  border-radius: 4px;\n  background: hsl(350deg 100% 50%);\n}\n\nsection {\n  padding: 32px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\ninput {\n  margin-bottom: 24px;\n}\n    `}},mdxType:\"Sandbox\"}),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" is a pure component, thanks to a \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo()\"),\" wrapping around the default export in \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes.js\"),\". This means that it should only re-render whenever its props change.\"),mdx(\"p\",null,mdx(\"em\",{parentName:\"p\"},\"And yet,\"),\" whenever the user changes their name, \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" re-renders as well!\"),mdx(\"p\",null,\"Here's a graph showing this dynamic. Try typing in the text input, and notice how both components re-render:\"),mdx(DecorativeBoxesNodeGraph,{mdxType:\"DecorativeBoxesNodeGraph\"}),mdx(\"p\",null,\"What the heck?! Why isn't our \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo()\"),\" force field protecting us here??\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" component only has 1 prop, \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\", and it appears as though we're giving it the exact same data on every render. It's always the same thing: a red box, a wide purple box, a yellow box. We \",mdx(\"i\",null,\"do\"),\" have a \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxWidth\"),\" state variable that affects the \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\" array, but we aren't changing it!\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Here's the problem:\"),\" every time React re-renders, we're producing a \",mdx(\"em\",{parentName:\"p\"},\"brand new array\"),\". They're equivalent in terms of \",mdx(\"em\",{parentName:\"p\"},\"value\"),\", but not in terms of \",mdx(\"em\",{parentName:\"p\"},\"reference\"),\".\"),mdx(\"p\",null,\"I think it'll be helpful if we forget about React for a second, and talk about plain old JavaScript. Let's look at a similar situation:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`function getNumbers() {\n  return [1, 2, 3];\n}\n\nconst firstResult = getNumbers();\nconst secondResult = getNumbers();\n\nconsole.log(firstResult === secondResult);\n`)),mdx(\"p\",null,\"What do you think? Is \",mdx(\"inlineCode\",{parentName:\"p\"},\"firstResult\"),\" equal to \",mdx(\"inlineCode\",{parentName:\"p\"},\"secondResult\"),\"?\"),mdx(\"p\",null,\"In a sense, they are. Both variables hold an identical structure, \",mdx(\"inlineCode\",{parentName:\"p\"},\"[1, 2, 3]\"),\". But that's not what the \",mdx(\"inlineCode\",{parentName:\"p\"},\"===\"),\" operator is actually checking.\"),mdx(\"p\",null,\"Instead, \",mdx(\"inlineCode\",{parentName:\"p\"},\"===\"),\" is checking whether two expressions \",mdx(\"i\",null,\"are the same thing.\")),mdx(\"p\",null,\"We've created two different arrays. They may hold the same contents, but they're not the same array, in the same way that \",mdx(\"em\",{parentName:\"p\"},\"two identical twins are not the same person.\")),mdx(\"img\",{alt:\"Illustration of two identical-looking people saying \\u201Cwe're different people!\\u201D\",src:\"/images/usememo-and-usecallback/twins.png\",width:1628/3,height:1167/3}),mdx(\"p\",null,\"Every time we invoke the \",mdx(\"inlineCode\",{parentName:\"p\"},\"getNumbers\"),\" function, we create a brand-new array, a distinct thing held in the computer's memory. If we invoke it multiple times, we'll store multiple copies of this array in-memory.\"),mdx(\"p\",null,\"Note that simple data types \\u2014 things like strings, numbers, and boolean values \\u2014 can be compared by value. But when it comes to arrays and objects, they're only compared by \",mdx(\"i\",null,\"reference\"),\". For more information on this distinction, check out this wonderful blog post by Dave Ceddia: \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://daveceddia.com/javascript-references/\"}),\"A Visual Guide to References in JavaScript\"),\".\"),mdx(Spacer,{size:48,mdxType:\"Spacer\"}),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Taking this back to React:\"),\" Our \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" React component is also a JavaScript function. When we render it, we invoke that function:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-jsx\"}),`// Every time we render this component, we call this function...\nfunction App() {\n  // ...and wind up creating a brand new array...\n  const boxes = [\n    { flex: boxWidth, background: 'hsl(345deg 100% 50%)' },\n    { flex: 3, background: 'hsl(260deg 100% 40%)' },\n    { flex: 1, background: 'hsl(50deg 100% 60%)' },\n  ];\n\n  // ...which is then passed as a prop to this component!\n  return (\n    \u003cBoxes boxes={boxes} /\u003e\n  );\n}\n`)),mdx(\"p\",null,\"When the \",mdx(\"inlineCode\",{parentName:\"p\"},\"name\"),\" state changes, our \",mdx(\"inlineCode\",{parentName:\"p\"},\"App\"),\" component re-renders, which re-runs all of the code. We construct a brand-new \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\" array, and pass it onto our \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" component.\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"And \",mdx(\"inlineCode\",{parentName:\"strong\"},\"Boxes\"),\" re-renders, because we gave it a brand new array!\")),mdx(\"p\",null,\"The \",mdx(\"i\",null,\"structure\"),\" of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\" array hasn't changed between renders, but that isn't relevant. All React knows is that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\" prop has received a freshly-created, never-before-seen array.\"),mdx(\"p\",null,\"To solve this problem, we can use the \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" hook:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`const boxes = React.useMemo(() =\u003e {\n  return [\n    { flex: boxWidth, background: 'hsl(345deg 100% 50%)' },\n    { flex: 3, background: 'hsl(260deg 100% 40%)' },\n    { flex: 1, background: 'hsl(50deg 100% 60%)' },\n  ];\n}, [boxWidth]);\n`)),mdx(\"p\",null,\"Unlike the example we saw earlier, with the prime numbers, we're not worried about a computationally-expensive calculation here. Our only goal is to \",mdx(\"em\",{parentName:\"p\"},\"preserve a reference\"),\" to a particular array.\"),mdx(\"p\",null,\"We list \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxWidth\"),\" as a dependency, because we \",mdx(\"em\",{parentName:\"p\"},\"do\"),\" want the \",mdx(\"inlineCode\",{parentName:\"p\"},\"Boxes\"),\" component to re-render when the user tweaks the width of the red box.\"),mdx(\"p\",null,\"I think a quick sketch will help illustrate. Before, we were creating a brand new array, as part of each snapshot:\"),mdx(\"img\",{alt:\"Diagram showing how each snapshot builds a brand new \\u201Cboxes\\u201D array\",src:\"/images/usememo-and-usecallback/snapshots-default.png\",width:3129/2,height:1828/2}),mdx(\"p\",null,\"With \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\", however, we're re-using a previously-created \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\" array:\"),mdx(\"img\",{alt:\"Diagram showing how each snapshot builds a brand new \\u201Cboxes\\u201D array\",src:\"/images/usememo-and-usecallback/snapshots-with-memo.png\",width:3129/2,height:1828/2}),mdx(\"p\",null,\"By preserving the same reference across multiple renders, we allow pure components to function the way we want them to, ignoring renders that don't affect the UI.\"),mdx(\"h1\",{id:\"the-usecallback-hook-5\"},\"The useCallback hook\"),mdx(\"p\",null,\"Alright, so that just about covers \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\"\\u2026 what about \",mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\"?\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Here's the short version:\"),\" It's the exact same thing, but for \",mdx(\"em\",{parentName:\"p\"},\"functions\"),\" instead of arrays / objects.\"),mdx(\"p\",null,\"Similar to arrays and objects, functions are compared by reference, not by value:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`const functionOne = function() {\n  return 5;\n};\nconst functionTwo = function() {\n  return 5;\n};\n\nconsole.log(functionOne === functionTwo); // false\n`)),mdx(\"p\",null,\"This means that if we define a function within our components, it'll be re-generated on every single render, producing an identical-but-unique function each time.\"),mdx(\"p\",null,\"Let's look at an example:\"),mdx(Sandbox,{id:\"usecallback-example-before\",splitConsole:!0,splitRatio:.6,files:{\"/App.js\":`\nimport React from 'react';\n\nimport MegaBoost from './MegaBoost';\n\nfunction App() {\n  const [count, setCount] = React.useState(0);\n\n  function handleMegaBoost() {\n    setCount((currentValue) =\u003e currentValue + 1234);\n  }\n\n  return (\n    \u003c\u003e\n      Count: {count}\n      \u003cbutton\n        onClick={() =\u003e {\n          setCount(count + 1)\n        }}\n      \u003e\n        Click me!\n      \u003c/button\u003e\n      \u003cMegaBoost handleClick={handleMegaBoost} /\u003e\n    \u003c/\u003e\n  );\n}\n\nexport default App;\n    `,\"/MegaBoost.js\":`\nimport React from 'react';\n\nfunction MegaBoost({ handleClick }) {\n  console.log('Render MegaBoost');\n  \n  return (\n    \u003cbutton\n      className=\"mega-boost-button\"\n      onClick={handleClick}\n    \u003e\n      MEGA BOOST!\n    \u003c/button\u003e\n  );\n}\n\nexport default React.memo(MegaBoost);\n    `,\"/styles.css\":{code:`\n#root {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n}\nbutton {\n  display: block;\n}\n.mega-boost-button {\n  background: hsl(350deg 100% 40%);\n  color: white;\n  padding: 16px 48px;\n  border: none;\n}\n      `,hidden:!0}},mdxType:\"Sandbox\"}),mdx(\"p\",null,\"This sandbox depicts a typical counter application, but with a special \\u201CMega Boost\\u201D button. This button increases the count by a large amount, in case you're in a hurry and don't want to click the standard button a bunch of times.\"),mdx(\"p\",null,\"The \",mdx(\"inlineCode\",{parentName:\"p\"},\"MegaBoost\"),\" component is a pure component, thanks to \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo\"),\". It doesn't depend on \",mdx(\"inlineCode\",{parentName:\"p\"},\"count\"),\"\\u2026 \",mdx(\"strong\",{parentName:\"p\"},\"But it re-renders whenever \",mdx(\"inlineCode\",{parentName:\"strong\"},\"count\"),\" changes!\")),mdx(\"p\",null,\"Like we saw with the \",mdx(\"inlineCode\",{parentName:\"p\"},\"boxes\"),\" array, the problem here is that we're generating a brand new function on every render. If we render 3 times, we'll create 3 separate \",mdx(\"inlineCode\",{parentName:\"p\"},\"handleMegaBoost\"),\" functions, breaking through the \",mdx(\"inlineCode\",{parentName:\"p\"},\"React.memo\"),\" force field.\"),mdx(\"p\",null,\"Using what we've learned about \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\", we could solve the problem like this:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`const handleMegaBoost = React.useMemo(() =\u003e {\n  return function() {\n    setCount((currentValue) =\u003e currentValue + 1234);\n  }\n}, []);\n`)),mdx(\"p\",null,\"Instead of returning an array, we're returning a \",mdx(\"em\",{parentName:\"p\"},\"function\"),\". This function is then stored in the \",mdx(\"inlineCode\",{parentName:\"p\"},\"handleMegaBoost\"),\" variable.\"),mdx(\"p\",null,\"This works\\u2026 but there's a better way:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`const handleMegaBoost = React.useCallback(() =\u003e {\n  setCount((currentValue) =\u003e currentValue + 1234);\n}, []);\n`)),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\" serves the same purpose as \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\", but it's built specifically for functions. We hand it a function directly, and it memoizes that function, threading it between renders.\"),mdx(\"p\",null,\"Put another way, these two expressions have the same effect:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`// This:\nReact.useCallback(function helloWorld(){}, []);\n\n// ...Is functionally equivalent to this:\nReact.useMemo(() =\u003e function helloWorld(){}, []);\n`)),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"useCallback is syntactic sugar.\"),\" It exists purely to make our lives a bit nicer when trying to memoize callback functions.\"),mdx(\"h1\",{id:\"when-to-use-these-hooks-6\"},\"When to use these hooks\"),mdx(\"p\",null,\"Alright, so we've seen how \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\" allow us to thread a reference across multiple renders, to reuse complex calculations or to avoid breaking pure components. The question is: \",mdx(\"strong\",{parentName:\"p\"},\"how often should we use it?\")),mdx(\"p\",null,\"In my personal opinion, it would be a waste of time to wrap every single object/array/function in these hooks. The benefits are negligible in most cases; React is highly optimized, and re-renders often aren't as slow or expensive as we often think they are!\"),mdx(\"p\",null,\"The best way to use these hooks is in response to a problem. If you notice your app becoming a bit sluggish, you can use the React Profiler to hunt down slow renders. In some cases, you'll be able to improve performance by restructuring your application. In other cases, \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\" can help speed things up.\"),mdx(\"p\",null,\"(If you're not sure how to use the React profiler, I covered it in my recent blog post, \",mdx(\"a\",{href:\"/react/why-react-re-renders\"},\"\\u201CWhy React Re-Renders\\u201D!\"),\")\"),mdx(\"p\",null,\"That said, there are a couple of scenarios in which I \",mdx(\"i\",null,\"do\"),\" pre-emptively apply these hooks.\"),mdx(Sidenote,{title:\"This could change in the future!\",mdxType:\"Sidenote\"},mdx(\"p\",null,\"The React team is actively investigating whether it's possible to \\u201Cauto-memoize\\u201D code during the compile step. It's still in the research phase, but early experimentation appears promising.\"),mdx(\"p\",null,\"It could be that in the future, all of this stuff is done for us automatically. Until then, though, we still need to optimize things ourselves.\"),mdx(\"p\",null,\"For more information, check out this talk by Xuan Huang called \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.youtube.com/watch?v=lGEMwh32soc\"}),\"\\u201CReact without memo\\u201D\"),\".\")),mdx(\"h2\",{id:\"inside-generic-custom-hooks-7\"},\"Inside generic custom hooks\"),mdx(\"p\",null,\"One of my favourite lil\\u2019 custom hooks is \",mdx(\"inlineCode\",{parentName:\"p\"},\"useToggle\"),\", a friendly helper that works almost exactly like \",mdx(\"inlineCode\",{parentName:\"p\"},\"useState\"),\", but can only toggle a state variable between \",mdx(\"inlineCode\",{parentName:\"p\"},\"true\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"false\"),\":\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`function App() {\n  const [isDarkMode, toggleDarkMode] = useToggle(false);\n\n  return (\n    \u003cbutton onClick={toggleDarkMode}\u003e\n      Toggle color theme\n    \u003c/button\u003e\n  );\n}\n`)),mdx(\"p\",null,\"Here's how this custom hook is defined:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`function useToggle(initialValue) {\n  const [value, setValue] = React.useState(initialValue);\n\n  const toggle = React.useCallback(() =\u003e {\n    setValue(v =\u003e !v);\n  }, []);\n\n  return [value, toggle];\n}\n`)),mdx(\"p\",null,\"Notice that the \",mdx(\"inlineCode\",{parentName:\"p\"},\"toggle\"),\" function is memoized with \",mdx(\"inlineCode\",{parentName:\"p\"},\"useCallback\"),\".\"),mdx(\"p\",null,\"When I build custom reusable hooks like this, I like to make them as efficient as possible, because \",mdx(\"strong\",{parentName:\"p\"},\"I don't know where they'll be used in the future.\"),\" It might be overkill in 95% of situations, but if I use this hook 30 or 40 times, there's a good chance this will help improve the performance of my application.\"),mdx(\"h2\",{id:\"inside-context-providers-8\"},\"Inside context providers\"),mdx(\"p\",null,\"When we share data across an application with context, it's common to pass a big object as the \",mdx(\"inlineCode\",{parentName:\"p\"},\"value\"),\" attribute.\"),mdx(\"p\",null,\"It's generally a good idea to memoize this object:\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"language-js\"}),`const AuthContext = React.createContext({});\n\nfunction AuthProvider({ user, status, forgotPwLink, children }){\n  const memoizedValue = React.useMemo(() =\u003e {\n    return {\n      user,\n      status,\n      forgotPwLink,\n    };\n  }, [user, status, forgotPwLink]);\n\n  return (\n    \u003cAuthContext.Provider value={memoizedValue}\u003e\n      {children}\n    \u003c/AuthContext.Provider\u003e\n  );\n}\n`)),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"Why is this beneficial?\"),\" There might be dozens of pure components that consume this context. Without \",mdx(\"inlineCode\",{parentName:\"p\"},\"useMemo\"),\", all of these components would be forced to re-render if \",mdx(\"inlineCode\",{parentName:\"p\"},\"AuthProvider\"),\"'s parent happens to re-render.\"),mdx(\"h1\",{id:\"the-joy-of-react-9\"},\"The Joy of React\"),mdx(\"p\",null,\"Phew! You made it to the end. I know that this tutorial covers some pretty rocky ground. \\u{1F605}\"),mdx(\"p\",null,\"I know that these two hooks are thorny, that React itself can feel really overwhelming and confusing. It's a difficult tool!\"),mdx(\"p\",null,mdx(\"strong\",{parentName:\"p\"},\"But here's the thing:\"),\" If you can get over the initial hump, React is an \",mdx(Em,{color:\"var(--color-secondary)\",mdxType:\"Em\"},\"absolute joy\"),\" to use.\"),mdx(\"p\",null,\"I started using React back in 2015, and it's become my absolute favourite way to build complex user interfaces and web applications. I've tried just about every JS framework under the sun, and I'm just not as productive with them as I am with React.\"),mdx(\"p\",null,\"If you've struggled with React, I'm here to help!\"),mdx(\"p\",null,\"For the past two years, I've been hard at work on a course called \",mdx(\"a\",e({parentName:\"p\"},{href:\"https://www.joyofreact.com/\"}),\"The Joy of React\"),\". It's a beginner-friendly self-paced interactive online course that teaches you how to build next-level cool stuff with React.\"),mdx(\"p\",null,\"If you found this blog post even a little bit helpful, I think you'll get \",mdx(\"em\",{parentName:\"p\"},\"so much\"),\" out of my course. Unlike this blog post, the course combines interactive articles like this one with videos, exercises, mini-games, and even some real-world-style projects. It's a hands-on adventure.\"),mdx(\"p\",null,\"You can learn more about the course, and discover the joy of building with React:\"),mdx(\"ul\",null,mdx(\"li\",{parentName:\"ul\"},mdx(\"a\",e({parentName:\"li\"},{href:\"https://www.joyofreact.com/\"}),\"The Joy of React\"))))}MDXContent.isMDXComponent=!0;\n","scope":{}},"frontmatter":{"layout":"Tutorial","title":"Understanding useMemo and useCallback","subtitle":"A roadtrip through two of React's most notorious hooks","abstract":"What's the deal with these two hooks?! Lots of devs find them confusing, for a whole host of reasons. In this tutorial, we'll dig deep and understand what they do, why they're useful, and how to get the most out of them.","isPublished":true,"publishedOn":"2022-08-30T09:00:00-0400","updatedOn":"2023-09-19T23:19:14.611Z","categorySlug":"react","slug":"usememo-and-usecallback","pathname":"/react/usememo-and-usecallback/","isExternal":false,"humanReadableDate":"September 19th, 2023","shortDate":"Sep 2023"},"headings":[{"id":"the-basic-idea-1","text":"The basic idea","level":1},{"id":"use-case-one-heavy-computations-2","text":"Use case 1: Heavy computations","level":1},{"id":"an-alternative-approach-3","text":"An alternative approach","level":2},{"id":"use-case-two-preserved-references-4","text":"Use case 2: Preserved references","level":1},{"id":"the-usecallback-hook-5","text":"The useCallback hook","level":1},{"id":"when-to-use-these-hooks-6","text":"When to use these hooks","level":1},{"id":"inside-generic-custom-hooks-7","text":"Inside generic custom hooks","level":2},{"id":"inside-context-providers-8","text":"Inside context providers","level":2},{"id":"the-joy-of-react-9","text":"The Joy of React","level":1}]},"__N_SSG":true},"page":"/[categorySlug]/[contentSlug]","query":{"categorySlug":"react","contentSlug":"usememo-and-usecallback"},"buildId":"YPMROGOVM7X3hI-XlMhrX","isFallback":false,"dynamicIds":[1947,17222,36503,85527,56150],"gsp":true,"scriptLoader":[]}</script><next-route-announcer><p aria-live="assertive" id="__next-route-announcer__" role="alert" style="border: 0px; clip: rect(0px, 0px, 0px, 0px); height: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; width: 1px; white-space: nowrap; overflow-wrap: normal;"></p></next-route-announcer><script src="./Understanding useMemo and useCallback_files/760-08370d8a9ce4903f.js.download"></script><script src="./Understanding useMemo and useCallback_files/[categorySlug]-1e69a2ee35dc6db6.js.download"></script><script src="./Understanding useMemo and useCallback_files/489-2d3c904f874dc073.js.download"></script><script src="./Understanding useMemo and useCallback_files/index-16fd1f29108d3e1e.js.download"></script><script src="./Understanding useMemo and useCallback_files/tutorials-ba859b651ceaf956.js.download"></script><script src="./Understanding useMemo and useCallback_files/latest-84926f2f47d969ac.js.download"></script><script src="./Understanding useMemo and useCallback_files/goodies-931aaf9457b2bd2e.js.download"></script><script src="./Understanding useMemo and useCallback_files/courses-332ad79953dca43f.js.download"></script><script src="./Understanding useMemo and useCallback_files/privacy-fe994c97fd616a8f.js.download"></script><script src="./Understanding useMemo and useCallback_files/terms-b937a11369689e2a.js.download"></script></body></html>